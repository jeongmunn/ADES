{"ast":null,"code":"import _classCallCheck from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import{getStorage,ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import Button from'react-bootstrap/Button';import'../css/Table&Add.css';import ModalPopup from'./EditBadge';import{signOut}from\"firebase/auth\";import{auth}from'../firebase.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BadgeAdmin=/*#__PURE__*/function(_React$Component){_inherits(BadgeAdmin,_React$Component);var _super=_createSuper(BadgeAdmin);function BadgeAdmin(){var _this;_classCallCheck(this,BadgeAdmin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],showModalPopup:false,class:[],name:'',requirements:'',pic_url:'',badgeClassID:'',badgeID:'',uid:'',id:0};_this.isShowPopup=function(status,badgeID,name,requirements,className,pic_url){_this.setState({showModalPopup:status});_this.setState({badgeID:badgeID});_this.setState({name:name});_this.setState({requirements:requirements});_this.setState({badgeClassID:className});_this.setState({pic_url:pic_url});};_this.handleName=function(event){_this.setState({name:event.target.value});};_this.handleRequirement=function(event){_this.setState({requirements:event.target.value});};_this.handleURL=function(event){_this.setState({pic_url:event.target.files[0]});};_this.handleBadgeClassID=function(event){_this.setState({badgeClassID:event.target.value});};_this.handleSubmit=function(event){event.preventDefault();//data extraction (combining data)\n// file upload\nif(_this.state.pic_url==''){var badge={name:_this.state.name,requirements:_this.state.requirements,badgeClassID:_this.state.badgeClassID,pic_url:'https://firebasestorage.googleapis.com/v0/b/quizment-ae4a6.appspot.com/o/img%2Fdefault-image.png?alt=media&token=369e00f7-926d-4b3c-abbb-958828b303d5'};var config={headers:{'content-type':'application/json'}};axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge',badge,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();});}else{var storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.pic_url.name);var file=_this.state.pic_url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.pic_url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var bcID=document.getElementById(\"dropDown\");var bID=bcID.value;var badgeClassID=parseInt(bID);console.log(badgeClassID+\"classBADGE\");var badge={name:_this.state.name,requirements:_this.state.requirements,pic_url:downloadURL,badgeClassID:badgeClassID};console.log(\"BADGEEEE\"+JSON.stringify(badge));var config={headers:{'content-type':'application/json'}};axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge',badge,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();});});}};return _this;}_createClass(BadgeAdmin,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;auth.onAuthStateChanged(function(user){if(user){console.log(\"User is Signed IN \");_this2.setState({uid:user.uid});var config={headers:{'content-type':'application/json'}};axios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+_this2.state.uid,config).then(function(res){if(res.data.type===1){window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/studentDashboard');}else if(res.data.type===2){// area to put your axios \n}else{window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});}else{console.log(\"THERE IS NO USER\");signOut(auth);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});axios.get(\"https://ades-ca1-project.herokuapp.com/api/badges\").then(function(res){console.log(res.data.length);_this2.setState({data:res.data});});axios.get(\"https://ades-ca1-project.herokuapp.com/api/badgeClass\").then(function(res){console.log(res.data.length);_this2.setState({class:res.data});});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;var data2=this.state.class;return/*#__PURE__*/_jsx(\"div\",{id:\"body\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"badgeAdmin\",style:{fontFamily:\"sans-serif \",color:'blue'},children:\"Badges Administration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewBadges\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"divForm\",children:[/*#__PURE__*/_jsx(\"h2\",{id:\"add\",children:\"Add Badge\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,id:\"form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Badge Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",onChange:this.handleName})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Badge Requirement:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"requirements\",onChange:this.handleRequirement})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Pic URL:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"pic_url\",onChange:this.handleURL})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Badge Class ID:\",/*#__PURE__*/_jsxs(\"select\",{name:\"badgeClassID\",onChange:this.handleBadgeClassID,id:\"dropDown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Air\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Water\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Fire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Geo\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Badge Class\"}),/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Describtion \"})]}),data2&&data2.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{id:\"tableRow\",class:\"spaceUnder\",children:[/*#__PURE__*/_jsx(\"td\",{children:item.className}),/*#__PURE__*/_jsx(\"td\",{children:item.classDescription})]});})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"View Badges\"}),/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Badge Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Requirements\"}),/*#__PURE__*/_jsx(\"th\",{children:\"badgeClass\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Picture\"})]}),data&&data.map(function(item2){return/*#__PURE__*/_jsxs(\"tr\",{id:\"tableRow\",class:\"spaceUnder\",children:[/*#__PURE__*/_jsx(\"td\",{children:item2.name}),/*#__PURE__*/_jsx(\"td\",{children:item2.requirements}),/*#__PURE__*/_jsx(\"td\",{children:item2.className}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item2.pic_url,style:{height:200,width:200},alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"warning\",onClick:function onClick(){return _this3.isShowPopup(true,item2.badgeID,item2.name,item2.requirements,item2.className,item2.pic_url);},children:\"Edit\"})})]},item2.badgeID);})]})]}),/*#__PURE__*/_jsx(ModalPopup,{showModalPopup:this.state.showModalPopup,onPopupClose:this.isShowPopup,badgeID:this.state.badgeID,name:this.state.name,requirements:this.state.requirements,className:this.state.badgeClassID,pic_url:this.state.pic_url})]})]})});}}]);return BadgeAdmin;}(React.Component);export{BadgeAdmin as default};","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/BadgeAdmin.js"],"names":["React","axios","Link","getStorage","ref","uploadBytes","getDownloadURL","Button","ModalPopup","signOut","auth","BadgeAdmin","state","data","showModalPopup","class","name","requirements","pic_url","badgeClassID","badgeID","uid","id","isShowPopup","status","className","setState","handleName","event","target","value","handleRequirement","handleURL","files","handleBadgeClassID","handleSubmit","preventDefault","badge","config","headers","post","then","res","console","log","window","location","reload","storage","storageRef","file","metadata","contentType","type","downloadURL","bcID","document","getElementById","bID","parseInt","JSON","stringify","onAuthStateChanged","user","get","replace","length","data2","fontFamily","color","map","item","classDescription","item2","height","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport Button from 'react-bootstrap/Button';\nimport '../css/Table&Add.css';\nimport ModalPopup from './EditBadge';\nimport { signOut } from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nexport default class BadgeAdmin extends React.Component {\n  state = {\n    data: [],\n    showModalPopup: false,\n    class: [],\n    name: '',\n    requirements: '',\n    pic_url: '',\n    badgeClassID: '',\n    badgeID: '',\n    uid: '',\n    id: 0\n  }\n\n  componentDidMount() {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        console.log(\"User is Signed IN \");\n        this.setState({ uid: user.uid });\n        const config = {\n          headers: {\n            'content-type': 'application/json'\n          }\n        }\n\n        axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + this.state.uid, config)\n          .then(res => {\n            if (res.data.type === 1) {\n              window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/studentDashboard');\n\n            } else if (res.data.type === 2) {\n              // area to put your axios \n            } else {\n              window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n            }\n          })\n      } else {\n        console.log(\"THERE IS NO USER\");\n        signOut(auth);\n        window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n      }\n    });\n\n\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badges`)\n      .then(res => {\n        console.log(res.data.length);\n\n        this.setState({ data: res.data });\n      })\n\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badgeClass`)\n      .then(res => {\n        console.log(res.data.length);\n\n        this.setState({ class: res.data });\n      })\n  }\n\n  isShowPopup = (status, badgeID, name, requirements, className, pic_url) => {\n    this.setState({ showModalPopup: status });\n    this.setState({ badgeID: badgeID });\n    this.setState({ name: name });\n    this.setState({ requirements: requirements });\n    this.setState({ badgeClassID: className });\n    this.setState({ pic_url: pic_url });\n  }\n  handleName = event => {\n    this.setState({ name: event.target.value });\n  }\n\n  handleRequirement = event => {\n    this.setState({ requirements: event.target.value });\n  }\n\n\n\n  handleURL = event => {\n    this.setState({ pic_url: event.target.files[0], });\n  }\n  handleBadgeClassID = event => {\n    this.setState({badgeClassID: event.target.value})\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    //data extraction (combining data)\n    // file upload\n        if (this.state.pic_url == '') { \n          const badge = {\n            name: this.state.name,\n            requirements: this.state.requirements,\n            badgeClassID: this.state.badgeClassID,\n            pic_url: 'https://firebasestorage.googleapis.com/v0/b/quizment-ae4a6.appspot.com/o/img%2Fdefault-image.png?alt=media&token=369e00f7-926d-4b3c-abbb-958828b303d5'\n        };\n  \n\n        const config = {\n            headers: {\n                'content-type': 'application/json'\n            }\n        }\n\n        axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge', badge, config)\n        .then(res => {\n          console.log(res);\n          console.log(res.data);\n          window.location.reload();\n        })\n\n        }else{\n          const storage = getStorage();\n    const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\n    var file = this.state.pic_url;\n    // Create file metadata including the content type\n    /** @type {any} */\n    const metadata = {\n      contentType: this.state.pic_url.type,\n    };\n\n    uploadBytes(storageRef, file, metadata);\n\n    getDownloadURL(storageRef).then((downloadURL) => {\n      console.log('File available at', downloadURL);\n\n      var bcID = document.getElementById(\"dropDown\");\n      var bID = bcID.value;\n      var badgeClassID = parseInt(bID);\n      console.log(badgeClassID + \"classBADGE\")\n      const badge = {\n        name: this.state.name,\n        requirements: this.state.requirements,\n        pic_url: downloadURL,\n        badgeClassID: badgeClassID\n      };\n      console.log(\"BADGEEEE\" + JSON.stringify(badge))\n\n      const config = {\n        headers: {\n          'content-type': 'application/json'\n        }\n      }\n      axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge', badge, config)\n        .then(res => {\n          console.log(res);\n          console.log(res.data);\n          window.location.reload();\n        })\n    });\n        }\n    \n  }\n\n  render() {\n    const data = this.state.data;\n    const data2 = this.state.class;\n    return (\n\n      <div id=\"body\">\n        <div id=\"div\">\n          <h1 className=\"badgeAdmin\" style={{ fontFamily: \"sans-serif \", color: 'blue' }}>Badges Administration</h1>\n          <div className=\"viewBadges\">\n            <div id=\"divForm\">\n              <h2 id=\"add\">Add Badge</h2>\n              <form onSubmit={this.handleSubmit} id=\"form\" >\n                <label>\n                  Badge Name:\n                  <input type=\"text\" name=\"name\" onChange={this.handleName} />\n                </label>\n                <br />\n                <label>\n                  Badge Requirement:\n                  <input type=\"text\" name=\"requirements\" onChange={this.handleRequirement} />\n                </label>\n                <br />\n                <label>\n                  Pic URL:\n                  <input type=\"file\" name=\"pic_url\" onChange={this.handleURL} />\n                </label>\n                {/* Please remember to change and do JOIN table for it to not display as ID */}\n                <br />\n                <label>\n                  Badge Class ID:\n                  <select name=\"badgeClassID\" onChange={this.handleBadgeClassID} id=\"dropDown\">\n                    <option value=\"1\">Air</option>\n                    <option value=\"2\">Water</option>\n                    <option value=\"3\">Fire</option>\n                    <option value=\"4\">Geo</option>\n                  </select>\n                  {/* <input type=\"text\" name=\"badgeClassID\" onChange={this.handleBadgeClassID} /> */}\n                </label>\n                <button type=\"submit\">Add</button>\n              </form>\n            </div>\n\n            <div> <div>\n              <h2>Badge Class</h2>\n              <table class=\"table\">\n                <tr>\n                  <th>Class Name</th>\n                  <th>Describtion </th>\n\n                </tr>\n                {data2 && data2.map(item =>\n                  <tr id='tableRow' class=\"spaceUnder\">\n                    <td>{item.className}</td>\n                    <td>{item.classDescription}</td>\n\n                  </tr>\n                )}\n              </table>\n            </div></div>\n            <div>\n              <h2>View Badges</h2>\n              <table class=\"table\">\n                <tr>\n                  <th>Badge Name</th>\n                  <th>Requirements</th>\n                  <th>badgeClass</th>\n                  <th>Picture</th>\n                </tr>\n                {data && data.map(item2 =>\n                  <tr key={item2.badgeID} id='tableRow' class=\"spaceUnder\">\n                    <td>{item2.name}</td>\n                    <td>{item2.requirements}</td>\n                    <td>{item2.className}</td>\n                    <td><img src={item2.pic_url} style={{ height: 200, width: 200 }} alt=\"\"></img></td>\n                    <td><Button type=\"button\" variant=\"warning\" onClick={() => this.isShowPopup(true, item2.badgeID, item2.name, item2.requirements, item2.className, item2.pic_url)}>Edit</Button></td>\n                  </tr>\n                )}\n              </table>\n            </div>\n            <ModalPopup\n              showModalPopup={this.state.showModalPopup}\n              onPopupClose={this.isShowPopup}\n              badgeID={this.state.badgeID}\n              name={this.state.name}\n              requirements={this.state.requirements}\n              className={this.state.badgeClassID}\n              pic_url={this.state.pic_url}></ModalPopup>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}