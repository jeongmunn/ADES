{"ast":null,"code":"import _regeneratorRuntime from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from'react';import{onAuthStateChanged,signOut,updateEmail,updatePassword}from\"firebase/auth\";import{auth}from'../firebase.js';import Button from'@mui/material/Button';import TeacherNavigation from'./TeacherNavigation';import TextField from'@mui/material/TextField';import axios from'axios';import sample from'../logoLoading.webm';import'../App.css';import'../css/styling2.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfileTeacher(){// const emailData = useRef(\"\");\nvar passwordData=useRef(\"\");var _useState=useState(),_useState2=_slicedToArray(_useState,2),uidOfUser=_useState2[0],setUid=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),emailData=_useState4[0],setEmail=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState('block'),_useState8=_slicedToArray(_useState7,2),display=_useState8[0],setDisplay=_useState8[1];var _useState9=useState('none'),_useState10=_slicedToArray(_useState9,2),display2=_useState10[0],setDisplay2=_useState10[1];// Similar to componentDidMount and componentDidUpdate:\nuseEffect(function(){onAuthStateChanged(auth,function(currentUser){if(user){setDisplay('none');setDisplay2('block');setUser(currentUser);setEmail(user.email);setUid(user.uid);var config={headers:{'content-type':'application/json'}};axios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+currentUser.uid,config).then(function(res){if(res.data.type===1){navigate('/profile');}else if(res.data.type===2){}});}else{console.log(\"error\");signOut(auth);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});});var handleChange=function handleChange(event){setEmail(event.target.value);};var logout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return signOut(auth);case 2:window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');case 3:case\"end\":return _context.stop();}}},_callee);}));return function logout(){return _ref.apply(this,arguments);};}();var updateEmailFunction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updateEmail(user,emailData).then(function(){console.log(\"Update Of Email Successful!\");var config={headers:{'content-type':'application/json'}};var emailDetails={email:emailData};console.log(emailDetails.email);axios.put('https://ades-ca1-project.herokuapp.com/api/email/'+uidOfUser,emailDetails,config).then(function(res){console.log(res);window.location.reload();});}).catch(function(error){alert('Email did not update. Please try again.');var errorCode=error.code;var errorMessage=error.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateEmailFunction(){return _ref2.apply(this,arguments);};}();var updatePasswordFunction=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:updatePassword(user,passwordData.current.value).then(function(){console.log(\"Update Of Password Successful!\");window.location.reload();}).catch(function(error){alert('Password did not update. Please try again.');var errorCode=error.code;var errorMessage=error.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function updatePasswordFunction(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"video\",{style:{display:display,width:'100%',height:'auto'},className:\"videoLoader\",autoPlay:true,loop:true,muted:true,children:/*#__PURE__*/_jsx(\"source\",{src:sample,type:\"video/webm\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:display2},children:[/*#__PURE__*/_jsx(TeacherNavigation,{className:\"navBar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Profile Administration\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"filled-required\",label:\"Email\",margin:\"dense\",type:\"email\",placeholder:emailData,onChange:handleChange}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'15px',marginBottom:'15px',width:'100%'},variant:\"contained\",onClick:updateEmailFunction,children:\" Update Email\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:passwordData,id:\"outlined-password-input\",label:\"Change Password\",margin:\"dense\",type:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'15px',marginBottom:'15px',width:'100%'},variant:\"contained\",onClick:updatePasswordFunction,children:\" Update Password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'15px',marginBottom:'15px',width:'100%'},variant:\"contained\",onClick:logout,children:\" Logout\"})]})]})]});}","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/ProfileTeacher.js"],"names":["React","useState","useRef","useEffect","onAuthStateChanged","signOut","updateEmail","updatePassword","auth","Button","TeacherNavigation","TextField","axios","sample","ProfileTeacher","passwordData","uidOfUser","setUid","emailData","setEmail","user","setUser","display","setDisplay","display2","setDisplay2","currentUser","email","uid","config","headers","get","then","res","data","type","navigate","console","log","window","location","replace","handleChange","event","target","value","logout","updateEmailFunction","emailDetails","put","reload","catch","error","alert","errorCode","code","errorMessage","message","JSON","stringify","updatePasswordFunction","current","width","height","background","color","paddingTop","paddingBottom","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport {\n    onAuthStateChanged,\n    signOut,\n    updateEmail,\n    updatePassword,\n} from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nimport Button from '@mui/material/Button';\nimport TeacherNavigation from './TeacherNavigation';\nimport TextField from '@mui/material/TextField';\nimport axios from 'axios';\nimport sample from '../logoLoading.webm';\nimport '../App.css';\nimport '../css/styling2.css';\n\nexport default function ProfileTeacher() {\n    // const emailData = useRef(\"\");\n    const passwordData = useRef(\"\");\n    const [uidOfUser, setUid] = useState();\n    const [emailData, setEmail] = useState(\"\");\n    const [user, setUser] = useState({});\n    const [display, setDisplay] = useState('block');\n    const [display2, setDisplay2] = useState('none');\n    // Similar to componentDidMount and componentDidUpdate:\n    useEffect(() => {\n        onAuthStateChanged(auth, (currentUser) => {\n            if (user) {\n                setDisplay('none');\n                setDisplay2('block');\n                setUser(currentUser);\n                setEmail(user.email);\n                setUid(user.uid);\n                const config = {\n                    headers: {\n                        'content-type': 'application/json'\n                    }\n                }\n                axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + currentUser.uid, config)\n                    .then(res => {\n                        if (res.data.type === 1) {\n                            navigate('/profile');\n                        } else if (res.data.type === 2) {\n                        }\n                })\n            } else {\n                console.log(\"error\")\n                signOut(auth);\n                window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n            }\n        });\n    });\n\n\n    const handleChange = (event) => {\n        setEmail(event.target.value);\n    };\n    const logout = async () => {\n        await signOut(auth);\n        window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n    };\n    const updateEmailFunction = async () => {\n        updateEmail(user, emailData).then(() => {\n            console.log(\"Update Of Email Successful!\");\n            const config = {\n                headers: {\n                    'content-type': 'application/json'\n                }\n            }\n            const emailDetails = {\n                email: emailData\n            };\n            console.log(emailDetails.email);\n            axios.put('https://ades-ca1-project.herokuapp.com/api/email/' + uidOfUser, emailDetails, config)\n                .then(res => {\n                    console.log(res);\n                    window.location.reload();\n            })\n        }).catch((error) => {\n            alert('Email did not update. Please try again.');\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        });\n    };\n\n\n    const updatePasswordFunction = async () => {\n        updatePassword(user, passwordData.current.value).then(() => {\n            console.log(\"Update Of Password Successful!\");\n            window.location.reload();\n        }).catch((error) => {\n            alert('Password did not update. Please try again.');\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        });\n    };\n    return (\n        <div>\n            <video style={{ display: display, width: '100%', height: 'auto' }} className='videoLoader' autoPlay loop muted>\n                <source src={sample} type='video/webm' />\n            </video>\n        <div style={{ display: display2 }}>\n            <TeacherNavigation  className=\"navBar\">\n      </TeacherNavigation>\n        <div className=\"profile\">\n            <h1>Profile Administration</h1>\n            <TextField\n                required\n                fullWidth\n                id=\"filled-required\" \n                label=\"Email\"\n                margin=\"dense\"\n                type=\"email\"\n                placeholder={emailData}\n                onChange={handleChange}\n            />\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '15px', marginBottom: '15px', width: '100%' }} variant=\"contained\" onClick={updateEmailFunction}> Update Email</Button>\n            <TextField\n                required\n                fullWidth\n                inputRef={passwordData}\n                id=\"outlined-password-input\"\n                label=\"Change Password\"\n                margin=\"dense\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n            />\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '15px', marginBottom: '15px', width: '100%' }} variant=\"contained\" onClick={updatePasswordFunction}> Update Password</Button>\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '15px', marginBottom: '15px', width: '100%' }} variant=\"contained\" onClick={logout}> Logout</Button>\n        </div>\n        </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}