{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\ADES\\\\frontEnd\\\\src\\\\components\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nimport '../styling2.css';\nimport React, { useState, useRef, useEffect } from 'react';\nimport { onAuthStateChanged, signOut, updateEmail, updatePassword } from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  // const emailData = useRef(\"\");\n  const passwordData = useRef(\"\");\n  const [uidOfUser, setUid] = useState();\n  const [emailData, setEmail] = useState(\"\");\n  const [user, setUser] = useState({}); // Similar to componentDidMount and componentDidUpdate:\n\n  useEffect(() => {\n    onAuthStateChanged(auth, currentUser => {\n      if (user) {\n        setUser(currentUser);\n        setEmail(user.email);\n        setUid(user.uid);\n      } else {\n        console.log(\"error\");\n        signOut(auth);\n        window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n      }\n    });\n  });\n\n  const handleChange = event => {\n    setEmail(event.target.value);\n  };\n\n  const logout = async () => {\n    await signOut(auth);\n    window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n  };\n\n  const updateEmailFunction = async () => {\n    updateEmail(user, emailData).then(() => {\n      console.log(\"Update Of Email Successful!\");\n      const config = {\n        headers: {\n          'content-type': 'application/json'\n        }\n      };\n      const emailDetails = {\n        email: emailData\n      };\n      console.log(emailDetails.email);\n      axios.put('https://ades-ca1-project.herokuapp.com/api/email/' + uidOfUser, emailDetails, config).then(res => {\n        console.log(res);\n        window.location.reload();\n      });\n    }).catch(error => {\n      alert('Email did not update. Please try again.');\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      console.log(JSON.stringify(errorCode));\n      console.log(JSON.stringify(errorMessage));\n    });\n  };\n\n  const updatePasswordFunction = async () => {\n    updatePassword(user, passwordData.current.value).then(() => {\n      console.log(\"Update Of Password Successful!\");\n      window.location.reload();\n    }).catch(error => {\n      alert('Password did not update. Please try again.');\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      console.log(JSON.stringify(errorCode));\n      console.log(JSON.stringify(errorMessage));\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Profile Administration\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      required: true,\n      fullWidth: true,\n      id: \"filled-required\",\n      label: \"Email\",\n      margin: \"dense\",\n      type: \"email\",\n      value: emailData,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      sx: {\n        background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\n        color: 'white',\n        paddingTop: '10px',\n        paddingBottom: '10px',\n        margin: '10px',\n        width: '100%'\n      },\n      variant: \"contained\",\n      onClick: updateEmailFunction,\n      children: \" Update Email\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      required: true,\n      fullWidth: true,\n      inputRef: passwordData,\n      id: \"outlined-password-input\",\n      label: \"Change Password\",\n      margin: \"dense\",\n      type: \"password\",\n      autoComplete: \"current-password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      sx: {\n        background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\n        color: 'white',\n        paddingTop: '10px',\n        paddingBottom: '10px',\n        margin: '10px',\n        width: '100%'\n      },\n      variant: \"contained\",\n      onClick: updatePasswordFunction,\n      children: \" Update Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      sx: {\n        background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\n        color: 'white',\n        paddingTop: '10px',\n        paddingBottom: '10px',\n        margin: '15px',\n        width: '100%'\n      },\n      variant: \"contained\",\n      onClick: logout,\n      children: \" Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Profile, \"fzripXWNVu2gPjCqLJGCz+tRMpQ=\");\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/ADES/frontEnd/src/components/Profile.js"],"names":["React","useState","useRef","useEffect","onAuthStateChanged","signOut","updateEmail","updatePassword","auth","Button","TextField","axios","Profile","passwordData","uidOfUser","setUid","emailData","setEmail","user","setUser","currentUser","email","uid","console","log","window","location","replace","handleChange","event","target","value","logout","updateEmailFunction","then","config","headers","emailDetails","put","res","reload","catch","error","alert","errorCode","code","errorMessage","message","JSON","stringify","updatePasswordFunction","current","background","color","paddingTop","paddingBottom","margin","width"],"mappings":"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","sourcesContent":["import '../styling2.css';\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n    onAuthStateChanged,\r\n    signOut,\r\n    updateEmail,\r\n    updatePassword,\r\n} from \"firebase/auth\";\r\nimport { auth } from '../firebase.js';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport axios from 'axios';\r\n\r\nexport default function Profile() {\r\n    // const emailData = useRef(\"\");\r\n    const passwordData = useRef(\"\");\r\n    const [uidOfUser, setUid] = useState();\r\n    const [emailData, setEmail] = useState(\"\");\r\n    const [user, setUser] = useState({});\r\n\r\n    // Similar to componentDidMount and componentDidUpdate:\r\n    useEffect(() => {\r\n        onAuthStateChanged(auth, (currentUser) => {\r\n            if (user) {\r\n                setUser(currentUser);\r\n                setEmail(user.email);\r\n                setUid(user.uid);\r\n            } else {\r\n                console.log(\"error\")\r\n                signOut(auth);\r\n                window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n            }\r\n        });\r\n    });\r\n\r\n\r\n    const handleChange = (event) => {\r\n        setEmail(event.target.value);\r\n    };\r\n    const logout = async () => {\r\n        await signOut(auth);\r\n        window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n    };\r\n    const updateEmailFunction = async () => {\r\n        updateEmail(user, emailData).then(() => {\r\n            console.log(\"Update Of Email Successful!\");\r\n            const config = {\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n            }\r\n            const emailDetails = {\r\n                email: emailData\r\n            };\r\n            console.log(emailDetails.email);\r\n            axios.put('https://ades-ca1-project.herokuapp.com/api/email/' + uidOfUser, emailDetails, config)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    window.location.reload();\r\n            })\r\n        }).catch((error) => {\r\n            alert('Email did not update. Please try again.');\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            console.log(JSON.stringify(errorCode));\r\n            console.log(JSON.stringify(errorMessage));\r\n        });\r\n    };\r\n\r\n\r\n    const updatePasswordFunction = async () => {\r\n        updatePassword(user, passwordData.current.value).then(() => {\r\n            console.log(\"Update Of Password Successful!\");\r\n            window.location.reload();\r\n        }).catch((error) => {\r\n            alert('Password did not update. Please try again.');\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            console.log(JSON.stringify(errorCode));\r\n            console.log(JSON.stringify(errorMessage));\r\n        });\r\n    };\r\n    return (\r\n        <div className=\"profile\">\r\n            <h1>Profile Administration</h1>\r\n            <TextField\r\n                required\r\n                fullWidth\r\n                id=\"filled-required\" \r\n                label=\"Email\"\r\n                margin=\"dense\"\r\n                type=\"email\"\r\n                value={emailData}\r\n                onChange={handleChange}\r\n            />\r\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', margin: '10px', width: '100%' }} variant=\"contained\" onClick={updateEmailFunction}> Update Email</Button>\r\n            <TextField\r\n                required\r\n                fullWidth\r\n                inputRef={passwordData}\r\n                id=\"outlined-password-input\"\r\n                label=\"Change Password\"\r\n                margin=\"dense\"\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n            />\r\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', margin: '10px', width: '100%' }} variant=\"contained\" onClick={updatePasswordFunction}> Update Password</Button>\r\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', margin: '15px', width: '100%' }} variant=\"contained\" onClick={logout}> Logout</Button>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}