{"ast":null,"code":"import _regeneratorRuntime from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"children\",\"value\",\"index\"];import'../styling2.css';import React,{useState,useRef,useEffect}from'react';import{onAuthStateChanged,signOut,createUserWithEmailAndPassword,sendPasswordResetEmail,signInWithEmailAndPassword}from\"firebase/auth\";import{auth}from'../firebase.js';import{useNavigate}from'react-router-dom';// import TabPanel from '@mui/lab/TabPanel';\nimport Button from'@mui/material/Button';import Typography from'@mui/material/Typography';import Tabs from'@mui/material/Tabs';import Tab from'@mui/material/Tab';import Box from'@mui/material/Box';import TextField from'@mui/material/TextField';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){var children=props.children,value=props.value,index=props.index,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"simple-tabpanel-\".concat(index),\"aria-labelledby\":\"simple-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:/*#__PURE__*/_jsx(Typography,{children:children})})}));}function a11yProps(index){return{id:\"simple-tab-\".concat(index),'aria-controls':\"simple-tabpanel-\".concat(index)};}var SignIn=function SignIn(){var navigate=useNavigate();var loginEmailInput=useRef(\"\");var loginPasswordInput=useRef(\"\");var registerEmailInput=useRef(\"\");var registerPasswordInput=useRef(\"\");var emailInput=useRef(\"\");// const [registerEmail, setRegisterEmail] = useState(\"\");\n// const [registerPassword, setRegisterPassword] = useState(\"\");\n// const [loginEmail, setLoginEmail] = useState(\"\");\n// const [loginPassword, setLoginPassword] = useState(\"\");\n// const [email, setEmail] = useState(\"\");\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];// Similar to componentDidMount and componentDidUpdate:\nuseEffect(function(){onAuthStateChanged(auth,function(currentUser){if(currentUser){var config={headers:{'content-type':'application/json'}};axios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+currentUser.uid,config).then(function(res){if(res.data.type===1){navigate('/studentDashboard');}else if(res.data.type===2){navigate('/teacherDashboard');}else{}});}});});var handleChange=function handleChange(event,newValue){setValue(newValue);};var register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,config,dateData,personalDetails,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return createUserWithEmailAndPassword(auth,registerEmailInput.current.value,registerPasswordInput.current.value);case 3:user=_context.sent;config={headers:{'content-type':'application/json'}};dateData=JSON.stringify(user.user.metadata.createdAt);dateData=parseInt(JSON.parse(dateData));personalDetails={name:JSON.parse(JSON.stringify(user.user.email)),Uid:JSON.parse(JSON.stringify(user.user.uid)),streaks:0,totalPts:0,mazeLvl:1,redeemedPts:0,type:1,lastLogin:dateData};axios.post('https://ades-ca1-project.herokuapp.com/api/newStudent',personalDetails,config).then(function(res){console.log(res);console.log(res.data);navigate('/studentDashboard');});_context.next=17;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);errorCode=_context.t0.code;errorMessage=_context.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function register(){return _ref.apply(this,arguments);};}();var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user,config,uid,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return signInWithEmailAndPassword(auth,loginEmailInput.current.value,loginPasswordInput.current.value);case 3:user=_context2.sent;config={headers:{'content-type':'application/json'}};uid=JSON.parse(JSON.stringify(user.user.uid));axios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+uid,config).then(function(res){if(res.data.type===1){navigate('/studentDashboard');}else if(res.data.type===2){navigate('/teacherDashboard');}else{navigate('/');}});_context2.next=15;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);errorCode=_context2.t0.code;errorMessage=_context2.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function login(){return _ref2.apply(this,arguments);};}();var forgotPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var user,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return sendPasswordResetEmail(auth,emailInput.current.value);case 3:user=_context3.sent;_context3.next=12;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);errorCode=_context3.t0.code;errorMessage=_context3.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function forgotPassword(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"signin\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Authentication\"}),/*#__PURE__*/_jsx(Box,{sx:{width:'100%'},children:/*#__PURE__*/_jsxs(Box,{sx:{borderColor:'divider'},children:[/*#__PURE__*/_jsxs(Tabs,{value:value,onChange:handleChange,textColor:\"secondary\",indicatorColor:\"secondary\",\"aria-label\":\"secondary tabs example\",centered:true,children:[/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Sign In\"},a11yProps(0))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Sign Up\"},a11yProps(1))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Forgot Password\"},a11yProps(2)))]}),/*#__PURE__*/_jsxs(TabPanel,{value:value,index:0,children:[/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:loginEmailInput,id:\"outlined-required\",label:\"Email\",margin:\"dense\",type:\"email\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:loginPasswordInput,id:\"outlined-password-input\",label:\"Password\",margin:\"dense\",type:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'10px',width:'100%'},variant:\"contained\",onClick:login,children:\" Sign In\"})]}),/*#__PURE__*/_jsxs(TabPanel,{value:value,index:1,children:[/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:registerEmailInput,id:\"outlined-required\",label:\"Email\",margin:\"dense\",type:\"email\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:registerPasswordInput,id:\"outlined-password-input\",label:\"Password\",margin:\"dense\",type:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'10px',width:'100%'},variant:\"contained\",onClick:register,children:\" Sign Up\"})]}),/*#__PURE__*/_jsxs(TabPanel,{value:value,index:2,children:[/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:emailInput,id:\"outlined-required\",label:\"Email\",margin:\"dense\",type:\"email\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'10px',width:'100%'},variant:\"contained\",onClick:forgotPassword,children:\" Forgot Password\"})]})]})})]});};export default SignIn;","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/SignIn.js"],"names":["React","useState","useRef","useEffect","onAuthStateChanged","signOut","createUserWithEmailAndPassword","sendPasswordResetEmail","signInWithEmailAndPassword","auth","useNavigate","Button","Typography","Tabs","Tab","Box","TextField","axios","TabPanel","props","children","value","index","other","p","a11yProps","id","SignIn","navigate","loginEmailInput","loginPasswordInput","registerEmailInput","registerPasswordInput","emailInput","setValue","currentUser","config","headers","get","uid","then","res","data","type","handleChange","event","newValue","register","current","user","dateData","JSON","stringify","metadata","createdAt","parseInt","parse","personalDetails","name","email","Uid","streaks","totalPts","mazeLvl","redeemedPts","lastLogin","post","console","log","errorCode","code","errorMessage","message","login","forgotPassword","width","borderColor","background","color","paddingTop","paddingBottom","marginTop"],"mappings":"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","sourcesContent":["import '../styling2.css';\nimport React, { useState, useRef, useEffect } from 'react';\nimport {\n    onAuthStateChanged,\n    signOut,\n    createUserWithEmailAndPassword,\n    sendPasswordResetEmail,\n    signInWithEmailAndPassword\n} from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nimport { useNavigate } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n// import TabPanel from '@mui/lab/TabPanel';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport axios from 'axios';\n\nfunction TabPanel(props) {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`simple-tabpanel-${index}`}\n            aria-labelledby={`simple-tab-${index}`}\n            {...other}\n        >\n            {value === index && (\n                <Box sx={{ p: 3 }}>\n                    <Typography>{children}</Typography>\n                </Box>\n            )}\n        </div>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.number.isRequired,\n    value: PropTypes.number.isRequired,\n};\n\nfunction a11yProps(index) {\n    return {\n        id: `simple-tab-${index}`,\n        'aria-controls': `simple-tabpanel-${index}`,\n    };\n}\n\n\n\nconst SignIn = () => {\n    let navigate = useNavigate();\n    const loginEmailInput = useRef(\"\");\n    const loginPasswordInput = useRef(\"\");\n    const registerEmailInput = useRef(\"\");\n    const registerPasswordInput = useRef(\"\");\n    const emailInput = useRef(\"\");\n    // const [registerEmail, setRegisterEmail] = useState(\"\");\n    // const [registerPassword, setRegisterPassword] = useState(\"\");\n    // const [loginEmail, setLoginEmail] = useState(\"\");\n    // const [loginPassword, setLoginPassword] = useState(\"\");\n    // const [email, setEmail] = useState(\"\");\n    const [value, setValue] = useState(0);\n\n    // Similar to componentDidMount and componentDidUpdate:\n    useEffect(() => {\n        onAuthStateChanged(auth, (currentUser) => {\n            if (currentUser) {\n                const config = {\n                    headers: {\n                        'content-type': 'application/json'\n                    }\n                }\n                axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + currentUser.uid, config)\n                    .then(res => {\n                        if (res.data.type === 1) {\n                            navigate('/studentDashboard');\n                        } else if (res.data.type === 2) {\n                            navigate('/teacherDashboard');\n                        } else {\n                        }\n                    });\n            }\n        });\n    });\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n\n    const register = async () => {\n        try {\n            const user = await createUserWithEmailAndPassword(\n                auth,\n                registerEmailInput.current.value,\n                registerPasswordInput.current.value\n            );\n            const config = {\n                headers: {\n                    'content-type': 'application/json'\n                }\n            }\n\n            var dateData = JSON.stringify(user.user.metadata.createdAt);\n            dateData = parseInt(JSON.parse(dateData));\n            const personalDetails = {\n                name: JSON.parse(JSON.stringify(user.user.email)),\n                Uid: JSON.parse(JSON.stringify(user.user.uid)),\n                streaks: 0,\n                totalPts: 0,\n                mazeLvl: 1,\n                redeemedPts: 0,\n                type: 1,\n                lastLogin: dateData\n            };\n            axios.post('https://ades-ca1-project.herokuapp.com/api/newStudent', personalDetails, config)\n                .then(res => {\n                    console.log(res);\n                    console.log(res.data);\n                    navigate('/studentDashboard');\n                })\n        } catch (error) {\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        }\n    };\n\n    const login = async () => {\n        try {\n            const user = await signInWithEmailAndPassword(\n                auth,\n                loginEmailInput.current.value,\n                loginPasswordInput.current.value\n            );\n            const config = {\n                headers: {\n                    'content-type': 'application/json'\n                }\n            }\n            var uid = JSON.parse(JSON.stringify(user.user.uid));\n            axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + uid, config)\n                .then(res => {\n                    if (res.data.type === 1) {\n                        navigate('/studentDashboard');\n                    } else if (res.data.type === 2) {\n                        navigate('/teacherDashboard');\n                    } else {\n                        navigate('/');\n                    }\n                })\n        } catch (error) {\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        }\n    };\n\n    const forgotPassword = async () => {\n        try {\n            const user = await sendPasswordResetEmail(\n                auth,\n                emailInput.current.value);\n        } catch (error) {\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        }\n    };\n\n    return (\n        <div className=\"signin\">\n            <h1>Authentication</h1>\n            <Box sx={{ width: '100%' }}>\n                <Box sx={{ borderColor: 'divider' }}>\n                    <Tabs\n                        value={value}\n                        onChange={handleChange}\n                        textColor=\"secondary\"\n                        indicatorColor=\"secondary\"\n                        aria-label=\"secondary tabs example\"\n                        centered\n                    >\n                        <Tab label=\"Sign In\" {...a11yProps(0)} />\n                        <Tab label=\"Sign Up\" {...a11yProps(1)} />\n                        <Tab label=\"Forgot Password\" {...a11yProps(2)} />\n                    </Tabs>\n                    <TabPanel value={value} index={0}>\n                        {/* <input placeholder=\"email\" type=\"email\" onChange={(event) => {\n                            setLoginEmail(event.target.value);\n                        }} /> */}\n                        {/* <input placeholder=\"password\" type=\"password\" onChange={(event) => {\n                            setLoginPassword(event.target.value);\n                        }} /> */}\n                        <TextField\n                            required\n                            fullWidth\n                            inputRef={loginEmailInput}\n                            id=\"outlined-required\"\n                            label=\"Email\"\n                            margin=\"dense\"\n                            type=\"email\"\n                        />\n                        <TextField\n                            required\n                            fullWidth\n                            inputRef={loginPasswordInput}\n                            id=\"outlined-password-input\"\n                            label=\"Password\"\n                            margin=\"dense\"\n                            type=\"password\"\n                            autoComplete=\"current-password\"\n                        />\n                        <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '10px', width: '100%' }} variant=\"contained\" onClick={login}> Sign In</Button>\n                    </TabPanel>\n                    <TabPanel value={value} index={1}>\n                        {/* <input placeholder=\"email\" type=\"email\" onChange={(event) => {\n                            setRegisterEmail(event.target.value);\n                        }} />\n                        <input placeholder=\"password\" type=\"password\" onChange={(event) => {\n                            setRegisterPassword(event.target.value);\n                        }} /> */}\n                        <TextField\n                            required\n                            fullWidth\n                            inputRef={registerEmailInput}\n                            id=\"outlined-required\"\n                            label=\"Email\"\n                            margin=\"dense\"\n                            type=\"email\"\n                        />\n                        <TextField\n                            required\n                            fullWidth\n                            inputRef={registerPasswordInput}\n                            id=\"outlined-password-input\"\n                            label=\"Password\"\n                            margin=\"dense\"\n                            type=\"password\"\n                            autoComplete=\"current-password\"\n                        />\n                        <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '10px', width: '100%' }} variant=\"contained\" onClick={register}> Sign Up</Button>\n                    </TabPanel>\n                    <TabPanel value={value} index={2}>\n                        {/* <input placeholder=\"email\" type=\"email\" onChange={(event) => {\n                            setEmail(event.target.value);\n                        }} /> */}\n                        <TextField\n                            required\n                            fullWidth\n                            inputRef={emailInput}\n                            id=\"outlined-required\"\n                            label=\"Email\"\n                            margin=\"dense\"\n                            type=\"email\"\n                        />\n                        <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '10px', width: '100%' }} variant=\"contained\" onClick={forgotPassword}> Forgot Password</Button>\n                    </TabPanel>\n                </Box>\n            </Box>\n        </div>\n    )\n}\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}