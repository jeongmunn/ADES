{"ast":null,"code":"import _regeneratorRuntime from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../SignIn.css';import{createUserWithEmailAndPassword,sendPasswordResetEmail,signInWithEmailAndPassword}from\"firebase/auth\";import{auth}from'../firebase.js';import{useNavigate}from'react-router-dom';import React,{useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),registerEmail=_useState2[0],setRegisterEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),registerPassword=_useState4[0],setRegisterPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),loginEmail=_useState6[0],setLoginEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),loginPassword=_useState8[0],setLoginPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var navigate=useNavigate();var register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,config,dateData,personalDetails,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return createUserWithEmailAndPassword(auth,registerEmail,registerPassword);case 3:user=_context.sent;config={headers:{'content-type':'application/json'}};dateData=JSON.stringify(user.user.metadata.createdAt);dateData=parseInt(JSON.parse(dateData));personalDetails={name:JSON.parse(JSON.stringify(user.user.email)),Uid:JSON.parse(JSON.stringify(user.user.uid)),streaks:0,totalPts:0,mazeLvl:1,redeemedPts:0,type:1,lastLogin:dateData};axios.post('https://ades-ca1-project.herokuapp.com/api/newStudent',personalDetails,config).then(function(res){console.log(res);console.log(res.data);navigate('/studentDashboard');});_context.next=17;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);errorCode=_context.t0.code;errorMessage=_context.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function register(){return _ref.apply(this,arguments);};}();var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user,config,uid,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return signInWithEmailAndPassword(auth,loginEmail,loginPassword);case 3:user=_context2.sent;config={headers:{'content-type':'application/json'}};uid=JSON.parse(JSON.stringify(user.user.uid));axios.get(\"http://localhost:8081/api/userType/\"+uid,config).then(function(res){if(res.data.type==1){navigate('/studentDashboard');}else if(res.data.type==2){navigate('/teacherAdmin');}else{navigate('/');}});_context2.next=15;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);errorCode=_context2.t0.code;errorMessage=_context2.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function login(){return _ref2.apply(this,arguments);};}();var forgotPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var user,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return sendPasswordResetEmail(auth,email);case 3:user=_context3.sent;_context3.next=12;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);errorCode=_context3.t0.code;errorMessage=_context3.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function forgotPassword(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"signin\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign in\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"email\",type:\"email\",onChange:function onChange(event){setLoginEmail(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"password\",type:\"password\",onChange:function onChange(event){setLoginPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:login,children:\" Sign In\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Sign up\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"email\",type:\"email\",onChange:function onChange(event){setRegisterEmail(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"password\",type:\"password\",onChange:function onChange(event){setRegisterPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:register,children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"email\",type:\"email\",onChange:function onChange(event){setEmail(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:forgotPassword,children:\"Forgot Password\"})]});};export default SignIn;","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/SignIn.js"],"names":["createUserWithEmailAndPassword","sendPasswordResetEmail","signInWithEmailAndPassword","auth","useNavigate","React","useState","axios","SignIn","registerEmail","setRegisterEmail","registerPassword","setRegisterPassword","loginEmail","setLoginEmail","loginPassword","setLoginPassword","email","setEmail","navigate","register","user","config","headers","dateData","JSON","stringify","metadata","createdAt","parseInt","parse","personalDetails","name","Uid","uid","streaks","totalPts","mazeLvl","redeemedPts","type","lastLogin","post","then","res","console","log","data","errorCode","code","errorMessage","message","login","get","forgotPassword","event","target","value"],"mappings":"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","sourcesContent":["import '../SignIn.css';\nimport {\n    createUserWithEmailAndPassword,\n    sendPasswordResetEmail,\n    signInWithEmailAndPassword\n} from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nimport { useNavigate } from 'react-router-dom';\nimport React, { useState } from 'react';\nimport axios from 'axios';\n\n\nconst SignIn = () => {\n    const [registerEmail, setRegisterEmail] = useState(\"\");\n    const [registerPassword, setRegisterPassword] = useState(\"\");\n    const [loginEmail, setLoginEmail] = useState(\"\");\n    const [loginPassword, setLoginPassword] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    let navigate = useNavigate();\n\n    const register = async () => {\n        try {\n            const user = await createUserWithEmailAndPassword(\n                auth,\n                registerEmail,\n                registerPassword\n            );\n            const config = {\n                headers: {\n                    'content-type': 'application/json'\n                }\n            }\n\n            var dateData = JSON.stringify(user.user.metadata.createdAt);\n            dateData = parseInt(JSON.parse(dateData));\n            const personalDetails = {\n                name: JSON.parse(JSON.stringify(user.user.email)),\n                Uid: JSON.parse(JSON.stringify(user.user.uid)),\n                streaks: 0,\n                totalPts: 0,\n                mazeLvl: 1,\n                redeemedPts: 0,\n                type: 1,\n                lastLogin: dateData\n            };\n            axios.post('https://ades-ca1-project.herokuapp.com/api/newStudent', personalDetails, config)\n                .then(res => {\n                    console.log(res);\n                    console.log(res.data);\n                    navigate('/studentDashboard');\n                })\n        } catch (error) {\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        }\n    };\n\n    const login = async () => {\n        try {\n            const user = await signInWithEmailAndPassword(\n                auth,\n                loginEmail,\n                loginPassword\n            );\n            const config = {\n                headers: {\n                    'content-type': 'application/json'\n                }\n            }\n            var uid = JSON.parse(JSON.stringify(user.user.uid));\n            axios.get(`http://localhost:8081/api/userType/` + uid, config)\n                .then(res => {\n                    if (res.data.type == 1) {\n                        navigate('/studentDashboard');\n                    } else if (res.data.type == 2) {\n                        navigate('/teacherAdmin');\n                    } else {\n                        navigate('/');\n                    }\n                })\n        } catch (error) {\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        }\n    };\n\n    const forgotPassword = async () => {\n        try {\n            const user = await sendPasswordResetEmail(\n                auth,\n                email);\n        } catch(error) {\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        }\n    };\n\n    return (\n        <div className=\"signin\">\n            <h1>Sign in</h1>\n            <input placeholder=\"email\" type=\"email\" onChange={(event) => {\n                setLoginEmail(event.target.value);\n            }} />\n            <input placeholder=\"password\" type=\"password\" onChange={(event) => {\n                setLoginPassword(event.target.value);\n            }} />\n            <button onClick={login}> Sign In</button>\n\n            <h1>Sign up</h1>\n            <input placeholder=\"email\" type=\"email\" onChange={(event) => {\n                setRegisterEmail(event.target.value);\n            }} />\n            <input placeholder=\"password\" type=\"password\" onChange={(event) => {\n                setRegisterPassword(event.target.value);\n            }} />\n            <button onClick={register}>Sign Up</button>\n\n            <h1>Forgot Password</h1>\n            <input placeholder=\"email\" type=\"email\" onChange={(event) => {\n                setEmail(event.target.value);\n            }} />\n            <button onClick={forgotPassword}>Forgot Password</button>\n        </div>\n    )\n}\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}