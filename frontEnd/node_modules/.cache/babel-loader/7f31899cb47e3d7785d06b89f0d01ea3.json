{"ast":null,"code":"import _classCallCheck from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{store}from'react-notifications-component';import{Link}from'react-router-dom';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var viewReward=/*#__PURE__*/function(_React$Component){_inherits(viewReward,_React$Component);var _super=_createSuper(viewReward);function viewReward(){var _this;_classCallCheck(this,viewReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],currentPts:0,rewardName:'',rewardPoints:0,url:'',studentID:1};_this.handleRedeem=function(event){// Get the data\nvar rewardID=event.target.getAttribute(\"data-index\");var ptsRequired=event.target.getAttribute(\"data-points\");var rewardName=event.target.getAttribute(\"data-name\");console.log(\"rewardID = \"+rewardID);console.log(\"rewardName = \"+rewardName);console.log(\"points = \"+ptsRequired);// Store student's points\nvar currentPts=_this.state.currentPts;// IF student have enough points to redeem\nif(currentPts>=ptsRequired){// Do the calculation\n_this.setState({currentPts:currentPts-ptsRequired});// Insert reward history\nvar IDs={studentID:_this.state.studentID,rewardID:rewardID};var config={headers:{'content-type':'application/json'}};axios.post('https://ades-ca1-project.herokuapp.com/api/rewardHistory',IDs,config).then(function(res){console.log(res);console.log(res.data);});// Update student's current points\nvar points={points:currentPts};axios.put('https://ades-ca1-project.herokuapp.com/api/point/'+_this.state.studentID,points,config).then(function(res){console.log(res);console.log(res.data);_this.notiRedeemSuccess(rewardName);window.alert(\"Reward redeemed successfully\");});// ELSE student dont have enough points\n}else{_this.notifRedeemFail();window.alert(\"Insufficient points ! Work harder and earn more points !\");}};return _this;}_createClass(viewReward,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Get all rewards data\naxios.get('https://ades-ca1-project.herokuapp.com/api/rewards').then(function(res){_this2.setState({data:res.data});});// Get student's points data\naxios.get('https://ades-ca1-project.herokuapp.com/api/points/'+this.state.studentID).then(function(res){_this2.setState({currentPts:res.data[0].redeemedPts});});}},{key:\"notiRedeemSuccess\",value:function notiRedeemSuccess(rewardName){store.addNotification({title:\"Success\",message:\"Congratulations! You've successfully redeemed \"+rewardName+\" !\",type:\"success\",insert:\"top\",container:\"top-center\",animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:2000},dismissable:{click:true}});}},{key:\"notifRedeemFail\",value:function notifRedeemFail(){store.addNotification({title:\"Error\",message:\"You've insufficient points to redeem this reward. Work harder!\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animated\",\"bounceIn\"],animationOut:[\"animated\",\"bounceOut\"],dismiss:{duration:2000},dismissable:{click:true}});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rewards\"}),/*#__PURE__*/_jsx(\"div\",{className:\"viewRewards\",children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.rewardName}),/*#__PURE__*/_jsx(\"td\",{children:item.ptsRequired}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.url,style:{height:200,width:200}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:_this3.handleRedeem,\"data-index\":item.rewardID,\"data-name\":item.rewardName,\"data-points\":item.ptsRequired,children:\"Redeem\"})})]},item.rewardID);})})]});}}]);return viewReward;}(React.Component);export{viewReward as default};","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/ADES/frontEnd/src/components/StudentReward.js"],"names":["React","axios","store","Link","Button","viewReward","state","data","currentPts","rewardName","rewardPoints","url","studentID","handleRedeem","event","rewardID","target","getAttribute","ptsRequired","console","log","setState","IDs","config","headers","post","then","res","points","put","notiRedeemSuccess","window","alert","notifRedeemFail","get","redeemedPts","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","dismissable","click","map","item","height","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { store } from 'react-notifications-component';\r\nimport { Link } from 'react-router-dom' ;\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nexport default class viewReward extends React.Component {\r\n  state = {\r\n    data : [],\r\n    currentPts: 0,\r\n    rewardName: '',\r\n    rewardPoints: 0,\r\n    url: '',\r\n    studentID: 1,\r\n  }\r\n\r\n  componentDidMount(){\r\n    // Get all rewards data\r\n    axios.get('https://ades-ca1-project.herokuapp.com/api/rewards')\r\n    .then(res => {\r\n        this.setState({ data : res.data });\r\n    })\r\n    \r\n    // Get student's points data\r\n    axios.get('https://ades-ca1-project.herokuapp.com/api/points/' + this.state.studentID)\r\n    .then(res => {\r\n        this.setState({ currentPts : res.data[0].redeemedPts });\r\n    })\r\n}\r\n\r\n  notiRedeemSuccess(rewardName){\r\n    store.addNotification({\r\n      title:\"Success\",\r\n      message:\"Congratulations! You've successfully redeemed \" + rewardName + \" !\",\r\n      type:\"success\",\r\n      insert:\"top\",\r\n      container:\"top-center\",\r\n      animationIn:[\"animated\",\"fadeIn\"],\r\n      animationOut:[\"animated\",\"fadeOut\"],\r\n      dismiss: {duration:2000},\r\n      dismissable: {click:true}\r\n    });\r\n  }  \r\n\r\n  notifRedeemFail(){\r\n    store.addNotification({\r\n      title:\"Error\",\r\n      message:\"You've insufficient points to redeem this reward. Work harder!\",\r\n      type:\"danger\",\r\n      insert:\"top\",\r\n      container:\"top-center\",\r\n      animationIn:[\"animated\",\"bounceIn\"],\r\n      animationOut:[\"animated\",\"bounceOut\"],\r\n      dismiss: {duration:2000},\r\n      dismissable: {click:true}\r\n    });\r\n  }  \r\n\r\n  handleRedeem = event => {\r\n\r\n    // Get the data\r\n    const rewardID = event.target.getAttribute(\"data-index\");\r\n    const ptsRequired = event.target.getAttribute(\"data-points\");\r\n    const rewardName = event.target.getAttribute(\"data-name\");\r\n    console.log(\"rewardID = \" + rewardID);\r\n    console.log(\"rewardName = \" + rewardName);\r\n    console.log(\"points = \" + ptsRequired);\r\n\r\n    // Store student's points\r\n    const currentPts = this.state.currentPts;\r\n\r\n    // IF student have enough points to redeem\r\n    if(currentPts >= ptsRequired){\r\n\r\n      // Do the calculation\r\n      this.setState({currentPts : (currentPts - ptsRequired)});\r\n\r\n      // Insert reward history\r\n      const IDs = {\r\n        studentID : this.state.studentID,\r\n        rewardID : rewardID\r\n      }\r\n\r\n      const config = {\r\n        headers: {\r\n          'content-type':'application/json'\r\n        }\r\n      }\r\n\r\n      axios.post('https://ades-ca1-project.herokuapp.com/api/rewardHistory', IDs, config)\r\n      .then(res => {\r\n        console.log(res);\r\n        console.log(res.data);\r\n      })\r\n\r\n      // Update student's current points\r\n      const points = {\r\n        points : currentPts\r\n      }\r\n\r\n      axios.put('https://ades-ca1-project.herokuapp.com/api/point/' + this.state.studentID, points, config )\r\n      .then(res => {\r\n        console.log(res);\r\n        console.log(res.data);\r\n        this.notiRedeemSuccess(rewardName);\r\n        window.alert(\"Reward redeemed successfully\");\r\n      })\r\n\r\n    // ELSE student dont have enough points\r\n    }else{\r\n      this.notifRedeemFail();\r\n      window.alert(\"Insufficient points ! Work harder and earn more points !\");\r\n    }\r\n  \r\n  }\r\n\r\n  render() {\r\n      const data = this.state.data;\r\n    return (\r\n        <div>\r\n            <h1>Rewards</h1>\r\n            <div className=\"viewRewards\">\r\n            {data && data.map(item =>\r\n                        <tr key={item.rewardID}>\r\n                            <td>{item.rewardName}</td>\r\n                            <td>{item.ptsRequired}</td>\r\n                            <td><img src={item.url} style={{height: 200, width: 200}}></img></td>\r\n                            <td><Button onClick={this.handleRedeem} data-index={item.rewardID} data-name={item.rewardName} data-points={item.ptsRequired}>Redeem</Button></td>\r\n                        </tr>\r\n                    )}\r\n            </div>\r\n      </div>\r\n      \r\n    )\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}