{"ast":null,"code":"import _classCallCheck from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{getStorage,ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import'../css/rewardEdit.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditReward=/*#__PURE__*/function(_React$Component){_inherits(EditReward,_React$Component);var _super=_createSuper(EditReward);function EditReward(){var _this;_classCallCheck(this,EditReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],rewardName:'',rewardPoints:'',url:'',rewardID:33};_this.handleName=function(event){_this.setState({rewardName:event.target.value});};_this.handlePoints=function(event){_this.setState({rewardPoints:event.target.value});};_this.handleURL=function(event){_this.setState({url:event.target.files[0]});};_this.handleSubmit=function(event){event.preventDefault();// file upload\n// packing data    \nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.url.name);var file=_this.state.url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var reward={rewardName:_this.state.rewardName,ptsRequired:_this.state.rewardPoints,url:downloadURL};console.log(\"reward\"+JSON.stringify(reward));var config={headers:{'content-type':'application/json'}};//const rewardID = window.location.href.split('/')[3].slice(19);\n//axios.pit('https://ades-ca1-heroku.herokuapp.com/api/rewards' + this.state.rewardID, reward, config )\naxios.put('https://ades-ca1-heroku.herokuapp.com/api/rewards'+_this.state.rewardID,reward,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();window.alert(\"Edit successfully !\");});});};return _this;}_createClass(EditReward,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"rewardEdit\",id:\"bodyEdit\",children:/*#__PURE__*/_jsx(\"div\",{id:\"divEdit\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"editReward\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Reward\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,id:\"formEdit\",children:[/*#__PURE__*/_jsxs(\"label\",{class:\"label\",children:[\"Reward Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rewardName\",onChange:this.handleName})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{class:\"label\",children:[\"Points Required:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"ptsRequired\",onChange:this.handlePoints})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{class:\"label\",children:[\"Picture URL:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"url\",onChange:this.handleURL})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Edit\"})]})]})})});}}]);return EditReward;}(React.Component);export{EditReward as default};","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/RewardAdminEdit.js"],"names":["React","axios","getStorage","ref","uploadBytes","getDownloadURL","EditReward","state","data","rewardName","rewardPoints","url","rewardID","handleName","event","setState","target","value","handlePoints","handleURL","files","handleSubmit","preventDefault","storage","storageRef","name","file","metadata","contentType","type","then","downloadURL","console","log","reward","ptsRequired","JSON","stringify","config","headers","put","res","window","location","reload","alert","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport '../css/rewardEdit.css';\n\nexport default class EditReward extends React.Component {\n\n    state = {\n        data : [],\n        rewardName: '',\n        rewardPoints: '',\n        url: '',\n        rewardID: 33\n      }\n\n      handleName = event => {\n        this.setState({ rewardName : event.target.value });\n      }\n    \n      handlePoints = event => {\n        this.setState({ rewardPoints : event.target.value });\n      }\n    \n      handleURL = event => {\n        this.setState({ url : event.target.files[0], });\n      }\n\n\n\n  handleSubmit = event => {\n    event.preventDefault();\n    // file upload\n    // packing data    \n    const storage = getStorage();\n    const storageRef = ref(storage, 'img/' + this.state.url.name);\n    var file = this.state.url;\n    // Create file metadata including the content type\n    /** @type {any} */\n    const metadata = {\n        contentType: this.state.url.type,\n    };\n    uploadBytes(storageRef, file, metadata);\n\n    getDownloadURL(storageRef).then((downloadURL) => {\n        console.log('File available at', downloadURL);\n\n        const reward = {\n            rewardName : this.state.rewardName,\n            ptsRequired : this.state.rewardPoints,\n            url : downloadURL\n        };\n        console.log(\"reward\" + JSON.stringify(reward))\n        \n        const config = {\n        headers: {\n          'content-type': 'application/json'\n        }\n        }\n\n        //const rewardID = window.location.href.split('/')[3].slice(19);\n        \n        //axios.pit('https://ades-ca1-heroku.herokuapp.com/api/rewards' + this.state.rewardID, reward, config )\n        axios.put('https://ades-ca1-heroku.herokuapp.com/api/rewards'+ this.state.rewardID, reward, config )\n        .then(res => {\n          console.log(res);\n          console.log(res.data);\n          window.location.reload();\n          window.alert(\"Edit successfully !\");\n        })\n    })\n  }\n\n    render() {\n        return (\n            <div className=\"rewardEdit\" id=\"bodyEdit\">\n                <div id=\"divEdit\">\n                    <div className=\"editReward\">\n                        <h1>Edit Reward</h1>\n                        <form onSubmit={this.handleSubmit} id=\"formEdit\">\n                            <label class='label'>\n                                Reward Name:\n                                <input type=\"text\" name=\"rewardName\" onChange={this.handleName} />\n                            </label>\n                            <br />\n                            <label class='label'>\n                                Points Required:\n                                <input type=\"number\" name=\"ptsRequired\" onChange={this.handlePoints} />\n                            </label>\n                            <br />\n                            <label class='label'>\n                                Picture URL:\n                                <input type=\"file\" name=\"url\" onChange={this.handleURL} />\n                            </label>\n                            <br />\n                            <button type=\"submit\">Edit</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}