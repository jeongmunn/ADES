{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\ADES\\\\frontEnd\\\\src\\\\components\\\\RewardAdminEdit.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport '../css/rewardEdit.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class EditReward extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: [],\n      rewardName: '',\n      rewardPoints: '',\n      url: '',\n      rewardID: 33\n    };\n\n    this.handleName = event => {\n      this.setState({\n        rewardName: event.target.value\n      });\n    };\n\n    this.handlePoints = event => {\n      this.setState({\n        rewardPoints: event.target.value\n      });\n    };\n\n    this.handleURL = event => {\n      this.setState({\n        url: event.target.files[0]\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault(); // file upload\n      // packing data    \n\n      const storage = getStorage();\n      const storageRef = ref(storage, 'img/' + this.state.url.name);\n      var file = this.state.url; // Create file metadata including the content type\n\n      /** @type {any} */\n\n      const metadata = {\n        contentType: this.state.url.type\n      };\n      uploadBytes(storageRef, file, metadata);\n      getDownloadURL(storageRef).then(downloadURL => {\n        console.log('File available at', downloadURL);\n        const reward = {\n          rewardName: this.state.rewardName,\n          ptsRequired: this.state.rewardPoints,\n          url: downloadURL\n        };\n        console.log(\"reward\" + JSON.stringify(reward));\n        const config = {\n          headers: {\n            'content-type': 'application/json'\n          }\n        }; //const rewardID = window.location.href.split('/')[3].slice(19);\n        //axios.pit('https://ades-ca1-heroku.herokuapp.com/api/rewards' + this.state.rewardID, reward, config )\n\n        axios.put('https://ades-ca1-project.herokuapp.com/api/rewards' + this.state.rewardID, reward, config).then(res => {\n          console.log(res);\n          console.log(res.data);\n          window.location.reload();\n          window.alert(\"Edit successfully !\");\n        });\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rewardEdit\",\n      id: \"bodyEdit\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"divEdit\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editReward\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Edit Reward\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            id: \"formEdit\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              class: \"label\",\n              children: [\"Reward Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"rewardName\",\n                onChange: this.handleName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              class: \"label\",\n              children: [\"Points Required:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"ptsRequired\",\n                onChange: this.handlePoints\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              class: \"label\",\n              children: [\"Picture URL:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                name: \"url\",\n                onChange: this.handleURL\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/ADES/frontEnd/src/components/RewardAdminEdit.js"],"names":["React","axios","getStorage","ref","uploadBytes","getDownloadURL","EditReward","Component","state","data","rewardName","rewardPoints","url","rewardID","handleName","event","setState","target","value","handlePoints","handleURL","files","handleSubmit","preventDefault","storage","storageRef","name","file","metadata","contentType","type","then","downloadURL","console","log","reward","ptsRequired","JSON","stringify","config","headers","put","res","window","location","reload","alert","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,GAArB,EAA0BC,WAA1B,EAAuCC,cAAvC,QAA6D,kBAA7D;AACA,OAAO,uBAAP;;AAEA,eAAe,MAAMC,UAAN,SAAyBN,KAAK,CAACO,SAA/B,CAAyC;AAAA;AAAA;AAAA,SAEpDC,KAFoD,GAE5C;AACJC,MAAAA,IAAI,EAAG,EADH;AAEJC,MAAAA,UAAU,EAAE,EAFR;AAGJC,MAAAA,YAAY,EAAE,EAHV;AAIJC,MAAAA,GAAG,EAAE,EAJD;AAKJC,MAAAA,QAAQ,EAAE;AALN,KAF4C;;AAAA,SAUlDC,UAVkD,GAUrCC,KAAK,IAAI;AACpB,WAAKC,QAAL,CAAc;AAAEN,QAAAA,UAAU,EAAGK,KAAK,CAACE,MAAN,CAAaC;AAA5B,OAAd;AACD,KAZiD;;AAAA,SAclDC,YAdkD,GAcnCJ,KAAK,IAAI;AACtB,WAAKC,QAAL,CAAc;AAAEL,QAAAA,YAAY,EAAGI,KAAK,CAACE,MAAN,CAAaC;AAA9B,OAAd;AACD,KAhBiD;;AAAA,SAkBlDE,SAlBkD,GAkBtCL,KAAK,IAAI;AACnB,WAAKC,QAAL,CAAc;AAAEJ,QAAAA,GAAG,EAAGG,KAAK,CAACE,MAAN,CAAaI,KAAb,CAAmB,CAAnB;AAAR,OAAd;AACD,KApBiD;;AAAA,SAwBtDC,YAxBsD,GAwBvCP,KAAK,IAAI;AACtBA,MAAAA,KAAK,CAACQ,cAAN,GADsB,CAEtB;AACA;;AACA,YAAMC,OAAO,GAAGtB,UAAU,EAA1B;AACA,YAAMuB,UAAU,GAAGtB,GAAG,CAACqB,OAAD,EAAU,SAAS,KAAKhB,KAAL,CAAWI,GAAX,CAAec,IAAlC,CAAtB;AACA,UAAIC,IAAI,GAAG,KAAKnB,KAAL,CAAWI,GAAtB,CANsB,CAOtB;;AACA;;AACA,YAAMgB,QAAQ,GAAG;AACbC,QAAAA,WAAW,EAAE,KAAKrB,KAAL,CAAWI,GAAX,CAAekB;AADf,OAAjB;AAGA1B,MAAAA,WAAW,CAACqB,UAAD,EAAaE,IAAb,EAAmBC,QAAnB,CAAX;AAEAvB,MAAAA,cAAc,CAACoB,UAAD,CAAd,CAA2BM,IAA3B,CAAiCC,WAAD,IAAiB;AAC7CC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,WAAjC;AAEA,cAAMG,MAAM,GAAG;AACXzB,UAAAA,UAAU,EAAG,KAAKF,KAAL,CAAWE,UADb;AAEX0B,UAAAA,WAAW,EAAG,KAAK5B,KAAL,CAAWG,YAFd;AAGXC,UAAAA,GAAG,EAAGoB;AAHK,SAAf;AAKAC,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAWG,IAAI,CAACC,SAAL,CAAeH,MAAf,CAAvB;AAEA,cAAMI,MAAM,GAAG;AACfC,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT;AADM,SAAf,CAV6C,CAgB7C;AAEA;;AACAvC,QAAAA,KAAK,CAACwC,GAAN,CAAU,uDAAsD,KAAKjC,KAAL,CAAWK,QAA3E,EAAqFsB,MAArF,EAA6FI,MAA7F,EACCR,IADD,CACMW,GAAG,IAAI;AACXT,UAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACAT,UAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAG,CAACjC,IAAhB;AACAkC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACAF,UAAAA,MAAM,CAACG,KAAP,CAAa,qBAAb;AACD,SAND;AAOH,OA1BD;AA2BD,KAjEqD;AAAA;;AAmEpDC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,EAAE,EAAC,UAA/B;AAAA,6BACI;AAAK,QAAA,EAAE,EAAC,SAAR;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAM,YAAA,QAAQ,EAAE,KAAKzB,YAArB;AAAmC,YAAA,EAAE,EAAC,UAAtC;AAAA,oCACI;AAAO,cAAA,KAAK,EAAC,OAAb;AAAA,sDAEI;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,IAAI,EAAC,YAAxB;AAAqC,gBAAA,QAAQ,EAAE,KAAKR;AAApD;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAKI;AAAA;AAAA;AAAA;AAAA,oBALJ,eAMI;AAAO,cAAA,KAAK,EAAC,OAAb;AAAA,0DAEI;AAAO,gBAAA,IAAI,EAAC,QAAZ;AAAqB,gBAAA,IAAI,EAAC,aAA1B;AAAwC,gBAAA,QAAQ,EAAE,KAAKK;AAAvD;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBANJ,eAUI;AAAA;AAAA;AAAA;AAAA,oBAVJ,eAWI;AAAO,cAAA,KAAK,EAAC,OAAb;AAAA,sDAEI;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,IAAI,EAAC,KAAxB;AAA8B,gBAAA,QAAQ,EAAE,KAAKC;AAA7C;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXJ,eAeI;AAAA;AAAA;AAAA;AAAA,oBAfJ,eAgBI;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AA2BH;;AA/FmD","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport '../css/rewardEdit.css';\r\n\r\nexport default class EditReward extends React.Component {\r\n\r\n    state = {\r\n        data : [],\r\n        rewardName: '',\r\n        rewardPoints: '',\r\n        url: '',\r\n        rewardID: 33\r\n      }\r\n\r\n      handleName = event => {\r\n        this.setState({ rewardName : event.target.value });\r\n      }\r\n    \r\n      handlePoints = event => {\r\n        this.setState({ rewardPoints : event.target.value });\r\n      }\r\n    \r\n      handleURL = event => {\r\n        this.setState({ url : event.target.files[0], });\r\n      }\r\n\r\n\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    // file upload\r\n    // packing data    \r\n    const storage = getStorage();\r\n    const storageRef = ref(storage, 'img/' + this.state.url.name);\r\n    var file = this.state.url;\r\n    // Create file metadata including the content type\r\n    /** @type {any} */\r\n    const metadata = {\r\n        contentType: this.state.url.type,\r\n    };\r\n    uploadBytes(storageRef, file, metadata);\r\n\r\n    getDownloadURL(storageRef).then((downloadURL) => {\r\n        console.log('File available at', downloadURL);\r\n\r\n        const reward = {\r\n            rewardName : this.state.rewardName,\r\n            ptsRequired : this.state.rewardPoints,\r\n            url : downloadURL\r\n        };\r\n        console.log(\"reward\" + JSON.stringify(reward))\r\n        \r\n        const config = {\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n        }\r\n\r\n        //const rewardID = window.location.href.split('/')[3].slice(19);\r\n        \r\n        //axios.pit('https://ades-ca1-heroku.herokuapp.com/api/rewards' + this.state.rewardID, reward, config )\r\n        axios.put('https://ades-ca1-project.herokuapp.com/api/rewards'+ this.state.rewardID, reward, config )\r\n        .then(res => {\r\n          console.log(res);\r\n          console.log(res.data);\r\n          window.location.reload();\r\n          window.alert(\"Edit successfully !\");\r\n        })\r\n    })\r\n  }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"rewardEdit\" id=\"bodyEdit\">\r\n                <div id=\"divEdit\">\r\n                    <div className=\"editReward\">\r\n                        <h1>Edit Reward</h1>\r\n                        <form onSubmit={this.handleSubmit} id=\"formEdit\">\r\n                            <label class='label'>\r\n                                Reward Name:\r\n                                <input type=\"text\" name=\"rewardName\" onChange={this.handleName} />\r\n                            </label>\r\n                            <br />\r\n                            <label class='label'>\r\n                                Points Required:\r\n                                <input type=\"number\" name=\"ptsRequired\" onChange={this.handlePoints} />\r\n                            </label>\r\n                            <br />\r\n                            <label class='label'>\r\n                                Picture URL:\r\n                                <input type=\"file\" name=\"url\" onChange={this.handleURL} />\r\n                            </label>\r\n                            <br />\r\n                            <button type=\"submit\">Edit</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}