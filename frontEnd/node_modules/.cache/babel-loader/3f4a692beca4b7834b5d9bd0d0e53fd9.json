{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"children\",\"value\",\"index\"];import'../styling2.css';import{createUserWithEmailAndPassword,sendPasswordResetEmail,signInWithEmailAndPassword}from\"firebase/auth\";import{auth}from'../firebase.js';import{useNavigate}from'react-router-dom';import React,{useState,useRef}from'react';// import TabPanel from '@mui/lab/TabPanel';\nimport Button from'@mui/material/Button';import Typography from'@mui/material/Typography';import Tabs from'@mui/material/Tabs';import Tab from'@mui/material/Tab';import Box from'@mui/material/Box';import TextField from'@mui/material/TextField';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){var children=props.children,value=props.value,index=props.index,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"simple-tabpanel-\".concat(index),\"aria-labelledby\":\"simple-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:/*#__PURE__*/_jsx(Typography,{children:children})})}));}function a11yProps(index){return{id:\"simple-tab-\".concat(index),'aria-controls':\"simple-tabpanel-\".concat(index)};}var SignIn=function SignIn(){var loginEmailInput=useRef(\"\");var loginPasswordInput=useRef(\"\");var registerEmailInput=useRef(\"\");var registerPasswordInput=useRef(\"\");var emailInput=useRef(\"\");// const [registerEmail, setRegisterEmail] = useState(\"\");\n// const [registerPassword, setRegisterPassword] = useState(\"\");\n// const [loginEmail, setLoginEmail] = useState(\"\");\n// const [loginPassword, setLoginPassword] = useState(\"\");\n// const [email, setEmail] = useState(\"\");\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var handleChange=function handleChange(event,newValue){setValue(newValue);};var navigate=useNavigate();var register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,config,dateData,personalDetails,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return createUserWithEmailAndPassword(auth,registerEmailInput.current.value,registerPasswordInput.current.value);case 3:user=_context.sent;config={headers:{'content-type':'application/json'}};dateData=JSON.stringify(user.user.metadata.createdAt);dateData=parseInt(JSON.parse(dateData));personalDetails={name:JSON.parse(JSON.stringify(user.user.email)),Uid:JSON.parse(JSON.stringify(user.user.uid)),streaks:0,totalPts:0,mazeLvl:1,redeemedPts:0,type:1,lastLogin:dateData};axios.post('https://ades-ca1-project.herokuapp.com/api/newStudent',personalDetails,config).then(function(res){console.log(res);console.log(res.data);navigate('/studentDashboard');});_context.next=17;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);errorCode=_context.t0.code;errorMessage=_context.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function register(){return _ref.apply(this,arguments);};}();var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var user,config,uid,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return signInWithEmailAndPassword(auth,loginEmailInput.current.value,loginPasswordInput.current.value);case 3:user=_context2.sent;config={headers:{'content-type':'application/json'}};uid=JSON.parse(JSON.stringify(user.user.uid));axios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+uid,config).then(function(res){if(res.data.type===1){navigate('/studentDashboard');}else if(res.data.type===2){navigate('/teacherDashboard');}else{navigate('/');}});_context2.next=15;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);errorCode=_context2.t0.code;errorMessage=_context2.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function login(){return _ref2.apply(this,arguments);};}();var forgotPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var user,errorCode,errorMessage;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return sendPasswordResetEmail(auth,emailInput.current.value);case 3:user=_context3.sent;_context3.next=12;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);errorCode=_context3.t0.code;errorMessage=_context3.t0.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function forgotPassword(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"signin\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Authentication\"}),/*#__PURE__*/_jsx(Box,{sx:{width:'100%'},children:/*#__PURE__*/_jsxs(Box,{sx:{borderColor:'divider'},children:[/*#__PURE__*/_jsxs(Tabs,{value:value,onChange:handleChange,textColor:\"secondary\",indicatorColor:\"secondary\",\"aria-label\":\"secondary tabs example\",centered:true,children:[/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Sign In\"},a11yProps(0))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Sign Up\"},a11yProps(1))),/*#__PURE__*/_jsx(Tab,_objectSpread({label:\"Forgot Password\"},a11yProps(2)))]}),/*#__PURE__*/_jsxs(TabPanel,{value:value,index:0,children:[/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:loginEmailInput,id:\"outlined-required\",label:\"Email\",margin:\"dense\",type:\"email\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:loginPasswordInput,id:\"outlined-password-input\",label:\"Password\",margin:\"dense\",type:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'10px',width:'100%'},variant:\"contained\",onClick:login,children:\" Sign In\"})]}),/*#__PURE__*/_jsxs(TabPanel,{value:value,index:1,children:[/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:registerEmailInput,id:\"outlined-required\",label:\"Email\",margin:\"dense\",type:\"email\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:registerPasswordInput,id:\"outlined-password-input\",label:\"Password\",margin:\"dense\",type:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'10px',width:'100%'},variant:\"contained\",onClick:register,children:\" Sign Up\"})]}),/*#__PURE__*/_jsxs(TabPanel,{value:value,index:2,children:[/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:emailInput,id:\"outlined-required\",label:\"Email\",margin:\"dense\",type:\"email\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',marginTop:'10px',width:'100%'},variant:\"contained\",onClick:forgotPassword,children:\" Forgot Password\"})]})]})})]});};export default SignIn;","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/ADES/frontEnd/src/components/SignIn.js"],"names":["createUserWithEmailAndPassword","sendPasswordResetEmail","signInWithEmailAndPassword","auth","useNavigate","React","useState","useRef","Button","Typography","Tabs","Tab","Box","TextField","axios","TabPanel","props","children","value","index","other","p","a11yProps","id","SignIn","loginEmailInput","loginPasswordInput","registerEmailInput","registerPasswordInput","emailInput","setValue","handleChange","event","newValue","navigate","register","current","user","config","headers","dateData","JSON","stringify","metadata","createdAt","parseInt","parse","personalDetails","name","email","Uid","uid","streaks","totalPts","mazeLvl","redeemedPts","type","lastLogin","post","then","res","console","log","data","errorCode","code","errorMessage","message","login","get","forgotPassword","width","borderColor","background","color","paddingTop","paddingBottom","marginTop"],"mappings":"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","sourcesContent":["import '../styling2.css';\r\nimport {\r\n    createUserWithEmailAndPassword,\r\n    sendPasswordResetEmail,\r\n    signInWithEmailAndPassword\r\n} from \"firebase/auth\";\r\nimport { auth } from '../firebase.js';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useState, useRef } from 'react';\r\n// import TabPanel from '@mui/lab/TabPanel';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport axios from 'axios';\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box sx={{ p: 3 }}>\r\n                    <Typography>{children}</Typography>\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.number.isRequired,\r\n    value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `simple-tab-${index}`,\r\n        'aria-controls': `simple-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\n\r\n\r\nconst SignIn = () => {\r\n    const loginEmailInput = useRef(\"\");\r\n    const loginPasswordInput = useRef(\"\");\r\n    const registerEmailInput = useRef(\"\");\r\n    const registerPasswordInput = useRef(\"\");\r\n    const emailInput = useRef(\"\");\r\n    // const [registerEmail, setRegisterEmail] = useState(\"\");\r\n    // const [registerPassword, setRegisterPassword] = useState(\"\");\r\n    // const [loginEmail, setLoginEmail] = useState(\"\");\r\n    // const [loginPassword, setLoginPassword] = useState(\"\");\r\n    // const [email, setEmail] = useState(\"\");\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n    let navigate = useNavigate();\r\n\r\n    const register = async () => {\r\n        try {\r\n            const user = await createUserWithEmailAndPassword(\r\n                auth,\r\n                registerEmailInput.current.value,\r\n                registerPasswordInput.current.value\r\n            );\r\n            const config = {\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n            }\r\n\r\n            var dateData = JSON.stringify(user.user.metadata.createdAt);\r\n            dateData = parseInt(JSON.parse(dateData));\r\n            const personalDetails = {\r\n                name: JSON.parse(JSON.stringify(user.user.email)),\r\n                Uid: JSON.parse(JSON.stringify(user.user.uid)),\r\n                streaks: 0,\r\n                totalPts: 0,\r\n                mazeLvl: 1,\r\n                redeemedPts: 0,\r\n                type: 1,\r\n                lastLogin: dateData\r\n            };\r\n            axios.post('https://ades-ca1-project.herokuapp.com/api/newStudent', personalDetails, config)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    console.log(res.data);\r\n                    navigate('/studentDashboard');\r\n                })\r\n        } catch (error) {\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            console.log(JSON.stringify(errorCode));\r\n            console.log(JSON.stringify(errorMessage));\r\n        }\r\n    };\r\n\r\n    const login = async () => {\r\n        try {\r\n            const user = await signInWithEmailAndPassword(\r\n                auth,\r\n                loginEmailInput.current.value,\r\n                loginPasswordInput.current.value\r\n            );\r\n            const config = {\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n            }\r\n            var uid = JSON.parse(JSON.stringify(user.user.uid));\r\n            axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + uid, config)\r\n                .then(res => {\r\n                    if (res.data.type === 1) {\r\n                        navigate('/studentDashboard');\r\n                    } else if (res.data.type === 2) {\r\n                        navigate('/teacherDashboard');\r\n                    } else {\r\n                        navigate('/');\r\n                    }\r\n                })\r\n        } catch (error) {\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            console.log(JSON.stringify(errorCode));\r\n            console.log(JSON.stringify(errorMessage));\r\n        }\r\n    };\r\n\r\n    const forgotPassword = async () => {\r\n        try {\r\n            const user = await sendPasswordResetEmail(\r\n                auth,\r\n                emailInput.current.value);\r\n        } catch (error) {\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            console.log(JSON.stringify(errorCode));\r\n            console.log(JSON.stringify(errorMessage));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"signin\">\r\n            <h1>Authentication</h1>\r\n            <Box sx={{ width: '100%' }}>\r\n                <Box sx={{ borderColor: 'divider' }}>\r\n                    <Tabs\r\n                        value={value}\r\n                        onChange={handleChange}\r\n                        textColor=\"secondary\"\r\n                        indicatorColor=\"secondary\"\r\n                        aria-label=\"secondary tabs example\"\r\n                        centered\r\n                    >\r\n                        <Tab label=\"Sign In\" {...a11yProps(0)} />\r\n                        <Tab label=\"Sign Up\" {...a11yProps(1)} />\r\n                        <Tab label=\"Forgot Password\" {...a11yProps(2)} />\r\n                    </Tabs>\r\n                    <TabPanel value={value} index={0}>\r\n                        {/* <input placeholder=\"email\" type=\"email\" onChange={(event) => {\r\n                            setLoginEmail(event.target.value);\r\n                        }} /> */}\r\n                        {/* <input placeholder=\"password\" type=\"password\" onChange={(event) => {\r\n                            setLoginPassword(event.target.value);\r\n                        }} /> */}\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            inputRef={loginEmailInput}\r\n                            id=\"outlined-required\"\r\n                            label=\"Email\"\r\n                            margin=\"dense\"\r\n                            type=\"email\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            inputRef={loginPasswordInput}\r\n                            id=\"outlined-password-input\"\r\n                            label=\"Password\"\r\n                            margin=\"dense\"\r\n                            type=\"password\"\r\n                            autoComplete=\"current-password\"\r\n                        />\r\n                        <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '10px', width: '100%' }} variant=\"contained\" onClick={login}> Sign In</Button>\r\n                    </TabPanel>\r\n                    <TabPanel value={value} index={1}>\r\n                        {/* <input placeholder=\"email\" type=\"email\" onChange={(event) => {\r\n                            setRegisterEmail(event.target.value);\r\n                        }} />\r\n                        <input placeholder=\"password\" type=\"password\" onChange={(event) => {\r\n                            setRegisterPassword(event.target.value);\r\n                        }} /> */}\r\n                    <TextField\r\n                            required\r\n                            fullWidth\r\n                            inputRef={registerEmailInput}\r\n                            id=\"outlined-required\"\r\n                            label=\"Email\"\r\n                            margin=\"dense\"\r\n                            type=\"email\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            inputRef={registerPasswordInput}\r\n                            id=\"outlined-password-input\"\r\n                            label=\"Password\"\r\n                            margin=\"dense\"\r\n                            type=\"password\"\r\n                            autoComplete=\"current-password\"\r\n                        />\r\n                        <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '10px', width: '100%' }} variant=\"contained\" onClick={register}> Sign Up</Button>\r\n                    </TabPanel>\r\n                    <TabPanel value={value} index={2}>\r\n                        {/* <input placeholder=\"email\" type=\"email\" onChange={(event) => {\r\n                            setEmail(event.target.value);\r\n                        }} /> */}\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            inputRef={emailInput}\r\n                            id=\"outlined-required\"\r\n                            label=\"Email\"\r\n                            margin=\"dense\"\r\n                            type=\"email\"\r\n                        />\r\n                        <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', marginTop: '10px', width: '100%' }} variant=\"contained\" onClick={forgotPassword}> Forgot Password</Button>\r\n                    </TabPanel>\r\n                </Box>\r\n            </Box>\r\n        </div>\r\n    )\r\n}\r\nexport default SignIn;\r\n"]},"metadata":{},"sourceType":"module"}