{"ast":null,"code":"import _classCallCheck from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import Card from'react-bootstrap/Card';import{signOut}from\"firebase/auth\";import{auth}from'../firebase.js';import'../css/pointsHistory.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ptsHistory=/*#__PURE__*/function(_React$Component){_inherits(ptsHistory,_React$Component);var _super=_createSuper(ptsHistory);function ptsHistory(){var _this;_classCallCheck(this,ptsHistory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],uid:'',id:0};return _this;}_createClass(ptsHistory,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Auth\nauth.onAuthStateChanged(function(user){// IF there's user\nif(user){console.log(\"User is Signed IN \");_this2.setState({uid:user.uid});var config={headers:{'content-type':'application/json'}};// Get the user type\naxios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+_this2.state.uid,config).then(function(res){// IF is student\nif(res.data.type===1){_this2.setState({id:res.data.studentID});// GET student's points history\naxios.get('https://ades-ca1-project.herokuapp.com/api/ptsHistory/'+_this2.state.id).then(function(res){_this2.setState({data:res.data});});// IF is teacher\n}else if(res.data.type===2){window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/teacherDashboard');// ELSE kick them out\n}else{window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});// ELSE kick them out\n}else{console.log(\"THERE IS NO USER\");signOut(auth);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});}},{key:\"render\",value:function render(){var data=this.state.data;return/*#__PURE__*/_jsxs(\"div\",{className:\"PointsHistory\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Points History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"history\",children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(Card,{className:\"card\",border:\"primary\",body:true,children:[\"You've earned \",item.pointsAwarded,\" points from event \",item.eventName]});})})]});}}]);return ptsHistory;}(React.Component);export{ptsHistory as default};","map":{"version":3,"sources":["C:/Users/jw/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/StudentPointsHistory.js"],"names":["React","axios","Card","signOut","auth","ptsHistory","state","data","uid","id","onAuthStateChanged","user","console","log","setState","config","headers","get","then","res","type","studentID","window","location","replace","map","item","pointsAwarded","eventName","Component"],"mappings":"gmBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,IAAT,KAAqB,gBAArB,CACA,MAAO,0BAAP,C,2FAEqBC,CAAAA,U,uVACjBC,K,CAAQ,CACJC,IAAI,CAAE,EADF,CAEJC,GAAG,CAAE,EAFD,CAGJC,EAAE,CAAE,CAHA,C,uEAMR,4BAAoB,iBAChB;AACAL,IAAI,CAACM,kBAAL,CAAwB,SAACC,IAAD,CAAU,CAC9B;AACA,GAAIA,IAAJ,CAAU,CACNC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACA,MAAI,CAACC,QAAL,CAAc,CAAEN,GAAG,CAAEG,IAAI,CAACH,GAAZ,CAAd,EACA,GAAMO,CAAAA,MAAM,CAAG,CACXC,OAAO,CAAE,CACL,eAAgB,kBADX,CADE,CAAf,CAMA;AACAf,KAAK,CAACgB,GAAN,CAAU,uDAAyD,MAAI,CAACX,KAAL,CAAWE,GAA9E,CAAmFO,MAAnF,EACKG,IADL,CACU,SAAAC,GAAG,CAAI,CACT;AACA,GAAIA,GAAG,CAACZ,IAAJ,CAASa,IAAT,GAAkB,CAAtB,CAAyB,CACrB,MAAI,CAACN,QAAL,CAAc,CAAEL,EAAE,CAAEU,GAAG,CAACZ,IAAJ,CAASc,SAAf,CAAd,EACA;AACApB,KAAK,CAACgB,GAAN,CAAU,yDAA2D,MAAI,CAACX,KAAL,CAAWG,EAAhF,EACKS,IADL,CACU,SAAAC,GAAG,CAAI,CACT,MAAI,CAACL,QAAL,CAAc,CAAEP,IAAI,CAAEY,GAAG,CAACZ,IAAZ,CAAd,EACH,CAHL,EAIA;AACH,CARD,IAQO,IAAIY,GAAG,CAACZ,IAAJ,CAASa,IAAT,GAAkB,CAAtB,CAAyB,CAC5BE,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,kEAAxB,EACA;AACH,CAHM,IAGA,CACHF,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,iDAAxB,EACH,CACJ,CAjBL,EAkBA;AACH,CA7BD,IA6BO,CACHZ,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACAV,OAAO,CAACC,IAAD,CAAP,CACAkB,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,iDAAxB,EACH,CACJ,CApCD,EAqCH,C,sBAED,iBAAS,CAEL,GAAMjB,CAAAA,IAAI,CAAG,KAAKD,KAAL,CAAWC,IAAxB,CAEA,mBACI,aAAK,SAAS,CAAC,eAAf,wBACI,sCADJ,cAEI,YAAK,SAAS,CAAC,SAAf,UACKA,IAAI,EAAIA,IAAI,CAACkB,GAAL,CAAS,SAAAC,IAAI,qBAClB,MAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,MAAM,CAAC,SAA9B,CAAwC,IAAI,KAA5C,4BAA4DA,IAAI,CAACC,aAAjE,uBAAmGD,IAAI,CAACE,SAAxG,GADkB,EAAb,CADb,EAFJ,GADJ,CAUH,C,wBA9DmC5B,KAAK,CAAC6B,S,SAAzBxB,U","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { signOut } from \"firebase/auth\";\r\nimport { auth } from '../firebase.js';\r\nimport '../css/pointsHistory.css';\r\n\r\nexport default class ptsHistory extends React.Component {\r\n    state = {\r\n        data: [],\r\n        uid: '',\r\n        id: 0\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Auth\r\n        auth.onAuthStateChanged((user) => {\r\n            // IF there's user\r\n            if (user) {\r\n                console.log(\"User is Signed IN \");\r\n                this.setState({ uid: user.uid });\r\n                const config = {\r\n                    headers: {\r\n                        'content-type': 'application/json'\r\n                    }\r\n                }\r\n\r\n                // Get the user type\r\n                axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + this.state.uid, config)\r\n                    .then(res => {\r\n                        // IF is student\r\n                        if (res.data.type === 1) {\r\n                            this.setState({ id: res.data.studentID })\r\n                            // GET student's points history\r\n                            axios.get('https://ades-ca1-project.herokuapp.com/api/ptsHistory/' + this.state.id)\r\n                                .then(res => {\r\n                                    this.setState({ data: res.data });\r\n                                })\r\n                            // IF is teacher\r\n                        } else if (res.data.type === 2) {\r\n                            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/teacherDashboard');\r\n                            // ELSE kick them out\r\n                        } else {\r\n                            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n                        }\r\n                    })\r\n                // ELSE kick them out\r\n            } else {\r\n                console.log(\"THERE IS NO USER\");\r\n                signOut(auth);\r\n                window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        const data = this.state.data;\r\n\r\n        return (\r\n            <div className=\"PointsHistory\">\r\n                <h1>Points History</h1>\r\n                <div className=\"history\">\r\n                    {data && data.map(item =>\r\n                        <Card className=\"card\" border=\"primary\" body>You've earned {item.pointsAwarded} points from event {item.eventName}</Card>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}