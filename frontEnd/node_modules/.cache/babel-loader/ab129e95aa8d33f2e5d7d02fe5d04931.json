{"ast":null,"code":"import _classCallCheck from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import Button from'react-bootstrap/Button';import{Modal}from'react-bootstrap';import Form from'react-bootstrap/Form';import{Row,Col}from'react-bootstrap';import axios from'axios';import{store}from'react-notifications-component';import{getStorage,ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditReward=/*#__PURE__*/function(_React$Component){_inherits(EditReward,_React$Component);var _super=_createSuper(EditReward);function EditReward(props){var _this;_classCallCheck(this,EditReward);_this=_super.call(this,props);_this.handleName=function(event){_this.setState({rewardName:event.target.value});};_this.handlePoints=function(event){_this.setState({rewardPoints:event.target.value});};_this.handleURL=function(event){_this.setState({url:event.target.files[0]});};_this.handleSubmit=function(event){event.preventDefault();// IF there's anything replaced\nif(_this.state.url==''){var reward={rewardName:_this.state.rewardName,ptsRequired:_this.state.rewardPoints,url:_this.props.url};console.log(\"reward\"+JSON.stringify(reward));var config={headers:{'content-type':'application/json'}};axios.put('https://ades-ca1-project.herokuapp.com/api/rewards/'+_this.props.rewardID,reward,config).then(function(res){console.log(res);console.log(res.data);_this.handleClose();window.location.reload();_this.notiEditSuccess();});// ELSE \n}else{// file upload\n// packing data    \nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.url.name);var file=_this.state.url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var reward={rewardName:_this.state.rewardName,ptsRequired:_this.state.rewardPoints,url:downloadURL};console.log(\"reward\"+JSON.stringify(reward));var config={headers:{'content-type':'application/json'}};axios.put('https://ades-ca1-project.herokuapp.com/api/rewards/'+_this.props.rewardID,reward,config).then(function(res){console.log(res);console.log(res.data);_this.handleClose();window.location.reload();_this.notiEditSuccess();});});}};_this.handleClose=function(){_this.props.onPopupClose(false,_this.props.rewardID,'','','');};_this.state={showModal:false,data:[],rewardName:'',rewardPoints:'',url:''};return _this;}_createClass(EditReward,[{key:\"notiEditSuccess\",value:function notiEditSuccess(){store.addNotification({title:\"Success\",message:\"Reward edited successfully !\",type:\"success\",insert:\"top\",container:\"top-center\",animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:2000},dismissable:{click:true}});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:this.props.showModalPopup,onHide:this.handleClose,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Reward\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"editReward\",children:/*#__PURE__*/_jsx(Form,{onSubmit:this.handleSubmit,className:\"rewardForm\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:12,md:8,lg:4,children:/*#__PURE__*/_jsx(Form.Control,{placeholder:this.props.rewardName,onChange:this.handleName,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:this.props.rewardPoints,onChange:this.handlePoints,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:this.handleURL})}),/*#__PURE__*/_jsx(Col,{xs:12,md:2,lg:2,children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Edit\"})})]})})})})]})});}}]);return EditReward;}(React.Component);export{EditReward as default};","map":{"version":3,"sources":["C:/Users/jw/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/RewardPopup.js"],"names":["React","Component","Fragment","Button","Modal","Form","Row","Col","axios","store","getStorage","ref","uploadBytes","getDownloadURL","EditReward","props","handleName","event","setState","rewardName","target","value","handlePoints","rewardPoints","handleURL","url","files","handleSubmit","preventDefault","state","reward","ptsRequired","console","log","JSON","stringify","config","headers","put","rewardID","then","res","data","handleClose","window","location","reload","notiEditSuccess","storage","storageRef","name","file","metadata","contentType","type","downloadURL","onPopupClose","showModal","addNotification","title","message","insert","container","animationIn","animationOut","dismiss","duration","dismissable","click","showModalPopup"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Modal } from 'react-bootstrap';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport { store } from 'react-notifications-component';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\n\r\nexport default class EditReward extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showModal: false,\r\n      data: [],\r\n      rewardName: '',\r\n      rewardPoints: '',\r\n      url: '',\r\n    };\r\n  }\r\n\r\n  notiEditSuccess(){\r\n    store.addNotification({\r\n      title:\"Success\",\r\n      message:\"Reward edited successfully !\",\r\n      type:\"success\",\r\n      insert:\"top\",\r\n      container:\"top-center\",\r\n      animationIn:[\"animated\",\"fadeIn\"],\r\n      animationOut:[\"animated\",\"fadeOut\"],\r\n      dismiss: {duration:2000},\r\n      dismissable: {click:true}\r\n    });\r\n  }  \r\n\r\n  handleName = event => {\r\n    this.setState({ rewardName: event.target.value });\r\n  }\r\n\r\n  handlePoints = event => {\r\n    this.setState({ rewardPoints: event.target.value });\r\n  }\r\n\r\n  handleURL = event => {\r\n    this.setState({ url: event.target.files[0], });\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    // IF there's anything replaced\r\n    if(this.state.url == ''){\r\n      const reward = {\r\n        rewardName: this.state.rewardName,\r\n        ptsRequired: this.state.rewardPoints,\r\n        url: this.props.url\r\n      };\r\n      console.log(\"reward\" + JSON.stringify(reward));\r\n\r\n      const config = {\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n      }\r\n\r\n      axios.put('https://ades-ca1-project.herokuapp.com/api/rewards/' + this.props.rewardID, reward, config)\r\n        .then(res => {\r\n          console.log(res);\r\n          console.log(res.data);\r\n          this.handleClose();\r\n          window.location.reload();\r\n          this.notiEditSuccess();\r\n        })\r\n\r\n    // ELSE \r\n    }else{\r\n    // file upload\r\n    // packing data    \r\n    const storage = getStorage();\r\n    const storageRef = ref(storage, 'img/' + this.state.url.name);\r\n    var file = this.state.url;\r\n    // Create file metadata including the content type\r\n    /** @type {any} */\r\n    const metadata = {\r\n      contentType: this.state.url.type,\r\n    };\r\n    uploadBytes(storageRef, file, metadata);\r\n\r\n    getDownloadURL(storageRef).then((downloadURL) => {\r\n      console.log('File available at', downloadURL);\r\n\r\n      const reward = {\r\n        rewardName: this.state.rewardName,\r\n        ptsRequired: this.state.rewardPoints,\r\n        url: downloadURL\r\n      };\r\n      console.log(\"reward\" + JSON.stringify(reward));\r\n\r\n      const config = {\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n      }\r\n\r\n      axios.put('https://ades-ca1-project.herokuapp.com/api/rewards/' + this.props.rewardID, reward, config)\r\n        .then(res => {\r\n          console.log(res);\r\n          console.log(res.data);\r\n          this.handleClose();\r\n          window.location.reload();\r\n          this.notiEditSuccess();\r\n        })\r\n    })\r\n  }\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.props.onPopupClose(false, this.props.rewardID, '', '', '');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Modal show={this.props.showModalPopup} onHide={this.handleClose}\r\n          size=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>\r\n              Edit Reward\r\n            </Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <div className=\"editReward\">\r\n              <Form onSubmit={this.handleSubmit} className=\"rewardForm\">\r\n                <Row>\r\n                  <Col xs={12} md={8} lg={4}>\r\n                    <Form.Control placeholder={this.props.rewardName} onChange={this.handleName} required />\r\n                  </Col>\r\n                  <Col xs={12} md={5} lg={3}>\r\n                    <Form.Control type=\"number\" placeholder={this.props.rewardPoints} onChange={this.handlePoints} required />\r\n                  </Col>\r\n                  <Col xs={12} md={5} lg={3}>\r\n                    <Form.Control type=\"file\" onChange={this.handleURL} />\r\n                  </Col>\r\n                  <Col xs={12} md={2} lg={2}>\r\n                    <Button variant=\"primary\" type=\"submit\">Edit</Button>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n            </div>\r\n          </Modal.Body>\r\n        </Modal>\r\n      </Fragment>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}