{"ast":null,"code":"import _classCallCheck from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/User/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import{getStorage,ref,uploadBytes}from\"firebase/storage\";import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BadgeAdmin=/*#__PURE__*/function(_React$Component){_inherits(BadgeAdmin,_React$Component);var _super=_createSuper(BadgeAdmin);function BadgeAdmin(){var _this;_classCallCheck(this,BadgeAdmin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],name:'',requirements:'',pic_url:'',badgeClassID:''};_this.handleName=function(event){_this.setState({name:event.target.value});};_this.handleRequirement=function(event){_this.setState({requirements:event.target.value});};_this.handleBadgeClassID=function(event){_this.setState({badgeClassID:event.target.value});};_this.handleURL=function(event){_this.setState({pic_url:event.target.files[0]});};_this.handleSubmit=function(event){event.preventDefault();//data extraction (combining data)\n// file upload\nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.pic_url.name);var file=_this.state.pic_url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.pic_url.type};console.log(\"yes\");uploadBytes(storageRef,file,metadata);var badge={name:_this.state.name,requirements:_this.state.requirements,pic_url:_this.state.pic_url.name,badgeClassID:_this.state.badgeClassID};console.log(\"BADGEEEE\"+JSON.stringify(badge));var config={headers:{'content-type':'application/json'}};axios.post('http://localhost:8081/newBadge',badge,config).then(function(res){console.log(res);console.log(res.data);});};return _this;}_createClass(BadgeAdmin,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"http://localhost:8081/badges\").then(function(res){console.log(res.data.length);_this2.setState({data:res.data});});}},{key:\"render\",value:function render(){var data=this.state.data;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Badges Administration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewBadges\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Badge\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Badge Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",onChange:this.handleName})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Badge Requirement:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"requirements\",onChange:this.handleRequirement})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Pic URL:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"pic_url\",onChange:this.handleURL})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Badge Class ID:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"badgeClassID\",onChange:this.handleBadgeClassID})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"View Badges\"}),data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.requirements}),/*#__PURE__*/_jsx(\"td\",{children:item.badgeClassID}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:'../images/'+item.pic_url,style:{height:200,width:200}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/EditBadge?id=\".concat(item.badgeID),children:/*#__PURE__*/_jsx(Button,{children:\"Edit\"})})}),\"            \"]},item.badgeID);})]})]});}}]);return BadgeAdmin;}(React.Component);export{BadgeAdmin as default};","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/ADES/frontEnd/src/components/BadgeAdmin.js"],"names":["React","axios","Link","getStorage","ref","uploadBytes","Button","BadgeAdmin","state","data","name","requirements","pic_url","badgeClassID","handleName","event","setState","target","value","handleRequirement","handleBadgeClassID","handleURL","files","handleSubmit","preventDefault","storage","storageRef","file","metadata","contentType","type","console","log","badge","JSON","stringify","config","headers","post","then","res","get","length","map","item","height","width","badgeID","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { getStorage, ref, uploadBytes } from \"firebase/storage\";\r\nimport Button from 'react-bootstrap/Button';\r\n\r\n\r\nexport default class BadgeAdmin extends React.Component {\r\n  state = {\r\n    data: [],\r\n    name: '',\r\n    requirements: '',\r\n    pic_url: '',\r\n    badgeClassID: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(`http://localhost:8081/badges`)\r\n      .then(res => {\r\n        console.log(res.data.length);\r\n       \r\n        this.setState({ data: res.data });\r\n      })\r\n  }\r\n\r\n  handleName = event => {\r\n    this.setState({ name: event.target.value });\r\n  }\r\n\r\n  handleRequirement = event => {\r\n    this.setState({ requirements: event.target.value });\r\n  }\r\n\r\n  handleBadgeClassID = event => {\r\n    this.setState({ badgeClassID: event.target.value });\r\n  }\r\n\r\n  handleURL = event => {\r\n    this.setState({ pic_url: event.target.files[0], });\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    //data extraction (combining data)\r\n    // file upload\r\n    const storage = getStorage();\r\n    const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\r\n    var file = this.state.pic_url;\r\n    // Create file metadata including the content type\r\n    /** @type {any} */\r\n    const metadata = {\r\n      contentType: this.state.pic_url.type,\r\n    };\r\n    console.log(\"yes\");\r\n    uploadBytes(storageRef, file, metadata);\r\n    const badge = {\r\n      name: this.state.name,\r\n      requirements: this.state.requirements,\r\n      pic_url: this.state.pic_url.name,\r\n      badgeClassID: this.state.badgeClassID\r\n    };\r\n    console.log(\"BADGEEEE\" + JSON.stringify(badge))\r\n\r\n    const config = {\r\n      headers: {\r\n        'content-type': 'application/json'\r\n      }\r\n    }\r\n\r\n    axios.post('http://localhost:8081/newBadge', badge, config)\r\n      .then(res => {\r\n        console.log(res);\r\n        console.log(res.data);\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const data = this.state.data;\r\n    return (\r\n      <div>\r\n        <h1>Badges Administration</h1>\r\n        <div className=\"viewBadges\">\r\n          <div>\r\n            <h2>Add Badge</h2>\r\n            <form onSubmit={this.handleSubmit}>\r\n              <label>\r\n                Badge Name:\r\n            <input type=\"text\" name=\"name\" onChange={this.handleName} />\r\n              </label>\r\n              <label>\r\n                Badge Requirement:\r\n            <input type=\"text\" name=\"requirements\" onChange={this.handleRequirement} />\r\n              </label>\r\n              <label>\r\n                Pic URL:\r\n            <input type=\"file\" name=\"pic_url\" onChange={this.handleURL} />\r\n              </label>\r\n              {/* Please remember to change and do JOIN table for it to not display as ID */}\r\n              <label>\r\n                Badge Class ID:\r\n            <input type=\"text\" name=\"badgeClassID\" onChange={this.handleBadgeClassID} />\r\n              </label>\r\n              <button type=\"submit\">Add</button>\r\n            </form>\r\n          </div>\r\n          <h2>View Badges</h2>\r\n          {data && data.map(item =>\r\n            <tr key={item.badgeID}>\r\n              <td>{item.name}</td>\r\n              <td>{item.requirements}</td>\r\n              <td>{item.badgeClassID}</td>\r\n              <td><img src={'../images/' + item.pic_url} style={{ height: 200, width: 200 }}></img></td>\r\n              <td>\r\n                <Link to={`/EditBadge?id=${item.badgeID}`}>\r\n                  <Button>Edit</Button>\r\n                </Link>\r\n              </td>            </tr>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}