{"ast":null,"code":"import _classCallCheck from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import{getStorage,ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import Button from'react-bootstrap/Button';import Accordion from'react-bootstrap/Accordion';import'../css/Table&Add.css';import ModalPopup from'./EditBadge';import{signOut}from\"firebase/auth\";import{auth}from'../firebase.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BadgeAdmin=/*#__PURE__*/function(_React$Component){_inherits(BadgeAdmin,_React$Component);var _super=_createSuper(BadgeAdmin);function BadgeAdmin(){var _this;_classCallCheck(this,BadgeAdmin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],showModalPopup:false,class:[],name:'',requirements:'',pic_url:'',badgeClassID:'',badgeID:'',uid:'',id:0};_this.isShowPopup=function(status,badgeID,name,requirements,className,pic_url){_this.setState({showModalPopup:status});_this.setState({badgeID:badgeID});_this.setState({name:name});_this.setState({requirements:requirements});_this.setState({badgeClassID:className});_this.setState({pic_url:pic_url});};_this.handleName=function(event){_this.setState({name:event.target.value});};_this.handleRequirement=function(event){_this.setState({requirements:event.target.value});};_this.handleURL=function(event){_this.setState({pic_url:event.target.files[0]});};_this.handleBadgeClassID=function(event){_this.setState({badgeClassID:event.target.value});};_this.handleSubmit=function(event){event.preventDefault();//data extraction (combining data)\n// file upload\nif(_this.state.pic_url==''){var badge={name:_this.state.name,requirements:_this.state.requirements,badgeClassID:_this.state.badgeClassID,pic_url:'https://firebasestorage.googleapis.com/v0/b/quizment-ae4a6.appspot.com/o/img%2Fdefault-image.png?alt=media&token=369e00f7-926d-4b3c-abbb-958828b303d5'};var config={headers:{'content-type':'application/json'}};axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge',badge,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();});}else{var storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.pic_url.name);var file=_this.state.pic_url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.pic_url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var bcID=document.getElementById(\"dropDown\");var bID=bcID.value;var badgeClassID=parseInt(bID);console.log(badgeClassID+\"classBADGE\");var badge={name:_this.state.name,requirements:_this.state.requirements,pic_url:downloadURL,badgeClassID:badgeClassID};console.log(\"BADGEEEE\"+JSON.stringify(badge));var config={headers:{'content-type':'application/json'}};axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge',badge,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();});});}};return _this;}_createClass(BadgeAdmin,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;auth.onAuthStateChanged(function(user){if(user){console.log(\"User is Signed IN \");_this2.setState({uid:user.uid});var config={headers:{'content-type':'application/json'}};axios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+_this2.state.uid,config).then(function(res){if(res.data.type===1){window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/studentDashboard');}else if(res.data.type===2){// area to put your axios \n}else{window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});}else{console.log(\"THERE IS NO USER\");signOut(auth);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});axios.get(\"https://ades-ca1-project.herokuapp.com/api/badges\").then(function(res){console.log(res.data.length);_this2.setState({data:res.data});});axios.get(\"https://ades-ca1-project.herokuapp.com/api/badgeClass\").then(function(res){console.log(res.data.length);_this2.setState({class:res.data});});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;var data2=this.state.class;return/*#__PURE__*/_jsxs(\"div\",{id:\"body\",children:[/*#__PURE__*/_jsx(Accordion,{children:/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:\"0\",children:[/*#__PURE__*/_jsx(Accordion.Header,{children:/*#__PURE__*/_jsx(Button,{variant:\"outline-info\",children:\"Add Reward\"})}),/*#__PURE__*/_jsx(Accordion.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"uploadReward\",children:/*#__PURE__*/_jsx(Form,{onSubmit:this.handleSubmit,className:\"badgeForm\",if:\"form\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:12,md:8,lg:4,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"name\",onChange:this.handleName,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",name:\"requirements\",onChange:this.handleRequirement,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:this.handleURL})}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Badge Class ID: \"}),/*#__PURE__*/_jsxs(\"select\",{name:\"badgeClassID\",onChange:this.handleBadgeClassID,id:\"dropDown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Air\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Water\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Fire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Geo\"})]})]}),/*#__PURE__*/_jsx(Col,{xs:12,md:2,lg:2,children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Add\"})})]})})})})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Badge Class\"}),/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Describtion \"})]}),data2&&data2.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{id:\"tableRow\",class:\"spaceUnder\",children:[/*#__PURE__*/_jsx(\"td\",{children:item.className}),/*#__PURE__*/_jsx(\"td\",{children:item.classDescription})]});})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"View Badges\"}),/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Badge Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Requirements\"}),/*#__PURE__*/_jsx(\"th\",{children:\"badgeClass\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Picture\"})]}),data&&data.map(function(item2){return/*#__PURE__*/_jsxs(\"tr\",{id:\"tableRow\",class:\"spaceUnder\",children:[/*#__PURE__*/_jsx(\"td\",{children:item2.name}),/*#__PURE__*/_jsx(\"td\",{children:item2.requirements}),/*#__PURE__*/_jsx(\"td\",{children:item2.className}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item2.pic_url,style:{height:200,width:200},alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"warning\",onClick:function onClick(){return _this3.isShowPopup(true,item2.badgeID,item2.name,item2.requirements,item2.className,item2.pic_url);},children:\"Edit\"})})]},item2.badgeID);})]})]}),/*#__PURE__*/_jsx(ModalPopup,{showModalPopup:this.state.showModalPopup,onPopupClose:this.isShowPopup,badgeID:this.state.badgeID,name:this.state.name,requirements:this.state.requirements,className:this.state.badgeClassID,pic_url:this.state.pic_url})]});}}]);return BadgeAdmin;}(React.Component);export{BadgeAdmin as default};","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/BadgeAdmin.js"],"names":["React","axios","Link","getStorage","ref","uploadBytes","getDownloadURL","Button","Accordion","ModalPopup","signOut","auth","BadgeAdmin","state","data","showModalPopup","class","name","requirements","pic_url","badgeClassID","badgeID","uid","id","isShowPopup","status","className","setState","handleName","event","target","value","handleRequirement","handleURL","files","handleBadgeClassID","handleSubmit","preventDefault","badge","config","headers","post","then","res","console","log","window","location","reload","storage","storageRef","file","metadata","contentType","type","downloadURL","bcID","document","getElementById","bID","parseInt","JSON","stringify","onAuthStateChanged","user","get","replace","length","data2","map","item","classDescription","item2","height","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport Button from 'react-bootstrap/Button';\nimport Accordion from 'react-bootstrap/Accordion';\nimport '../css/Table&Add.css';\nimport ModalPopup from './EditBadge';\nimport { signOut } from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nexport default class BadgeAdmin extends React.Component {\n  state = {\n    data: [],\n    showModalPopup: false,\n    class: [],\n    name: '',\n    requirements: '',\n    pic_url: '',\n    badgeClassID: '',\n    badgeID: '',\n    uid: '',\n    id: 0\n  }\n\n  componentDidMount() {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        console.log(\"User is Signed IN \");\n        this.setState({ uid: user.uid });\n        const config = {\n          headers: {\n            'content-type': 'application/json'\n          }\n        }\n\n        axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + this.state.uid, config)\n          .then(res => {\n            if (res.data.type === 1) {\n              window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/studentDashboard');\n\n            } else if (res.data.type === 2) {\n              // area to put your axios \n            } else {\n              window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n            }\n          })\n      } else {\n        console.log(\"THERE IS NO USER\");\n        signOut(auth);\n        window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n      }\n    });\n\n\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badges`)\n      .then(res => {\n        console.log(res.data.length);\n\n        this.setState({ data: res.data });\n      })\n\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badgeClass`)\n      .then(res => {\n        console.log(res.data.length);\n\n        this.setState({ class: res.data });\n      })\n  }\n\n  isShowPopup = (status, badgeID, name, requirements, className, pic_url) => {\n    this.setState({ showModalPopup: status });\n    this.setState({ badgeID: badgeID });\n    this.setState({ name: name });\n    this.setState({ requirements: requirements });\n    this.setState({ badgeClassID: className });\n    this.setState({ pic_url: pic_url });\n  }\n  handleName = event => {\n    this.setState({ name: event.target.value });\n  }\n\n  handleRequirement = event => {\n    this.setState({ requirements: event.target.value });\n  }\n\n\n\n  handleURL = event => {\n    this.setState({ pic_url: event.target.files[0], });\n  }\n  handleBadgeClassID = event => {\n    this.setState({ badgeClassID: event.target.value })\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    //data extraction (combining data)\n    // file upload\n    if (this.state.pic_url == '') {\n      const badge = {\n        name: this.state.name,\n        requirements: this.state.requirements,\n        badgeClassID: this.state.badgeClassID,\n        pic_url: 'https://firebasestorage.googleapis.com/v0/b/quizment-ae4a6.appspot.com/o/img%2Fdefault-image.png?alt=media&token=369e00f7-926d-4b3c-abbb-958828b303d5'\n      };\n\n\n      const config = {\n        headers: {\n          'content-type': 'application/json'\n        }\n      }\n\n      axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge', badge, config)\n        .then(res => {\n          console.log(res);\n          console.log(res.data);\n          window.location.reload();\n        })\n\n    } else {\n      const storage = getStorage();\n      const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\n      var file = this.state.pic_url;\n      // Create file metadata including the content type\n      /** @type {any} */\n      const metadata = {\n        contentType: this.state.pic_url.type,\n      };\n\n      uploadBytes(storageRef, file, metadata);\n\n      getDownloadURL(storageRef).then((downloadURL) => {\n        console.log('File available at', downloadURL);\n\n        var bcID = document.getElementById(\"dropDown\");\n        var bID = bcID.value;\n        var badgeClassID = parseInt(bID);\n        console.log(badgeClassID + \"classBADGE\")\n        const badge = {\n          name: this.state.name,\n          requirements: this.state.requirements,\n          pic_url: downloadURL,\n          badgeClassID: badgeClassID\n        };\n        console.log(\"BADGEEEE\" + JSON.stringify(badge))\n\n        const config = {\n          headers: {\n            'content-type': 'application/json'\n          }\n        }\n        axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge', badge, config)\n          .then(res => {\n            console.log(res);\n            console.log(res.data);\n            window.location.reload();\n          })\n      });\n    }\n\n  }\n\n  render() {\n    const data = this.state.data;\n    const data2 = this.state.class;\n    return (\n\n      <div id=\"body\">\n        <Accordion>\n          <Accordion.Item eventKey=\"0\">\n            <Accordion.Header>\n              <Button variant=\"outline-info\" >Add Reward</Button>\n            </Accordion.Header>\n            <Accordion.Body>\n              <div className=\"uploadReward\">\n                <Form onSubmit={this.handleSubmit} className=\"badgeForm\" if=\"form\">\n                  <Row>\n                    <Col xs={12} md={8} lg={4}>\n                      <Form.Control type=\"text\" name=\"name\" onChange={this.handleName} required />\n                    </Col>\n                    <Col xs={12} md={5} lg={3}>\n                      <Form.Control type=\"number\" name=\"requirements\" onChange={this.handleRequirement} required />\n                    </Col>\n                    <Col xs={12} md={5} lg={3}>\n                      <Form.Control type=\"file\" onChange={this.handleURL} />\n                    </Col>\n                    <Col>\n                      <label>\n                        Badge Class ID: </label>\n                      <select name=\"badgeClassID\" onChange={this.handleBadgeClassID} id=\"dropDown\">\n                        <option value=\"1\">Air</option>\n                        <option value=\"2\">Water</option>\n                        <option value=\"3\">Fire</option>\n                        <option value=\"4\">Geo</option>\n                      </select>\n                    </Col>\n                    <Col xs={12} md={2} lg={2}>\n                      <Button variant=\"primary\" type=\"submit\">Add</Button>\n                    </Col>\n                  </Row>\n                </Form>\n              </div>\n            </Accordion.Body>\n          </Accordion.Item>\n        </Accordion>\n\n\n        <div> \n          \n          <h2>Badge Class</h2>\n          <table class=\"table\">\n            <tr>\n              <th>Class Name</th>\n              <th>Describtion </th>\n\n            </tr>\n            {data2 && data2.map(item =>\n              <tr id='tableRow' class=\"spaceUnder\">\n                <td>{item.className}</td>\n                <td>{item.classDescription}</td>\n\n              </tr>\n            )}\n          </table>\n        </div>\n        <div>\n          <h2>View Badges</h2>\n          <table class=\"table\">\n            <tr>\n              <th>Badge Name</th>\n              <th>Requirements</th>\n              <th>badgeClass</th>\n              <th>Picture</th>\n            </tr>\n            {data && data.map(item2 =>\n              <tr key={item2.badgeID} id='tableRow' class=\"spaceUnder\">\n                <td>{item2.name}</td>\n                <td>{item2.requirements}</td>\n                <td>{item2.className}</td>\n                <td><img src={item2.pic_url} style={{ height: 200, width: 200 }} alt=\"\"></img></td>\n                <td><Button type=\"button\" variant=\"warning\" onClick={() => this.isShowPopup(true, item2.badgeID, item2.name, item2.requirements, item2.className, item2.pic_url)}>Edit</Button></td>\n              </tr>\n            )}\n          </table>\n        </div>\n        <ModalPopup\n          showModalPopup={this.state.showModalPopup}\n          onPopupClose={this.isShowPopup}\n          badgeID={this.state.badgeID}\n          name={this.state.name}\n          requirements={this.state.requirements}\n          className={this.state.badgeClassID}\n          pic_url={this.state.pic_url}></ModalPopup>\n    \n        \n      </div >\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}