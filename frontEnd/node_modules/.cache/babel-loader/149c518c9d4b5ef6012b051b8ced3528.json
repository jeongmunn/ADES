{"ast":null,"code":"import _regeneratorRuntime from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../styling2.css';import React,{useState,useRef}from'react';import{useNavigate}from'react-router-dom';import{onAuthStateChanged,signOut,updateEmail,updatePassword}from\"firebase/auth\";import{auth}from'../firebase.js';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import Box from'@mui/material/Box';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var emailData=useRef(\"\");var passwordData=useRef(\"\");var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];onAuthStateChanged(auth,function(currentUser){if(user){setUser(currentUser);}else{console.log(\"error\");signOut(auth);window.location.replace('http://localhost:8081/quizment');}});var navigate=useNavigate();var logout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return signOut(auth);case 2:window.location.replace('http://localhost:8081/quizment');case 3:case\"end\":return _context.stop();}}},_callee);}));return function logout(){return _ref.apply(this,arguments);};}();var emailOfUser=user.email;console.log(emailOfUser);var uidOfUser=user.uid;var updateEmailFunction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updateEmail(user,emailData.current.value).then(function(){console.log(\"Update Of Email Successful!\");var config={headers:{'content-type':'application/json'}};var emailDetails={email:JSON.parse(emailData.current.value)};console.log(emailDetails.email);axios.put('http://localhost:8081/api/email/'+uidOfUser,emailDetails,config).then(function(res){console.log(res);window.location.reload();}).catch(function(error){console.log(\"Update not posted to table.\");});}).catch(function(error){alert('Email did not update. Please try again.');var errorCode=error.code;var errorMessage=error.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateEmailFunction(){return _ref2.apply(this,arguments);};}();var updatePasswordFunction=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:updatePassword(user,passwordData.current.value).then(function(){console.log(\"Update Of Password Successful!\");window.location.reload();}).catch(function(error){alert('Password did not update. Please try again.');var errorCode=error.code;var errorMessage=error.message;console.log(JSON.stringify(errorCode));console.log(JSON.stringify(errorMessage));});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function updatePasswordFunction(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Profile Administration\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:emailData,id:\"filled-required\",label:\"Email\",margin:\"dense\",type:\"email\",value:emailOfUser}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',margin:'10px',width:'100%'},variant:\"contained\",onClick:updateEmailFunction,children:\" Update Email\"}),/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,inputRef:passwordData,id:\"outlined-password-input\",label:\"Change Password\",margin:\"dense\",type:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',margin:'10px',width:'100%'},variant:\"contained\",onClick:updatePasswordFunction,children:\" Update Password\"}),/*#__PURE__*/_jsx(Button,{sx:{background:'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',color:'white',paddingTop:'10px',paddingBottom:'10px',margin:'15px',width:'100%'},variant:\"contained\",onClick:logout,children:\" Logout\"})]});}","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/Profile.js"],"names":["React","useState","useRef","useNavigate","onAuthStateChanged","signOut","updateEmail","updatePassword","auth","Button","TextField","Box","axios","Profile","emailData","passwordData","user","setUser","currentUser","console","log","window","location","replace","navigate","logout","emailOfUser","email","uidOfUser","uid","updateEmailFunction","current","value","then","config","headers","emailDetails","JSON","parse","put","res","reload","catch","error","alert","errorCode","code","errorMessage","message","stringify","updatePasswordFunction","background","color","paddingTop","paddingBottom","margin","width"],"mappings":"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","sourcesContent":["import '../styling2.css';\nimport React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    onAuthStateChanged,\n    signOut,\n    updateEmail,\n    updatePassword,\n} from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Box from '@mui/material/Box';\nimport axios from 'axios';\n\nexport default function Profile() {\n    const emailData = useRef(\"\");\n    const passwordData = useRef(\"\");\n    const [user, setUser] = useState({});\n    onAuthStateChanged(auth, (currentUser) => {\n        if (user) {\n            setUser(currentUser);\n        } else {\n            console.log(\"error\")\n            signOut(auth);\n            window.location.replace('http://localhost:8081/quizment');\n        }\n    });\n\n    let navigate = useNavigate();\n    const logout = async () => {\n        await signOut(auth);\n        window.location.replace('http://localhost:8081/quizment');\n    };\n    const emailOfUser = user.email;\n    console.log(emailOfUser);\n    const uidOfUser = user.uid;\n    const updateEmailFunction = async () => {\n        updateEmail(user, emailData.current.value).then(() => {\n            console.log(\"Update Of Email Successful!\");\n            const config = {\n                headers: {\n                    'content-type': 'application/json'\n                }\n            }\n            const emailDetails = {\n                email: JSON.parse(emailData.current.value)\n            };\n            console.log(emailDetails.email)\n            axios.put('http://localhost:8081/api/email/' + uidOfUser, emailDetails, config)\n                .then(res => {\n                    console.log(res);\n                    window.location.reload();\n            }).catch((error) => {\n                console.log(\"Update not posted to table.\");\n            });\n        }).catch((error) => {\n            alert('Email did not update. Please try again.');\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        });\n    };\n\n\n    const updatePasswordFunction = async () => {\n        updatePassword(user, passwordData.current.value).then(() => {\n            console.log(\"Update Of Password Successful!\");\n            window.location.reload();\n        }).catch((error) => {\n            alert('Password did not update. Please try again.');\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            console.log(JSON.stringify(errorCode));\n            console.log(JSON.stringify(errorMessage));\n        });\n    };\n    return (\n        <div className=\"profile\">\n            <h1>Profile Administration</h1>\n            <TextField\n                required\n                fullWidth\n                inputRef={emailData}\n                id=\"filled-required\"\n                label=\"Email\"\n                margin=\"dense\"\n                type=\"email\"\n                value={emailOfUser}\n            />\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', margin: '10px', width: '100%' }} variant=\"contained\" onClick={updateEmailFunction}> Update Email</Button>\n            <TextField\n                required\n                fullWidth\n                inputRef={passwordData}\n                id=\"outlined-password-input\"\n                label=\"Change Password\"\n                margin=\"dense\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n            />\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', margin: '10px', width: '100%' }} variant=\"contained\" onClick={updatePasswordFunction}> Update Password</Button>\n            <Button sx={{ background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)', color: 'white', paddingTop: '10px', paddingBottom: '10px', margin: '15px', width: '100%' }} variant=\"contained\" onClick={logout}> Logout</Button>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}