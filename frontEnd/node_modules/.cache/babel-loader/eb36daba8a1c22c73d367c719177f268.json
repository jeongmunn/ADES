{"ast":null,"code":"import _classCallCheck from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import axios from'axios';import Form from'react-bootstrap/Form';import{Row,Col}from'react-bootstrap';import{getStorage,ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import'../css/badgemazeEdit.css';import{Modal}from'react-bootstrap';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditBadge=/*#__PURE__*/function(_React$Component){_inherits(EditBadge,_React$Component);var _super=_createSuper(EditBadge);function EditBadge(){var _this;_classCallCheck(this,EditBadge);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={showModal:false,data:[],name:'',requirements:'',pic_url:'',badgeClassID:''};_this.handleName=function(event){_this.setState({name:event.target.value});};_this.handleRequirement=function(event){_this.setState({requirements:event.target.value});};_this.handleURL=function(event){_this.setState({pic_url:event.target.files[0]});};_this.handleBadgeClassID=function(event){_this.setState({badgeClassID:event.target.value});};_this.handleSubmit=function(event){event.preventDefault();// file upload\n// IF there's anything replaced\nif(_this.state.pic_url==''){var badge={name:_this.state.name,requirements:_this.state.requirements,pic_url:_this.props.pic_url,badgeClassID:_this.state.badgeClassID};console.log(_this.props.pic_url+\" PIC URL\");var config={headers:{'content-type':'application/json'}};var badgeID=parseInt(_this.props.badgeID);var baseUrl=\"https://ades-ca1-project.herokuapp.com/api\";console.log(badgeID);axios.put(\"\".concat(baseUrl,\"/editBadge/\").concat(badgeID),badge,config).then(function(res){console.log(res);console.log(res.data);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/badgesAdmin');});// ELSE \n}else{var storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.pic_url.name);var file=_this.state.pic_url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.pic_url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var bcID=document.getElementById(\"dropDown\");var bID=bcID.value;var badgeClassID=parseInt(bID);var badge={name:_this.state.name,requirements:_this.state.requirements,pic_url:downloadURL,badgeClassID:badgeClassID};console.log(\"BADGEEEE\"+JSON.stringify(badge));var config={headers:{'content-type':'application/json'}};var badgeID=parseInt(_this.props.badgeID);var baseUrl=\"https://ades-ca1-project.herokuapp.com/api\";console.log(badgeID);axios.put(\"\".concat(baseUrl,\"/editBadge/\").concat(badgeID),badge,config).then(function(res){console.log(res);console.log(res.data);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/badgesAdmin');});});}};_this.handleClose=function(){_this.props.onPopupClose(false,_this.props.rewardID,'','','');};return _this;}_createClass(EditBadge,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{id:\"bodyEdit\",children:/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:this.props.showModalPopup,onHide:this.handleClose,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Badge\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"editBadge\",children:/*#__PURE__*/_jsx(Form,{onSubmit:this.handleSubmit,className:\"badgeForm\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:12,md:8,lg:4,children:/*#__PURE__*/_jsx(Form.Control,{placeholder:this.props.name,onChange:this.handleName,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:this.props.requirements,onChange:this.handleRequirement,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:this.handleURL})}),/*#__PURE__*/_jsx(Col,{xs:12,md:2,lg:2,children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Edit\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"badgeClassID\",onChange:this.handleBadgeClassID,id:\"dropDown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Air\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Water\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Fire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Geo\"})]})]})})})})]})})});}}]);return EditBadge;}(React.Component);export{EditBadge as default};","map":{"version":3,"sources":["C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/EditBadge.js"],"names":["React","Component","Fragment","axios","Form","Row","Col","getStorage","ref","uploadBytes","getDownloadURL","Modal","Button","EditBadge","state","showModal","data","name","requirements","pic_url","badgeClassID","handleName","event","setState","target","value","handleRequirement","handleURL","files","handleBadgeClassID","handleSubmit","preventDefault","badge","props","console","log","config","headers","badgeID","parseInt","baseUrl","put","then","res","window","location","replace","storage","storageRef","file","metadata","contentType","type","downloadURL","bcID","document","getElementById","bID","JSON","stringify","handleClose","onPopupClose","rewardID","showModalPopup"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport axios from 'axios';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport '../css/badgemazeEdit.css';\r\nimport { Modal } from 'react-bootstrap';\r\nimport Button from 'react-bootstrap/Button';\r\nexport default class EditBadge extends React.Component {\r\n\r\n    state = {\r\n        showModal: false,\r\n        data: [],\r\n        name: '',\r\n        requirements: '',\r\n        pic_url: '',\r\n        badgeClassID: ''\r\n    }\r\n\r\n\r\n\r\n    handleName = event => {\r\n        this.setState({ name: event.target.value });\r\n    }\r\n\r\n    handleRequirement = event => {\r\n        this.setState({ requirements: event.target.value });\r\n    }\r\n\r\n    handleURL = event => {\r\n        this.setState({ pic_url: event.target.files[0], });\r\n    }\r\n\r\n    handleBadgeClassID = event => {\r\n        this.setState({ badgeClassID: event.target.value });\r\n    }\r\n\r\n\r\n    handleSubmit = event => {\r\n        \r\n        event.preventDefault();\r\n        // file upload\r\n         // IF there's anything replaced\r\n    if(this.state.pic_url == ''){\r\n        \r\n        const badge = {\r\n            name: this.state.name,\r\n            requirements: this.state.requirements,\r\n            pic_url: this.props.pic_url,\r\n            badgeClassID: this.state.badgeClassID\r\n        };\r\n        console.log(this.props.pic_url + \" PIC URL\")\r\n        const config = {\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const badgeID = parseInt(this.props.badgeID);\r\n        const baseUrl = \"https://ades-ca1-project.herokuapp.com/api\";\r\n        console.log(badgeID);\r\n\r\n        axios.put(`${baseUrl}/editBadge/${badgeID}`, badge, config)\r\n            .then(res => {\r\n                console.log(res);\r\n                console.log(res.data);\r\n                window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/badgesAdmin')\r\n            })\r\n  \r\n      // ELSE \r\n      }else{\r\n        const storage = getStorage();\r\n        const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\r\n        var file = this.state.pic_url;\r\n        // Create file metadata including the content type\r\n        /** @type {any} */\r\n        const metadata = {\r\n            contentType: this.state.pic_url.type,\r\n        };\r\n\r\n        uploadBytes(storageRef, file, metadata);\r\n\r\n        getDownloadURL(storageRef).then((downloadURL) => {\r\n            console.log('File available at', downloadURL);\r\n\r\n            var bcID = document.getElementById(\"dropDown\");\r\n            var bID = bcID.value;\r\n            var badgeClassID = parseInt(bID);\r\n\r\n            const badge = {\r\n                name: this.state.name,\r\n                requirements: this.state.requirements,\r\n                pic_url: downloadURL,\r\n                badgeClassID: badgeClassID\r\n            };\r\n\r\n            console.log(\"BADGEEEE\" + JSON.stringify(badge))\r\n\r\n            const config = {\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n            }\r\n\r\n            const badgeID = parseInt(this.props.badgeID);\r\n            const baseUrl = \"https://ades-ca1-project.herokuapp.com/api\";\r\n            console.log(badgeID);\r\n\r\n            axios.put(`${baseUrl}/editBadge/${badgeID}`, badge, config)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    console.log(res.data);\r\n                    window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/badgesAdmin')\r\n                })\r\n        });\r\n    }\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.onPopupClose(false, this.props.rewardID, '', '', '');\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"bodyEdit\">\r\n                <Fragment>\r\n                    <Modal show={this.props.showModalPopup} onHide={this.handleClose}\r\n                        size=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered>\r\n                        <Modal.Header closeButton>\r\n                            <Modal.Title>\r\n                                Edit Badge\r\n            </Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <div className=\"editBadge\">\r\n                                <Form onSubmit={this.handleSubmit} className=\"badgeForm\">\r\n                                    <Row>\r\n                                        <Col xs={12} md={8} lg={4}>\r\n                                            <Form.Control placeholder={this.props.name} onChange={this.handleName} required />\r\n                                        </Col>\r\n                                        <Col xs={12} md={5} lg={3}>\r\n                                            <Form.Control type=\"number\" placeholder={this.props.requirements} onChange={this.handleRequirement} required />\r\n                                        </Col>\r\n                                        <Col xs={12} md={5} lg={3}>\r\n                                            <Form.Control type=\"file\" onChange={this.handleURL} />\r\n                                        </Col>\r\n                                        <Col xs={12} md={2} lg={2}>\r\n                                            <Button variant=\"primary\" type=\"submit\">Edit</Button>\r\n                                        </Col>\r\n                                        <select name=\"badgeClassID\" onChange={this.handleBadgeClassID} id=\"dropDown\">\r\n                                            <option value=\"1\">Air</option>\r\n                                            <option value=\"2\">Water</option>\r\n                                            <option value=\"3\">Fire</option>\r\n                                            <option value=\"4\">Geo</option>\r\n                                        </select>\r\n                                    </Row>\r\n                                </Form>\r\n                            </div>\r\n                        </Modal.Body>\r\n                    </Modal>\r\n                </Fragment>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}