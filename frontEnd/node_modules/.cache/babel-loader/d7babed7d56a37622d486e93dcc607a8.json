{"ast":null,"code":"import _classCallCheck from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import Button from'react-bootstrap/Button';import{Modal}from'react-bootstrap';import axios from'axios';import jQuery from'jquery';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var MazePopup=/*#__PURE__*/function(_Component){_inherits(MazePopup,_Component);var _super=_createSuper(MazePopup);function MazePopup(props){var _this;_classCallCheck(this,MazePopup);_this=_super.call(this,props);_this.isShowModal=function(status){_this.handleClose();_this.setState({showModal:status});};_this.handleClose=function(){_this.props.onPopupClose(false,_this.props.level);_this.props.onNewLevel(true);};_this.studentCurrentPoints=function(callback){axios.get('http://ades-ca1-project.herokuapp.com/api/points/'+_this.props.id).then(function(res){console.log(res.data[0].redeemedPts+\"res for redeemdedpoitns\");var currentPts=res.data[0].redeemedPts;var totalPts=res.data[0].totalPts;var mazeLvl=res.data[0].mazeLvl;var quizPts=_this.props.point;callback(currentPts,totalPts,mazeLvl,quizPts,_this.props.id);}).catch(failureCallback);};_this.handleComplete=function(event){// Store student's points\nevent.preventDefault();_this.studentCurrentPoints(function(currentPts,totalPts,mazeLvl,quizPts,studentID){var _this2=this;var currentPoints=currentPts+quizPts;var totalPoints=totalPts+quizPts;mazeLvl=parseInt(mazeLvl)+1;// Do the calculation\n// this.setState({ currentPts : currentPoints});\n// this.setState({ totalPts : totalPoints});\n// this.setState({ mazeLvl : mazeLvl});\n// Update student's table\nvar data={currentPts:currentPoints,totalPts:totalPoints,mazeLvl:mazeLvl};console.log(JSON.stringify(data)+\"DATA SENT FOR PUT\");var config={headers:{'content-type':'application/json'}};axios.put('http://ades-ca1-project.herokuapp.com/api/points/'+studentID,data,config).then(function(res){console.log(res);console.log(res.data);});var points={ptsAwarded:quizPts,eventID:2};// Insert points history\naxios.post('http://ades-ca1-project.herokuapp.com/api/ptsHistory/'+this.props.id,points,config).then(function(res){console.log(res);console.log(res.data);_this2.handleClose();window.alert(\"Points redeemed successfully\");//updating the state \n});});};_this.state={showModal:false,newLevel:false,currentPts:0,totalPts:0,mazeLvl:0};return _this;}// componentDidMount(){\n//     // Get student's points data'\n// axios.get('https://ades-ca1-project.herokuapp.com/api/points/' + this.props.id)\n// .then(res => {\n//     this.setState({ currentPts : res.data[0].redeemedPts });\n//     this.setState({ totalPts : res.data[0].totalPts});\n//     this.setState({ mazeLvl : res.data[0].mazeLvl});\n// })\n// }\n_createClass(MazePopup,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:this.props.showModalPopup,onHide:this.handleClose,id:this.props.level,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{id:\"sign-in-title\",children:[\"Level \",this.props.level]})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"Quiz\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Points : \",this.props.point,\" \"]}),/*#__PURE__*/_jsx(Button,{onClick:this.handleComplete,children:\"Complete\"})]})]})]})});}}]);return MazePopup;}(Component);export{MazePopup as default};","map":{"version":3,"sources":["C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/MazePopup.js"],"names":["React","Component","Fragment","Button","Modal","axios","jQuery","MazePopup","props","isShowModal","status","handleClose","setState","showModal","onPopupClose","level","onNewLevel","studentCurrentPoints","callback","get","id","then","res","console","log","data","redeemedPts","currentPts","totalPts","mazeLvl","quizPts","point","catch","failureCallback","handleComplete","event","preventDefault","studentID","currentPoints","totalPoints","parseInt","JSON","stringify","config","headers","put","points","ptsAwarded","eventID","post","window","alert","state","newLevel","showModalPopup"],"mappings":"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","sourcesContent":["import React, { Component, Fragment} from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Modal } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport jQuery from 'jquery';\r\n\r\nexport default class MazePopup extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showModal : false,\r\n            newLevel:false,\r\n            currentPts : 0,\r\n            totalPts : 0,\r\n            mazeLvl: 0,\r\n            \r\n        };\r\n    }\r\n    \r\n    // componentDidMount(){\r\n    //     // Get student's points data'\r\n      \r\n        // axios.get('https://ades-ca1-project.herokuapp.com/api/points/' + this.props.id)\r\n        // .then(res => {\r\n        //     this.setState({ currentPts : res.data[0].redeemedPts });\r\n        //     this.setState({ totalPts : res.data[0].totalPts});\r\n        //     this.setState({ mazeLvl : res.data[0].mazeLvl});\r\n        // })\r\n    // }\r\n\r\n\r\n\r\n\r\n\r\n    isShowModal = (status) => {\r\n        this.handleClose();\r\n        this.setState({ showModal : status});\r\n    }\r\n\r\n    handleClose = () => {\r\n         this.props.onPopupClose(false,this.props.level);\r\n        this.props.onNewLevel(true);\r\n    }\r\n\r\n  //to get the students current Lvl\r\n  studentCurrentPoints = (callback) => {\r\n    axios.get('http://ades-ca1-project.herokuapp.com/api/points/' + this.props.id)\r\n    .then(res => {\r\n        console.log( res.data[0].redeemedPts + \"res for redeemdedpoitns\")\r\n        var currentPts = res.data[0].redeemedPts ;\r\n        var  totalPts = res.data[0].totalPts;\r\n       var mazeLvl = res.data[0].mazeLvl;\r\n        const quizPts = this.props.point;\r\n        callback(currentPts, totalPts, mazeLvl, quizPts, this.props.id);\r\n    }).catch(failureCallback);\r\n    \r\n  }\r\n    handleComplete = event => {\r\n        // Store student's points\r\n        event.preventDefault(); \r\n        \r\n   this.studentCurrentPoints(function(currentPts, totalPts, mazeLvl, quizPts,studentID){\r\n          \r\n        const currentPoints = (currentPts + quizPts);\r\n        const totalPoints = (totalPts + quizPts);\r\n      \r\n         mazeLvl = (parseInt(mazeLvl) + 1);\r\n    \r\n        // Do the calculation\r\n        // this.setState({ currentPts : currentPoints});\r\n        // this.setState({ totalPts : totalPoints});\r\n        // this.setState({ mazeLvl : mazeLvl});\r\n        // Update student's table\r\n        const data = {\r\n            currentPts : currentPoints,\r\n            totalPts : totalPoints,\r\n            mazeLvl: mazeLvl\r\n        }\r\nconsole.log(JSON.stringify(data) + \"DATA SENT FOR PUT\")\r\n        const config = {\r\n            headers: {\r\n                'content-type':'application/json'\r\n            }\r\n        }\r\n\r\n        axios.put('http://ades-ca1-project.herokuapp.com/api/points/' + studentID, data, config)\r\n        .then(res => {\r\n            console.log(res);\r\n            console.log(res.data);\r\n        })\r\n\r\n        const points = {\r\n            ptsAwarded : quizPts,\r\n            eventID : 2\r\n        }\r\n\r\n        // Insert points history\r\n        axios.post('http://ades-ca1-project.herokuapp.com/api/ptsHistory/' + this.props.id, points, config)\r\n        .then(res => {\r\n            console.log(res);\r\n            console.log(res.data);\r\n            this.handleClose();\r\n            window.alert(\"Points redeemed successfully\");\r\n            //updating the state \r\n            \r\n            \r\n        })\r\n\r\n   })\r\n  \r\n\r\n    \r\n     \r\n\r\n    \r\n    }\r\n\r\n    render() {\r\n             \r\n        return (\r\n            <Fragment>  \r\n                <Modal show={this.props.showModalPopup} onHide={this.handleClose} id={this.props.level} \r\n                    size=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered>  \r\n                    <Modal.Header closeButton>  \r\n                        <Modal.Title id=\"sign-in-title\">  \r\n                            Level {this.props.level}\r\n                         </Modal.Title>  \r\n                    </Modal.Header>  \r\n                    <Modal.Body>  \r\n                        <hr />  \r\n                        <div className=\"Quiz\"> \r\n                        <div>Points : {this.props.point} </div>\r\n                        <Button onClick={this.handleComplete} >Complete</Button>\r\n                        </div>  \r\n                    </Modal.Body>  \r\n                </Modal >  \r\n            </Fragment >  \r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}