{"ast":null,"code":"import _classCallCheck from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var viewReward=/*#__PURE__*/function(_React$Component){_inherits(viewReward,_React$Component);var _super=_createSuper(viewReward);function viewReward(){var _this;_classCallCheck(this,viewReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],currentPts:0,rewardName:'',rewardPoints:0,url:'',studentID:1};_this.handleRedeem=function(event){// Get the data\nvar rewardID=event.target.getAttribute(\"data-index\");var ptsRequired=event.target.getAttribute(\"data-points\");console.log(\"rewardID = \"+rewardID);console.log(\"points = \"+ptsRequired);// Store student's points\nvar currentPts=_this.state.currentPts;// IF student have enough points to redeem\nif(currentPts>=ptsRequired){// Do the calculation\n_this.setState({currentPts:currentPts-ptsRequired});// Insert reward history\nvar IDs={studentID:_this.state.studentID,rewardID:rewardID};var config={headers:{'content-type':'application/json'}};axios.post('http://localhost:8081/api/rewardHistory',IDs,config).then(function(res){console.log(res);console.log(res.data);});// Update student's current points\nvar points={points:currentPts};axios.put('http://localhost:8081/api/point/'+_this.state.studentID,points,config).then(function(res){console.log(res);console.log(res.data);window.alert(\"Reward redeemed successfully\");});// ELSE student dont have enough points\n}else{// notifications\nwindow.alert(\"Insufficient points ! Work harder and earn more points !\");}};return _this;}_createClass(viewReward,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Get rewards data\n//axios.get('https://ades-ca1-heroku.herokuapp.com/api/rewards')\naxios.get('http://localhost:8081/api/rewards').then(function(res){_this2.setState({data:res.data});});// Get student's points data\n//axios.get('https://ades-ca1-heroku.herokuapp.com/api/points/' + studentID)\naxios.get('http://localhost:8081/api/points/'+this.state.studentID).then(function(res){_this2.setState({currentPts:res.data[0].redeemedPts});});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rewards\"}),/*#__PURE__*/_jsx(\"div\",{className:\"viewRewards\",children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.rewardName}),/*#__PURE__*/_jsx(\"td\",{children:item.ptsRequired}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.url,style:{height:200,width:200}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:_this3.handleRedeem,\"data-index\":item.rewardID,\"data-points\":item.ptsRequired,children:\"Redeem\"})})]},item.rewardID);})})]});}}]);return viewReward;}(React.Component);export{viewReward as default};","map":{"version":3,"sources":["C:/Users/jw/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/StudentReward.js"],"names":["React","axios","Link","Button","viewReward","state","data","currentPts","rewardName","rewardPoints","url","studentID","handleRedeem","event","rewardID","target","getAttribute","ptsRequired","console","log","setState","IDs","config","headers","post","then","res","points","put","window","alert","get","redeemedPts","map","item","height","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom' ;\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nexport default class viewReward extends React.Component {\r\n  state = {\r\n    data : [],\r\n    currentPts: 0,\r\n    rewardName: '',\r\n    rewardPoints: 0,\r\n    url: '',\r\n    studentID: 1,\r\n  }\r\n\r\n  componentDidMount(){\r\n    // Get rewards data\r\n    //axios.get('https://ades-ca1-heroku.herokuapp.com/api/rewards')\r\n    axios.get('http://localhost:8081/api/rewards')\r\n    .then(res => {\r\n        this.setState({ data : res.data });\r\n    })\r\n    \r\n    // Get student's points data\r\n    //axios.get('https://ades-ca1-heroku.herokuapp.com/api/points/' + studentID)\r\n    axios.get('http://localhost:8081/api/points/' + this.state.studentID)\r\n    .then(res => {\r\n        this.setState({ currentPts : res.data[0].redeemedPts });\r\n    })\r\n}\r\n\r\n  handleRedeem = event => {\r\n\r\n    // Get the data\r\n    const rewardID = event.target.getAttribute(\"data-index\");\r\n    const ptsRequired = event.target.getAttribute(\"data-points\");\r\n    console.log(\"rewardID = \" + rewardID);\r\n    console.log(\"points = \" + ptsRequired);\r\n\r\n    // Store student's points\r\n    const currentPts = this.state.currentPts;\r\n\r\n    // IF student have enough points to redeem\r\n    if(currentPts >= ptsRequired){\r\n\r\n      // Do the calculation\r\n      this.setState({currentPts : (currentPts - ptsRequired)});\r\n\r\n      // Insert reward history\r\n      const IDs = {\r\n        studentID : this.state.studentID,\r\n        rewardID : rewardID\r\n      }\r\n\r\n      const config = {\r\n        headers: {\r\n          'content-type':'application/json'\r\n        }\r\n      }\r\n\r\n      axios.post('http://localhost:8081/api/rewardHistory', IDs, config)\r\n      .then(res => {\r\n        console.log(res);\r\n        console.log(res.data);\r\n      })\r\n\r\n      // Update student's current points\r\n      const points = {\r\n        points : currentPts\r\n      }\r\n\r\n      axios.put('http://localhost:8081/api/point/' + this.state.studentID, points, config )\r\n      .then(res => {\r\n        console.log(res);\r\n        console.log(res.data);\r\n        window.alert(\"Reward redeemed successfully\");\r\n      })\r\n\r\n    // ELSE student dont have enough points\r\n    }else{\r\n      // notifications\r\n\r\n      window.alert(\"Insufficient points ! Work harder and earn more points !\");\r\n    }\r\n  \r\n  }\r\n\r\n  render() {\r\n      const data = this.state.data;\r\n    return (\r\n        <div>\r\n            <h1>Rewards</h1>\r\n            <div className=\"viewRewards\">\r\n            {data && data.map(item =>\r\n                        <tr key={item.rewardID}>\r\n                            <td>{item.rewardName}</td>\r\n                            <td>{item.ptsRequired}</td>\r\n                            <td><img src={item.url} style={{height: 200, width: 200}}></img></td>\r\n                            <td><Button onClick={this.handleRedeem} data-index={item.rewardID} data-points={item.ptsRequired}>Redeem</Button></td>\r\n                        </tr>\r\n                    )}\r\n            </div>\r\n      </div>\r\n      \r\n    )\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}