{"ast":null,"code":"import _classCallCheck from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import axios from'axios';import Form from'react-bootstrap/Form';import{Row,Col}from'react-bootstrap';import{getStorage,ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import'../css/badgemazeEdit.css';import{Modal}from'react-bootstrap';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditBadge=/*#__PURE__*/function(_React$Component){_inherits(EditBadge,_React$Component);var _super=_createSuper(EditBadge);function EditBadge(){var _this;_classCallCheck(this,EditBadge);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={showModal:false,data:[],name:'',requirements:'',pic_url:'',badgeClassID:''};_this.handleName=function(event){_this.setState({name:event.target.value});};_this.handleRequirement=function(event){_this.setState({requirements:event.target.value});};_this.handleURL=function(event){_this.setState({pic_url:event.target.files[0]});};_this.handleBadgeClassID=function(event){_this.setState({badgeClassID:event.target.value});};_this.handleSubmit=function(event){event.preventDefault();// file upload\nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.pic_url.name);var file=_this.state.pic_url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.pic_url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var bcID=document.getElementById(\"dropDown\");var bID=bcID.value;var badgeClassID=parseInt(bID);var badge={name:_this.state.name,requirements:_this.state.requirements,pic_url:downloadURL,badgeClassID:badgeClassID};console.log(\"BADGEEEE\"+JSON.stringify(badge));var config={headers:{'content-type':'application/json'}};var badgeID=parseInt(_this.props.badgeID);var baseUrl=\"https://ades-ca1-project.herokuapp.com/api\";console.log(badgeID);axios.put(\"\".concat(baseUrl,\"/editBadge/\").concat(badgeID),badge,config).then(function(res){console.log(res);console.log(res.data);window.location.replace('https://ades-ca1-project.herokuapp.com/badgesAdmin');});});};_this.handleClose=function(){_this.props.onPopupClose(false,_this.props.rewardID,'','','');};return _this;}_createClass(EditBadge,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{id:\"bodyEdit\",children:/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:this.props.showModalPopup,onHide:this.handleClose,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Badge\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"editBadge\",children:/*#__PURE__*/_jsx(Form,{onSubmit:this.handleSubmit,className:\"badgeForm\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:12,md:8,lg:4,children:/*#__PURE__*/_jsx(Form.Control,{placeholder:this.props.name,onChange:this.handleName,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:this.props.requirements,onChange:this.handleRequirement,required:true})}),/*#__PURE__*/_jsx(Col,{xs:12,md:5,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:this.handleURL})}),/*#__PURE__*/_jsx(Col,{xs:12,md:2,lg:2,children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Edit\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"badgeClassID\",onChange:this.handleBadgeClassID,id:\"dropDown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Air\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Water\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Fire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Geo\"})]})]})})})})]})})});}}]);return EditBadge;}(React.Component);export{EditBadge as default};","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/EditBadge.js"],"names":["React","Component","Fragment","axios","Form","Row","Col","getStorage","ref","uploadBytes","getDownloadURL","Modal","Button","EditBadge","state","showModal","data","name","requirements","pic_url","badgeClassID","handleName","event","setState","target","value","handleRequirement","handleURL","files","handleBadgeClassID","handleSubmit","preventDefault","storage","storageRef","file","metadata","contentType","type","then","downloadURL","console","log","bcID","document","getElementById","bID","parseInt","badge","JSON","stringify","config","headers","badgeID","props","baseUrl","put","res","window","location","replace","handleClose","onPopupClose","rewardID","showModalPopup"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport axios from 'axios';\nimport Form from 'react-bootstrap/Form';\nimport { Row, Col } from 'react-bootstrap';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport '../css/badgemazeEdit.css';\nimport { Modal } from 'react-bootstrap';\nimport Button from 'react-bootstrap/Button';\nexport default class EditBadge extends React.Component {\n\n    state = {\n        showModal: false,\n        data: [],\n        name: '',\n        requirements: '',\n        pic_url: '',\n        badgeClassID: ''\n    }\n\n\n\n    handleName = event => {\n        this.setState({ name: event.target.value });\n    }\n\n    handleRequirement = event => {\n        this.setState({ requirements: event.target.value });\n    }\n\n    handleURL = event => {\n        this.setState({ pic_url: event.target.files[0], });\n    }\n\n    handleBadgeClassID = event => {\n        this.setState({ badgeClassID: event.target.value });\n    }\n\n\n    handleSubmit = event => {\n        event.preventDefault();\n        // file upload\n        const storage = getStorage();\n        const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\n        var file = this.state.pic_url;\n        // Create file metadata including the content type\n        /** @type {any} */\n        const metadata = {\n            contentType: this.state.pic_url.type,\n        };\n\n        uploadBytes(storageRef, file, metadata);\n\n        getDownloadURL(storageRef).then((downloadURL) => {\n            console.log('File available at', downloadURL);\n\n            var bcID = document.getElementById(\"dropDown\");\n            var bID = bcID.value;\n            var badgeClassID = parseInt(bID);\n\n            const badge = {\n                name: this.state.name,\n                requirements: this.state.requirements,\n                pic_url: downloadURL,\n                badgeClassID: badgeClassID\n            };\n\n            console.log(\"BADGEEEE\" + JSON.stringify(badge))\n\n            const config = {\n                headers: {\n                    'content-type': 'application/json'\n                }\n            }\n\n            const badgeID = parseInt(this.props.badgeID);\n            const baseUrl = \"https://ades-ca1-project.herokuapp.com/api\";\n            console.log(badgeID);\n\n            axios.put(`${baseUrl}/editBadge/${badgeID}`, badge, config)\n                .then(res => {\n                    console.log(res);\n                    console.log(res.data);\n                    window.location.replace('https://ades-ca1-project.herokuapp.com/badgesAdmin')\n                })\n        });\n    }\n\n    handleClose = () => {\n        this.props.onPopupClose(false, this.props.rewardID, '', '', '');\n    }\n    render() {\n        return (\n            <div id=\"bodyEdit\">\n                <Fragment>\n                    <Modal show={this.props.showModalPopup} onHide={this.handleClose}\n                        size=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered>\n                        <Modal.Header closeButton>\n                            <Modal.Title>\n                                Edit Badge\n            </Modal.Title>\n                        </Modal.Header>\n                        <Modal.Body>\n                            <div className=\"editBadge\">\n                                <Form onSubmit={this.handleSubmit} className=\"badgeForm\">\n                                    <Row>\n                                        <Col xs={12} md={8} lg={4}>\n                                            <Form.Control placeholder={this.props.name} onChange={this.handleName} required />\n                                        </Col>\n                                        <Col xs={12} md={5} lg={3}>\n                                            <Form.Control type=\"number\" placeholder={this.props.requirements} onChange={this.handleRequirement} required />\n                                        </Col>\n                                        <Col xs={12} md={5} lg={3}>\n                                            <Form.Control type=\"file\" onChange={this.handleURL} />\n                                        </Col>\n                                        <Col xs={12} md={2} lg={2}>\n                                            <Button variant=\"primary\" type=\"submit\">Edit</Button>\n                                        </Col>\n                                        <select name=\"badgeClassID\" onChange={this.handleBadgeClassID} id=\"dropDown\">\n                                            <option value=\"1\">Air</option>\n                                            <option value=\"2\">Water</option>\n                                            <option value=\"3\">Fire</option>\n                                            <option value=\"4\">Geo</option>\n                                        </select>\n                                    </Row>\n                                </Form>\n                            </div>\n                        </Modal.Body>\n                    </Modal>\n                </Fragment>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}