{"ast":null,"code":"import _defineProperty from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _regeneratorRuntime from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{Component}from'react';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import{Button,Container,Row,Col,Sidebar,Nav,NavItem,Card,ListGroup}from'react-bootstrap';import{signOut}from\"firebase/auth\";import{auth}from'../firebase.js';import{withStyles}from'@material-ui/styles';import Slider from'@material-ui/core/Slider';import sample from'../logoLoading.webm';import'../App.css';import'../styling.css';import StudentNavigation from'./StudentNavigaton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles=function styles(theme){return{root:{// paddingTop: '100px',\nmarginTop:\"60px\",width:\"250px\",marginLeft:\"40px\"}};};var marks=[{value:0,label:''},{value:1,label:''},{value:2,label:''},{value:3,label:''},{value:4,label:''},{value:5,label:''}];var logout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return signOut(auth);case 2:window.location.replace(\"https://ades-ca1-project.herokuapp.com/quizment\");case 3:case\"end\":return _context.stop();}}},_callee);}));return function logout(){return _ref.apply(this,arguments);};}();var StudentDashboard=/*#__PURE__*/function(_React$Component){_inherits(StudentDashboard,_React$Component);var _super=_createSuper(StudentDashboard);function StudentDashboard(){var _this;_classCallCheck(this,StudentDashboard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],streaks:0,fullStreaks:0,totalPts:[],redeemedPts:[],name:[],showStreak:false,lastLoginData:[],currentLogin:new Date().getTime(),uid:'',id:0,display:'block',display2:'none'};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};return _this;}_createClass(StudentDashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;auth.onAuthStateChanged(function(user){if(user){_this2.setState({display:'none'});_this2.setState({display2:'block'});console.log(\"User is Signed IN \");_this2.setState({uid:user.uid});var config={headers:{'content-type':'application/json'}};axios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+_this2.state.uid,config).then(function(res){if(res.data.type===1){_this2.setState({id:res.data.studentID});// here are those\naxios.get('https://ades-ca1-project.herokuapp.com/api/students/streaks/'+_this2.state.id).then(function(res){console.log(\"number of streak \"+res.data[0].streaks);var streaks=res.data[0].streaks;_this2.setState({streaks:streaks});});axios.get('https://ades-ca1-project.herokuapp.com/api/students/points/'+_this2.state.id).then(function(res){console.log(\"number of streak \"+res.data[0].totalPts);console.log(\"number of streak \"+res.data[0].redeemedPts);var totalPts=res.data[0].totalPts;var redeemedPts=res.data[0].redeemedPts;var name=res.data[0].name;name=name.slice(0,name.indexOf(\"@\",0));_this2.setState({totalPts:totalPts});_this2.setState({redeemedPts:redeemedPts});_this2.setState({name:name});});axios.get('https://ades-ca1-project.herokuapp.com/api/students/lastLogin/'+_this2.state.id).then(function(res){console.log(\"LAST LOGIN \"+res.data[0].lastLogin);_this2.setState({lastLoginData:res.data[0].lastLogin});console.log(\"Current login stored: \"+_this2.state.currentLogin);console.log(\"Last login stored: \"+_this2.state.lastLoginData);var diffTime=_this2.state.currentLogin-_this2.state.lastLoginData;var streak=_this2.state.streaks;var config={headers:{'content-type':'application/json'}};var lastLog={lastLogin:_this2.state.currentLogin};if(diffTime>=28800000&&diffTime<=86400000){console.log(\"Yassss\");// AXIOS PUT STREAK + NEW LOGIN TIME\naxios.put('https://ades-ca1-project.herokuapp.com/api/students/lastLoginStreak/'+_this2.state.id,lastLog,config).then(function(res){console.log(\"RESULTS: \"+res);console.log(res);console.log(\"RESULT: \"+res.data);});axios.put('https://ades-ca1-project.herokuapp.com/api/students/updatePoints/'+_this2.state.id).then(function(res){console.log(\"RESULTS: \"+res);console.log(res);console.log(\"RESULT: \"+res.data);});}else if(diffTime>86400000){console.log(\"harooo\");axios.put('https://ades-ca1-project.herokuapp.com/api/students/lastLoginLostStreak/'+_this2.state.id,lastLog,config).then(function(res){console.log(\"RESULTS: \"+res);console.log(res);console.log(\"RESULT: \"+res.data);});}else{console.log(\"BYE\");axios.put('https://ades-ca1-project.herokuapp.com/api/students/lastLogin/'+_this2.state.id,lastLog,config).then(function(res){console.log(\"RESULTS: \"+res);console.log(res);console.log(\"RESULT: \"+res.data);});}});}else if(res.data.type===2){window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/teacherDashboard');}else{window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});}else{console.log(\"THERE IS NO USER\");signOut(auth);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});axios.get('https://ades-ca1-project.herokuapp.com/api/students/topStudents/').then(function(res){_this2.setState({data:res.data});});}},{key:\"render\",value:function render(){var data=this.state.data;var classes=this.props.classes;return/*#__PURE__*/_jsxs(Container,{className:\"totalContainer\",fluid:true,children:[/*#__PURE__*/_jsx(StudentNavigation,{className:\"navBar\"}),/*#__PURE__*/_jsx(\"video\",{style:{display:this.state.display,width:'100%',height:'auto'},className:\"videoLoader\",autoPlay:true,loop:true,muted:true,children:/*#__PURE__*/_jsx(\"source\",{src:sample,type:\"video/webm\"})}),/*#__PURE__*/_jsx(\"div\",{style:{display:this.state.display2},children:/*#__PURE__*/_jsxs(Row,{xs:1,className:\"row\",children:[/*#__PURE__*/_jsxs(Col,{md:4,className:\"box2 column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Assignments To Do:\"}),/*#__PURE__*/_jsxs(Card,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Math\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Integration Homework 2\"}),/*#__PURE__*/_jsx(Card.Text,{children:\"Learn how to do Integration\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",children:\"Do Now\"})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Math\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Integration Homework 3\"}),/*#__PURE__*/_jsx(Card.Text,{children:\"Learn how to do Integration part 3\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",children:\"Do Now\"})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Math\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Integration Homework 2\"}),/*#__PURE__*/_jsx(Card.Text,{children:\"Learn how to do Integration\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",children:\"Do Now\"})]})]})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\" box3 column\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Row,{className:\"sliderStreak\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Slider,{className:classes.root,\"aria-label\":\"Always visible\",value:this.state.streaks,step:1,min:0,max:5,marks:marks,valueLabelDisplay:\"off\"})}),/*#__PURE__*/_jsx(Col,{className:\"streakNum\",children:/*#__PURE__*/_jsxs(\"h6\",{children:[\"Streaks: \",this.state.streaks,\" \"]})})]})}),/*#__PURE__*/_jsxs(Card,{className:\"leaderBoardBox\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"leaderBoardTitle\",children:\"Leaderboard\"}),/*#__PURE__*/_jsx(Card.Body,{children:data&&data.map(function(item){return/*#__PURE__*/_jsx(Card,{className:\"m-2 \",style:{width:'16rem'},children:/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"leaderBoardItem\",children:[/*#__PURE__*/_jsx(Col,{children:item.name}),/*#__PURE__*/_jsx(Col,{children:item.totalPts})]})})})},item.studentID);})})]})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"c1 column\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-5 mb-5\",children:this.state.name}),/*#__PURE__*/_jsx(Card,{className:\"mb-3 points\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"cardContext\",children:\"Total Points:\"}),/*#__PURE__*/_jsx(Card.Text,{className:\"cardContext\",children:this.state.totalPts})]})}),/*#__PURE__*/_jsx(Card,{className:\"mb-3 points\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{className:\"cardContext\",children:\"Redeemable Points\"}),/*#__PURE__*/_jsx(Card.Text,{className:\"cardContext\",children:this.state.redeemedPts})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"box\",children:/*#__PURE__*/_jsx(\"hr\",{})})]})]})})]});}}]);return StudentDashboard;}(React.Component);export default withStyles(styles)(StudentDashboard);","map":{"version":3,"sources":["C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/StudentDashboard.js"],"names":["React","Component","axios","useNavigate","Link","Button","Container","Row","Col","Sidebar","Nav","NavItem","Card","ListGroup","signOut","auth","withStyles","Slider","sample","StudentNavigation","styles","theme","root","marginTop","width","marginLeft","marks","value","label","logout","window","location","replace","StudentDashboard","state","data","streaks","fullStreaks","totalPts","redeemedPts","name","showStreak","lastLoginData","currentLogin","Date","getTime","uid","id","display","display2","handleChange","e","setState","target","onAuthStateChanged","user","console","log","config","headers","get","then","res","type","studentID","slice","indexOf","lastLogin","diffTime","streak","lastLog","put","classes","props","height","map","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { Button, Container, Row, Col, Sidebar, Nav, NavItem, Card, ListGroup } from 'react-bootstrap';\r\nimport { signOut } from \"firebase/auth\";\r\nimport { auth } from '../firebase.js';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport sample from '../logoLoading.webm';\r\nimport '../App.css';\r\nimport '../styling.css'\r\nimport StudentNavigation from './StudentNavigaton';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        // paddingTop: '100px',\r\n        marginTop: \"60px\",\r\n        width: \"250px\",\r\n        marginLeft: \"40px\",\r\n    },\r\n});\r\n\r\nconst marks = [\r\n    {\r\n        value: 0,\r\n        label: '',\r\n    },\r\n    {\r\n        value: 1,\r\n        label: '',\r\n    },\r\n    {\r\n        value: 2,\r\n        label: '',\r\n    },\r\n    {\r\n        value: 3,\r\n        label: '',\r\n    },\r\n    {\r\n        value: 4,\r\n        label: '',\r\n    },\r\n    {\r\n        value: 5,\r\n        label: '',\r\n    }\r\n];\r\n\r\nconst logout = async () => {\r\n    await signOut(auth);\r\n    window.location.replace(\"https://ades-ca1-project.herokuapp.com/quizment\");\r\n};\r\n\r\n\r\nclass StudentDashboard extends React.Component {\r\n    state = {\r\n        data: [],\r\n        streaks: 0,\r\n        fullStreaks: 0,\r\n        totalPts: [],\r\n        redeemedPts: [],\r\n        name: [],\r\n        showStreak: false,\r\n        lastLoginData: [],\r\n        currentLogin: new Date().getTime(),\r\n        uid: '',\r\n        id: 0,\r\n        display: 'block',\r\n        display2: 'none'\r\n    }\r\n\r\n    componentDidMount() {\r\n        auth.onAuthStateChanged((user) => {\r\n            if (user) {\r\n                this.setState({ display: 'none' });\r\n                this.setState({ display2: 'block' });\r\n                console.log(\"User is Signed IN \");\r\n                this.setState({ uid: user.uid });\r\n                const config = {\r\n                    headers: {\r\n                        'content-type': 'application/json'\r\n                    }\r\n                }\r\n\r\n                axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + this.state.uid, config)\r\n                    .then(res => {\r\n                        if (res.data.type === 1) {\r\n                            this.setState({ id: res.data.studentID })\r\n                            // here are those\r\n                            axios.get('https://ades-ca1-project.herokuapp.com/api/students/streaks/' + this.state.id)\r\n                                .then(res => {\r\n                                    console.log(\"number of streak \" + res.data[0].streaks)\r\n                                    const streaks = res.data[0].streaks;\r\n                                    this.setState({ streaks });\r\n                                })\r\n\r\n                            axios.get('https://ades-ca1-project.herokuapp.com/api/students/points/' + this.state.id)\r\n                                .then(res => {\r\n                                    console.log(\"number of streak \" + res.data[0].totalPts)\r\n                                    console.log(\"number of streak \" + res.data[0].redeemedPts)\r\n                                    const totalPts = res.data[0].totalPts;\r\n                                    const redeemedPts = res.data[0].redeemedPts;\r\n                                    var name = res.data[0].name;\r\n                                    name = name.slice(0, name.indexOf(\"@\", 0));\r\n                                    this.setState({ totalPts });\r\n                                    this.setState({ redeemedPts });\r\n                                    this.setState({ name });\r\n                                })\r\n\r\n                            axios.get('https://ades-ca1-project.herokuapp.com/api/students/lastLogin/' + this.state.id)\r\n                                .then(res => {\r\n                                    console.log(\"LAST LOGIN \" + res.data[0].lastLogin)\r\n                                    this.setState({ lastLoginData: res.data[0].lastLogin })\r\n                                    console.log(\"Current login stored: \" + this.state.currentLogin)\r\n                                    console.log(\"Last login stored: \" + this.state.lastLoginData)\r\n                                    var diffTime = this.state.currentLogin - this.state.lastLoginData;\r\n                                    var streak = this.state.streaks;\r\n                                    const config = {\r\n                                        headers: {\r\n                                            'content-type': 'application/json'\r\n                                        }\r\n                                    }\r\n                                    const lastLog = {\r\n                                        lastLogin: this.state.currentLogin\r\n                                    }\r\n                                    if (diffTime >= 28800000 && diffTime <= 86400000) {\r\n                                        console.log(\"Yassss\");\r\n                                        // AXIOS PUT STREAK + NEW LOGIN TIME\r\n                                        axios.put('https://ades-ca1-project.herokuapp.com/api/students/lastLoginStreak/' + this.state.id, lastLog, config)\r\n                                            .then(res => {\r\n                                                console.log(\"RESULTS: \" + res);\r\n                                                console.log(res);\r\n                                                console.log(\"RESULT: \" + res.data);\r\n                                            })\r\n\r\n                                        axios.put('https://ades-ca1-project.herokuapp.com/api/students/updatePoints/' + this.state.id)\r\n                                            .then(res => {\r\n                                                console.log(\"RESULTS: \" + res);\r\n                                                console.log(res);\r\n                                                console.log(\"RESULT: \" + res.data);\r\n                                            })\r\n                                    } else if (diffTime > 86400000) {\r\n                                        console.log(\"harooo\");\r\n                                        axios.put('https://ades-ca1-project.herokuapp.com/api/students/lastLoginLostStreak/' + this.state.id, lastLog, config)\r\n                                            .then(res => {\r\n                                                console.log(\"RESULTS: \" + res);\r\n                                                console.log(res);\r\n                                                console.log(\"RESULT: \" + res.data);\r\n                                            })\r\n                                    } else {\r\n                                        console.log(\"BYE\");\r\n                                        axios.put('https://ades-ca1-project.herokuapp.com/api/students/lastLogin/' + this.state.id, lastLog, config)\r\n                                            .then(res => {\r\n                                                console.log(\"RESULTS: \" + res);\r\n                                                console.log(res);\r\n                                                console.log(\"RESULT: \" + res.data);\r\n                                            })\r\n                                    }\r\n                                })\r\n                        } else if (res.data.type === 2) {\r\n                            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/teacherDashboard');\r\n                        } else {\r\n                            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n                        }\r\n                    })\r\n            } else {\r\n                console.log(\"THERE IS NO USER\");\r\n                signOut(auth);\r\n                window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n            }\r\n        });\r\n\r\n        axios.get('https://ades-ca1-project.herokuapp.com/api/students/topStudents/')\r\n            .then(res => {\r\n                this.setState({ data: res.data });\r\n            })\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const data = this.state.data;\r\n        const { classes } = this.props;\r\n        return (\r\n            \r\n            <Container className=\"totalContainer\" fluid>\r\n                 <StudentNavigation className=\"navBar\">\r\n                </StudentNavigation>\r\n                <video style={{ display: this.state.display, width: '100%', height: 'auto' }} className='videoLoader' autoPlay loop muted>\r\n                    <source src={sample} type='video/webm' />\r\n                </video>\r\n                <div style={{ display: this.state.display2 }}>\r\n                    <Row xs={1} className=\"row\">\r\n                       \r\n                        <Col md={4} className=\"box2 column\">\r\n                            <h4>Assignments To Do:</h4>\r\n                            <Card className=\"mt-3\">\r\n                                <Card.Header>Math</Card.Header>\r\n                                <Card.Body>\r\n                                    <Card.Title>Integration Homework 2</Card.Title>\r\n                                    <Card.Text>\r\n                                        Learn how to do Integration\r\n                                </Card.Text>\r\n                                    <Button variant=\"danger\">Do Now</Button>\r\n                                </Card.Body>\r\n                            </Card>\r\n                            <Card className=\"mt-3\">\r\n                                <Card.Header>Math</Card.Header>\r\n                                <Card.Body>\r\n                                    <Card.Title>Integration Homework 3</Card.Title>\r\n                                    <Card.Text>\r\n                                        Learn how to do Integration part 3\r\n                                </Card.Text>\r\n                                    <Button variant=\"danger\">Do Now</Button>\r\n                                </Card.Body>\r\n                            </Card>\r\n                            <Card className=\"mt-3\">\r\n                                <Card.Header>Math</Card.Header>\r\n                                <Card.Body>\r\n                                    <Card.Title>Integration Homework 2</Card.Title>\r\n                                    <Card.Text>\r\n                                        Learn how to do Integration\r\n                                </Card.Text>\r\n                                    <Button variant=\"danger\">Do Now</Button>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                        <Col md={3} className=\" box3 column\">\r\n                            <Col>\r\n                                <Row className=\"sliderStreak\">\r\n                                    <Col>\r\n                                        <Slider\r\n                                            className={classes.root}\r\n                                            aria-label=\"Always visible\"\r\n                                            value={this.state.streaks}\r\n                                            step={1}\r\n                                            min={0}\r\n                                            max={5}\r\n                                            marks={marks}\r\n                                            valueLabelDisplay=\"off\"\r\n                                        />\r\n                                    </Col>\r\n                                    <Col className=\"streakNum\">\r\n                                        <h6>Streaks: {this.state.streaks} </h6>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                            <Card className=\"leaderBoardBox\"  >\r\n                                <Card.Header className=\"leaderBoardTitle\">\r\n                                    Leaderboard\r\n                            </Card.Header>\r\n                                <Card.Body>\r\n                                    {data && data.map(item =>\r\n                                        <Card className=\"m-2 \" style={{ width: '16rem' }} key={item.studentID}>\r\n                                            <ListGroup variant=\"flush\" >\r\n                                                <ListGroup.Item>\r\n                                                    <Row className=\"leaderBoardItem\">\r\n                                                        <Col>\r\n                                                            {item.name}\r\n                                                        </Col>\r\n                                                        <Col>\r\n                                                            {item.totalPts}\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </ListGroup.Item>\r\n                                            </ListGroup>\r\n                                        </Card>\r\n                                    )}\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                         <Col md={3} className=\"c1 column\">\r\n                            <h4 className=\"mt-5 mb-5\">{this.state.name}</h4>\r\n                            <Card className=\"mb-3 points\">\r\n                                <Card.Body>\r\n                                    <Card.Title className=\"cardContext\">Total Points:</Card.Title>\r\n                                    <Card.Text className=\"cardContext\">\r\n                                        {this.state.totalPts}\r\n                                    </Card.Text>\r\n                                </Card.Body>\r\n                            </Card>\r\n                            <Card className=\"mb-3 points\">\r\n                                <Card.Body>\r\n                                    <Card.Title className=\"cardContext\">Redeemable Points</Card.Title>\r\n                                    <Card.Text className=\"cardContext\">\r\n                                        {this.state.redeemedPts}\r\n                                    </Card.Text>\r\n                                </Card.Body>\r\n                            </Card>\r\n                            <div className=\"box\">\r\n                                <hr />\r\n                               \r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nStudentDashboard.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(StudentDashboard);"]},"metadata":{},"sourceType":"module"}