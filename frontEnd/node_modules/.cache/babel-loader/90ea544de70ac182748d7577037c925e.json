{"ast":null,"code":"import _classCallCheck from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{store}from'react-notifications-component';import{Link}from'react-router-dom';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var viewReward=/*#__PURE__*/function(_React$Component){_inherits(viewReward,_React$Component);var _super=_createSuper(viewReward);function viewReward(){var _this;_classCallCheck(this,viewReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],currentPts:0,rewardName:'',rewardPoints:0,url:'',studentID:1};_this.handleRedeem=function(event){// Get the data\nvar rewardID=event.target.getAttribute(\"data-index\");var ptsRequired=event.target.getAttribute(\"data-points\");var rewardName=event.target.getAttribute(\"data-name\");console.log(\"rewardID = \"+rewardID);console.log(\"rewardName = \"+rewardName);console.log(\"points = \"+ptsRequired);// Store student's points\nvar currentPts=_this.state.currentPts;// IF student have enough points to redeem\nif(currentPts>=ptsRequired){// Do the calculation\n_this.setState({currentPts:currentPts-ptsRequired});// Insert reward history\nvar IDs={studentID:_this.state.studentID,rewardID:rewardID};var config={headers:{'content-type':'application/json'}};axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewardHistory',IDs,config).then(function(res){console.log(res);console.log(res.data);});// Update student's current points\nvar points={points:currentPts};axios.put('https://ades-ca1-heroku.herokuapp.com/api/point/'+_this.state.studentID,points,config).then(function(res){console.log(res);console.log(res.data);_this.notiRedeemSuccess(rewardName);window.alert(\"Reward redeemed successfully\");});// ELSE student dont have enough points\n}else{_this.notifRedeemFail();window.alert(\"Insufficient points ! Work harder and earn more points !\");}};return _this;}_createClass(viewReward,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Get all rewards data\naxios.get('https://ades-ca1-heroku.herokuapp.com/api/rewards').then(function(res){_this2.setState({data:res.data});});// Get student's points data\naxios.get('https://ades-ca1-heroku.herokuapp.com/api/points/'+this.state.studentID).then(function(res){_this2.setState({currentPts:res.data[0].redeemedPts});});}},{key:\"notiRedeemSuccess\",value:function notiRedeemSuccess(rewardName){store.addNotification({title:\"Success\",message:\"Congratulations! You've successfully redeemed \"+rewardName+\" !\",type:\"success\",insert:\"top\",container:\"top-center\",animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:2000},dismissable:{click:true}});}},{key:\"notifRedeemFail\",value:function notifRedeemFail(){store.addNotification({title:\"Error\",message:\"You've insufficient points to redeem this reward. Work harder!\",type:\"danger\",insert:\"top\",container:\"top-center\",animationIn:[\"animated\",\"bounceIn\"],animationOut:[\"animated\",\"bounceOut\"],dismiss:{duration:2000},dismissable:{click:true}});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Rewards\"}),/*#__PURE__*/_jsx(\"div\",{className:\"viewRewards\",children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.rewardName}),/*#__PURE__*/_jsx(\"td\",{children:item.ptsRequired}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.url,style:{height:200,width:200}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:_this3.handleRedeem,\"data-index\":item.rewardID,\"data-name\":item.rewardName,\"data-points\":item.ptsRequired,children:\"Redeem\"})})]},item.rewardID);})})]});}}]);return viewReward;}(React.Component);export{viewReward as default};","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/StudentReward.js"],"names":["React","axios","store","Link","Button","viewReward","state","data","currentPts","rewardName","rewardPoints","url","studentID","handleRedeem","event","rewardID","target","getAttribute","ptsRequired","console","log","setState","IDs","config","headers","post","then","res","points","put","notiRedeemSuccess","window","alert","notifRedeemFail","get","redeemedPts","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","dismissable","click","map","item","height","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { store } from 'react-notifications-component';\nimport { Link } from 'react-router-dom' ;\nimport Button from 'react-bootstrap/Button';\n\nexport default class viewReward extends React.Component {\n  state = {\n    data : [],\n    currentPts: 0,\n    rewardName: '',\n    rewardPoints: 0,\n    url: '',\n    studentID: 1,\n  }\n\n  componentDidMount(){\n    // Get all rewards data\n    axios.get('https://ades-ca1-heroku.herokuapp.com/api/rewards')\n    .then(res => {\n        this.setState({ data : res.data });\n    })\n    \n    // Get student's points data\n    axios.get('https://ades-ca1-heroku.herokuapp.com/api/points/' + this.state.studentID)\n    .then(res => {\n        this.setState({ currentPts : res.data[0].redeemedPts });\n    })\n}\n\n  notiRedeemSuccess(rewardName){\n    store.addNotification({\n      title:\"Success\",\n      message:\"Congratulations! You've successfully redeemed \" + rewardName + \" !\",\n      type:\"success\",\n      insert:\"top\",\n      container:\"top-center\",\n      animationIn:[\"animated\",\"fadeIn\"],\n      animationOut:[\"animated\",\"fadeOut\"],\n      dismiss: {duration:2000},\n      dismissable: {click:true}\n    });\n  }  \n\n  notifRedeemFail(){\n    store.addNotification({\n      title:\"Error\",\n      message:\"You've insufficient points to redeem this reward. Work harder!\",\n      type:\"danger\",\n      insert:\"top\",\n      container:\"top-center\",\n      animationIn:[\"animated\",\"bounceIn\"],\n      animationOut:[\"animated\",\"bounceOut\"],\n      dismiss: {duration:2000},\n      dismissable: {click:true}\n    });\n  }  \n\n  handleRedeem = event => {\n\n    // Get the data\n    const rewardID = event.target.getAttribute(\"data-index\");\n    const ptsRequired = event.target.getAttribute(\"data-points\");\n    const rewardName = event.target.getAttribute(\"data-name\");\n    console.log(\"rewardID = \" + rewardID);\n    console.log(\"rewardName = \" + rewardName);\n    console.log(\"points = \" + ptsRequired);\n\n    // Store student's points\n    const currentPts = this.state.currentPts;\n\n    // IF student have enough points to redeem\n    if(currentPts >= ptsRequired){\n\n      // Do the calculation\n      this.setState({currentPts : (currentPts - ptsRequired)});\n\n      // Insert reward history\n      const IDs = {\n        studentID : this.state.studentID,\n        rewardID : rewardID\n      }\n\n      const config = {\n        headers: {\n          'content-type':'application/json'\n        }\n      }\n\n      axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewardHistory', IDs, config)\n      .then(res => {\n        console.log(res);\n        console.log(res.data);\n      })\n\n      // Update student's current points\n      const points = {\n        points : currentPts\n      }\n\n      axios.put('https://ades-ca1-heroku.herokuapp.com/api/point/' + this.state.studentID, points, config )\n      .then(res => {\n        console.log(res);\n        console.log(res.data);\n        this.notiRedeemSuccess(rewardName);\n        window.alert(\"Reward redeemed successfully\");\n      })\n\n    // ELSE student dont have enough points\n    }else{\n      this.notifRedeemFail();\n      window.alert(\"Insufficient points ! Work harder and earn more points !\");\n    }\n  \n  }\n\n  render() {\n      const data = this.state.data;\n    return (\n        <div>\n            <h1>Rewards</h1>\n            <div className=\"viewRewards\">\n            {data && data.map(item =>\n                        <tr key={item.rewardID}>\n                            <td>{item.rewardName}</td>\n                            <td>{item.ptsRequired}</td>\n                            <td><img src={item.url} style={{height: 200, width: 200}}></img></td>\n                            <td><Button onClick={this.handleRedeem} data-index={item.rewardID} data-name={item.rewardName} data-points={item.ptsRequired}>Redeem</Button></td>\n                        </tr>\n                    )}\n            </div>\n      </div>\n      \n    )\n}\n}"]},"metadata":{},"sourceType":"module"}