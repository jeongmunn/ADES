{"ast":null,"code":"import _classCallCheck from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import{getStorage,ref,uploadBytes,getDownloadURL}from'firebase/storage';import Button from'react-bootstrap/Button';import'../css/rewardAdmin.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var viewReward=/*#__PURE__*/function(_React$Component){_inherits(viewReward,_React$Component);var _super=_createSuper(viewReward);function viewReward(){var _this;_classCallCheck(this,viewReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],rewardName:'',rewardPoints:'',url:''};_this.handleDelete=function(event){var id=event.target.id;axios.delete('http://localhost:8081/api/rewards/'+id).then(function(res){window.alert(\"Reward deleted successfully\");window.location.reload();});};_this.handleName=function(event){_this.setState({rewardName:event.target.value});};_this.handlePoints=function(event){_this.setState({rewardPoints:event.target.value});};_this.handleURL=function(event){_this.setState({url:event.target.files[0]});};_this.handleSubmit=function(event){event.preventDefault();// file upload\n// packing data    \nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.url.name);var file=_this.state.url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var reward={rewardName:_this.state.rewardName,ptsRequired:_this.state.rewardPoints,url:downloadURL};console.log(\"reward\"+JSON.stringify(reward));var config={headers:{'content-type':'application/json'}};//axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewards', reward, config )\naxios.post('http://localhost:8081/api/rewards',reward,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();});});};return _this;}_createClass(viewReward,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://localhost:8081/api/rewards').then(function(res){_this2.setState({data:res.data});});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;return/*#__PURE__*/_jsx(\"div\",{className:\"rewardAdmin\",id:\"rewardAdmin\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"addReward\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Reward Administration\"}),/*#__PURE__*/_jsx(\"div\",{id:\"divForm\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,id:\"form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Reward Name :\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rewardName\",onChange:this.handleName})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Points Required :\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"ptsRequired\",onChange:this.handlePoints})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Picture URL :\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"url\",onChange:this.handleURL})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Add\"})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"viewRewards\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Points\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Picture\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit?\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete?\"})]}),data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.rewardName}),/*#__PURE__*/_jsx(\"td\",{children:item.ptsRequired}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.url,style:{height:230,width:230}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-outline-warning\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-outline-danger\",id:item.rewardID,onClick:_this3.handleDelete,children:\"Delete\"})})]},item.rewardID);})]})})]})});}}]);return viewReward;}(React.Component);export{viewReward as default};","map":{"version":3,"sources":["C:/Users/jw/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/RewardAdmin.js"],"names":["React","axios","Link","getStorage","ref","uploadBytes","getDownloadURL","Button","viewReward","state","data","rewardName","rewardPoints","url","handleDelete","event","id","target","delete","then","res","window","alert","location","reload","handleName","setState","value","handlePoints","handleURL","files","handleSubmit","preventDefault","storage","storageRef","name","file","metadata","contentType","type","downloadURL","console","log","reward","ptsRequired","JSON","stringify","config","headers","post","get","map","item","height","width","rewardID","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport Button from 'react-bootstrap/Button';\r\nimport '../css/rewardAdmin.css';\r\n\r\nexport default class viewReward extends React.Component {\r\n    state = {\r\n        data: [],\r\n        rewardName: '',\r\n        rewardPoints: '',\r\n        url: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('http://localhost:8081/api/rewards')\r\n            .then(res => {\r\n                this.setState({ data: res.data });\r\n            })\r\n    }\r\n\r\n    handleDelete = event => {\r\n        const id = event.target.id;\r\n        axios.delete('http://localhost:8081/api/rewards/' + id)\r\n            .then(res => {\r\n                window.alert(\"Reward deleted successfully\");\r\n                window.location.reload();\r\n            })\r\n    }\r\n\r\n    handleName = event => {\r\n        this.setState({ rewardName: event.target.value });\r\n    }\r\n\r\n    handlePoints = event => {\r\n        this.setState({ rewardPoints: event.target.value });\r\n    }\r\n\r\n    handleURL = event => {\r\n        this.setState({ url: event.target.files[0], });\r\n    }\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        // file upload\r\n        // packing data    \r\n        const storage = getStorage();\r\n        const storageRef = ref(storage, 'img/' + this.state.url.name);\r\n        var file = this.state.url;\r\n        // Create file metadata including the content type\r\n        /** @type {any} */\r\n        const metadata = {\r\n            contentType: this.state.url.type,\r\n        };\r\n        uploadBytes(storageRef, file, metadata);\r\n\r\n        getDownloadURL(storageRef).then((downloadURL) => {\r\n            console.log('File available at', downloadURL);\r\n\r\n            const reward = {\r\n                rewardName: this.state.rewardName,\r\n                ptsRequired: this.state.rewardPoints,\r\n                url: downloadURL\r\n            };\r\n            console.log(\"reward\" + JSON.stringify(reward))\r\n\r\n            const config = {\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n            }\r\n\r\n            //axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewards', reward, config )\r\n            axios.post('http://localhost:8081/api/rewards', reward, config)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    console.log(res.data);\r\n                    window.location.reload();\r\n                })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const data = this.state.data;\r\n        return (\r\n            <div className=\"rewardAdmin\" id=\"rewardAdmin\">\r\n                <div id=\"addReward\">\r\n                    <h1>Reward Administration</h1>\r\n                    <div id=\"divForm\">\r\n                        {/* <h2>Add Reward</h2> */}\r\n                        <form onSubmit={this.handleSubmit} id=\"form\">\r\n                            <label>\r\n                                Reward Name :\r\n                                <input type=\"text\" name=\"rewardName\" onChange={this.handleName} />\r\n                            </label>\r\n                            <label>\r\n                                Points Required :\r\n                                <input type=\"number\" name=\"ptsRequired\" onChange={this.handlePoints} />\r\n                            </label>\r\n                            <label>\r\n                                Picture URL :\r\n                                <input type=\"file\" name=\"url\" onChange={this.handleURL} />\r\n                            </label>\r\n                            <Button type=\"submit\">Add</Button>\r\n                        </form>\r\n                    </div>\r\n                    <div id=\"viewRewards\">\r\n                        {/* <h2>View Rewards</h2> */}\r\n                        <table class=\"table\">\r\n                            <tr>\r\n                                <th>Name</th>\r\n                                <th>Points</th>\r\n                                <th>Picture</th>\r\n                                <th>Edit?</th>\r\n                                <th>Delete?</th>\r\n                            </tr>\r\n                            {data && data.map(item =>\r\n                                <tr key={item.rewardID}>\r\n                                    <td>{item.rewardName}</td>\r\n                                    <td>{item.ptsRequired}</td>\r\n                                    <td><img src={item.url} style={{ height: 230, width: 230 }}></img></td>\r\n                                    <td><button type=\"button\" class=\"btn btn-outline-warning\">Edit</button></td>\r\n                                    <td><button type=\"button\" class=\"btn btn-outline-danger\" id={item.rewardID} onClick={this.handleDelete}>Delete</button></td>\r\n                                </tr>\r\n                            )}\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}