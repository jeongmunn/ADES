{"ast":null,"code":"import _classCallCheck from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import{getStorage,ref,uploadBytes,getDownloadURL}from'firebase/storage';import Button from'react-bootstrap/Button';import'../css/rewardAdmin.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var viewReward=/*#__PURE__*/function(_React$Component){_inherits(viewReward,_React$Component);var _super=_createSuper(viewReward);function viewReward(){var _this;_classCallCheck(this,viewReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],rewardName:'',rewardPoints:'',url:''};_this.handleDelete=function(event){var id=event.target.id;axios.delete('http://localhost:8081/api/rewards/'+id).then(function(res){window.alert(\"Reward deleted successfully\");window.location.reload();});};_this.handleName=function(event){_this.setState({rewardName:event.target.value});};_this.handlePoints=function(event){_this.setState({rewardPoints:event.target.value});};_this.handleURL=function(event){_this.setState({url:event.target.files[0]});};_this.handleSubmit=function(event){event.preventDefault();// file upload\n// packing data    \nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.url.name);var file=_this.state.url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var reward={rewardName:_this.state.rewardName,ptsRequired:_this.state.rewardPoints,url:downloadURL};console.log(\"reward\"+JSON.stringify(reward));var config={headers:{'content-type':'application/json'}};//axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewards', reward, config )\naxios.post('http://localhost:8081/api/rewards',reward,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();});});};return _this;}_createClass(viewReward,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//axios.get('https://ades-ca1-heroku.herokuapp.com/api/rewards')\naxios.get('http://localhost:8081/api/rewards').then(function(res){_this2.setState({data:res.data});});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;return/*#__PURE__*/_jsx(\"div\",{id:\"body\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"div\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontFamily:\"san-serif\",color:'blue'},children:\"Reward Administration\"}),/*#__PURE__*/_jsx(\"div\",{className:\"addReward\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"divForm\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Reward\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,id:\"form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Reward Name :\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rewardName\",onChange:this.handleName})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Points Required :\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"ptsRequired\",onChange:this.handlePoints})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Picture URL :\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"url\",onChange:this.handleURL})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewRewards\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"View Rewards\"}),/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Reward Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Points\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Picture\"})]}),data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.rewardName}),/*#__PURE__*/_jsx(\"td\",{children:item.ptsRequired}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.url,style:{height:200,width:200}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{id:item.rewardID,onClick:_this3.handleDelete,children:\"Delete\"})})]},item.rewardID);})]})]})]})});}}]);return viewReward;}(React.Component);export{viewReward as default};","map":{"version":3,"sources":["C:/Users/jw/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/RewardAdmin.js"],"names":["React","axios","Link","getStorage","ref","uploadBytes","getDownloadURL","Button","viewReward","state","data","rewardName","rewardPoints","url","handleDelete","event","id","target","delete","then","res","window","alert","location","reload","handleName","setState","value","handlePoints","handleURL","files","handleSubmit","preventDefault","storage","storageRef","name","file","metadata","contentType","type","downloadURL","console","log","reward","ptsRequired","JSON","stringify","config","headers","post","get","fontFamily","color","map","item","height","width","rewardID","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom' ;\r\nimport {getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport Button from 'react-bootstrap/Button';\r\nimport '../css/rewardAdmin.css';\r\n\r\nexport default class viewReward extends React.Component {\r\n  state = {\r\n    data : [],\r\n    rewardName: '',\r\n    rewardPoints: '',\r\n    url: ''\r\n  }\r\n\r\n  componentDidMount(){\r\n    //axios.get('https://ades-ca1-heroku.herokuapp.com/api/rewards')\r\n    axios.get('http://localhost:8081/api/rewards')\r\n    .then(res => {\r\n        this.setState({ data : res.data });\r\n    })\r\n}\r\n\r\n  handleDelete = event => {\r\n    const id = event.target.id;\r\n    axios.delete('http://localhost:8081/api/rewards/' + id)\r\n    .then(res => {\r\n        window.alert(\"Reward deleted successfully\");\r\n        window.location.reload();\r\n    })\r\n  }\r\n\r\n  handleName = event => {\r\n    this.setState({ rewardName : event.target.value });\r\n  }\r\n\r\n  handlePoints = event => {\r\n    this.setState({ rewardPoints : event.target.value });\r\n  }\r\n\r\n  handleURL = event => {\r\n    this.setState({ url : event.target.files[0], });\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    // file upload\r\n    // packing data    \r\n    const storage = getStorage();\r\n    const storageRef = ref(storage, 'img/' + this.state.url.name);\r\n    var file = this.state.url;\r\n    // Create file metadata including the content type\r\n    /** @type {any} */\r\n    const metadata = {\r\n        contentType: this.state.url.type,\r\n    };\r\n    uploadBytes(storageRef, file, metadata);\r\n\r\n    getDownloadURL(storageRef).then((downloadURL) => {\r\n        console.log('File available at', downloadURL);\r\n\r\n        const reward = {\r\n            rewardName : this.state.rewardName,\r\n            ptsRequired : this.state.rewardPoints,\r\n            url : downloadURL\r\n        };\r\n        console.log(\"reward\" + JSON.stringify(reward))\r\n        \r\n        const config = {\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n        }\r\n        \r\n        //axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewards', reward, config )\r\n        axios.post('http://localhost:8081/api/rewards', reward, config )\r\n        .then(res => {\r\n          console.log(res);\r\n          console.log(res.data);\r\n          window.location.reload();\r\n        })\r\n    })\r\n  }\r\n\r\n  render() {\r\n      const data = this.state.data;\r\n    return (\r\n        <div id=\"body\">\r\n            <div id=\"div\">\r\n            <h1 style={{ fontFamily: \"san-serif\", color: 'blue'}}>Reward Administration</h1>\r\n            <div className=\"addReward\">\r\n            <div id=\"divForm\">\r\n            <h2>Add Reward</h2>\r\n            <form onSubmit={this.handleSubmit} id=\"form\">\r\n            <label>\r\n            Reward Name :\r\n            <input type=\"text\" name=\"rewardName\" onChange={this.handleName} />\r\n            </label>\r\n            <label>\r\n            Points Required :\r\n            <input type=\"number\" name=\"ptsRequired\" onChange={this.handlePoints} />\r\n            </label>\r\n            <label>\r\n            Picture URL :\r\n            <input type=\"file\" name=\"url\" onChange={this.handleURL} />\r\n            </label>\r\n            <button type=\"submit\">Add</button>\r\n            </form>\r\n            </div>\r\n            </div>\r\n            <div className=\"viewRewards\">\r\n            <h2>View Rewards</h2>\r\n            <table class=\"table\">\r\n              <tr>\r\n                <th>Reward Name</th>\r\n                <th>Points</th>\r\n                <th>Picture</th>\r\n              </tr>\r\n              {data && data.map(item =>\r\n                <tr key={item.rewardID}>\r\n                  <td>{item.rewardName}</td>\r\n                  <td>{item.ptsRequired}</td>\r\n                  <td><img src={item.url} style={{height: 200, width: 200}}></img></td>\r\n                  {/* <td><Link to={`/RewardAdminEdit?id=${item.rewardID}`}><Button>Edit</Button></Link></td> */}\r\n                  <td><Button id={item.rewardID} onClick={this.handleDelete}>Delete</Button></td>\r\n                </tr>\r\n              )}\r\n            </table>\r\n            </div>\r\n            </div>\r\n      </div>\r\n    )\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}