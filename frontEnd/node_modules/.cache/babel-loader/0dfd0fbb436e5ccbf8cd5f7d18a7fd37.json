{"ast":null,"code":"import _classCallCheck from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Link}from'react-router-dom';import{getStorage,ref,uploadBytes,getDownloadURL}from'firebase/storage';import Button from'react-bootstrap/Button';import Accordion from'react-bootstrap/Accordion';import Table from'react-bootstrap/Table';import Form from'react-bootstrap/Form';import{Row,Col}from'react-bootstrap';import'../css/rewardAdmin.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var viewReward=/*#__PURE__*/function(_React$Component){_inherits(viewReward,_React$Component);var _super=_createSuper(viewReward);function viewReward(){var _this;_classCallCheck(this,viewReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],rewardName:'',rewardPoints:'',url:''};_this.handleDelete=function(event){var id=event.target.id;axios.delete('http://localhost:8081/api/rewards/'+id).then(function(res){window.alert(\"Reward deleted successfully\");window.location.reload();});};_this.handleName=function(event){_this.setState({rewardName:event.target.value});};_this.handlePoints=function(event){_this.setState({rewardPoints:event.target.value});};_this.handleURL=function(event){_this.setState({url:event.target.files[0]});};_this.handleSubmit=function(event){event.preventDefault();// file upload\n// packing data    \nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.url.name);var file=_this.state.url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var reward={rewardName:_this.state.rewardName,ptsRequired:_this.state.rewardPoints,url:downloadURL};console.log(\"reward\"+JSON.stringify(reward));var config={headers:{'content-type':'application/json'}};//axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewards', reward, config )\naxios.post('http://localhost:8081/api/rewards',reward,config).then(function(res){console.log(res);console.log(res.data);window.location.reload();});});};return _this;}_createClass(viewReward,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://localhost:8081/api/rewards').then(function(res){_this2.setState({data:res.data});});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;return/*#__PURE__*/_jsxs(\"div\",{className:\"rewardAdmin\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Reward Administration\"}),/*#__PURE__*/_jsx(Accordion,{children:/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:\"0\",children:[/*#__PURE__*/_jsx(Accordion.Header,{children:/*#__PURE__*/_jsx(Button,{variant:\"outline-info\",children:\"Add Reward\"})}),/*#__PURE__*/_jsx(Accordion.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,className:\"form\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:12,md:8,lg:6,children:/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Reward Name\"})}),/*#__PURE__*/_jsx(Col,{xs:12,md:6,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Points Required\"})}),/*#__PURE__*/_jsx(Col,{xs:12,md:6,lg:3,children:/*#__PURE__*/_jsx(Form.Control,{type:\"file\"})})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Add\"})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"viewRewards\",children:/*#__PURE__*/_jsxs(Table,{responsive:\"sm\",className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Points\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Picture\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit?\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete?\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.rewardName}),/*#__PURE__*/_jsx(\"td\",{children:item.ptsRequired}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.url,style:{height:150,width:150}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",variant:\"warning\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",variant:\"danger\",id:item.rewardID,onClick:_this3.handleDelete,children:\"Delete\"})})]},item.rewardID);})})]})})]});}}]);return viewReward;}(React.Component);export{viewReward as default};","map":{"version":3,"sources":["C:/Users/jw/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/RewardAdmin.js"],"names":["React","axios","Link","getStorage","ref","uploadBytes","getDownloadURL","Button","Accordion","Table","Form","Row","Col","viewReward","state","data","rewardName","rewardPoints","url","handleDelete","event","id","target","delete","then","res","window","alert","location","reload","handleName","setState","value","handlePoints","handleURL","files","handleSubmit","preventDefault","storage","storageRef","name","file","metadata","contentType","type","downloadURL","console","log","reward","ptsRequired","JSON","stringify","config","headers","post","get","map","item","height","width","rewardID","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport '../css/rewardAdmin.css';\r\n\r\nexport default class viewReward extends React.Component {\r\n    state = {\r\n        data: [],\r\n        rewardName: '',\r\n        rewardPoints: '',\r\n        url: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('http://localhost:8081/api/rewards')\r\n            .then(res => {\r\n                this.setState({ data: res.data });\r\n            })\r\n    }\r\n\r\n    handleDelete = event => {\r\n        const id = event.target.id;\r\n        axios.delete('http://localhost:8081/api/rewards/' + id)\r\n            .then(res => {\r\n                window.alert(\"Reward deleted successfully\");\r\n                window.location.reload();\r\n            })\r\n    }\r\n\r\n    handleName = event => {\r\n        this.setState({ rewardName: event.target.value });\r\n    }\r\n\r\n    handlePoints = event => {\r\n        this.setState({ rewardPoints: event.target.value });\r\n    }\r\n\r\n    handleURL = event => {\r\n        this.setState({ url: event.target.files[0], });\r\n    }\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        // file upload\r\n        // packing data    \r\n        const storage = getStorage();\r\n        const storageRef = ref(storage, 'img/' + this.state.url.name);\r\n        var file = this.state.url;\r\n        // Create file metadata including the content type\r\n        /** @type {any} */\r\n        const metadata = {\r\n            contentType: this.state.url.type,\r\n        };\r\n        uploadBytes(storageRef, file, metadata);\r\n\r\n        getDownloadURL(storageRef).then((downloadURL) => {\r\n            console.log('File available at', downloadURL);\r\n\r\n            const reward = {\r\n                rewardName: this.state.rewardName,\r\n                ptsRequired: this.state.rewardPoints,\r\n                url: downloadURL\r\n            };\r\n            console.log(\"reward\" + JSON.stringify(reward))\r\n\r\n            const config = {\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n            }\r\n\r\n            //axios.post('https://ades-ca1-heroku.herokuapp.com/api/rewards', reward, config )\r\n            axios.post('http://localhost:8081/api/rewards', reward, config)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    console.log(res.data);\r\n                    window.location.reload();\r\n                })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const data = this.state.data;\r\n        return (\r\n            <div className=\"rewardAdmin\">\r\n                <h1>Reward Administration</h1>\r\n                <Accordion>\r\n                    <Accordion.Item eventKey=\"0\">\r\n                        <Accordion.Header>\r\n                            <Button variant=\"outline-info\" >Add Reward</Button>\r\n                        </Accordion.Header>\r\n                        <Accordion.Body>\r\n                        <div className=\"form\">\r\n                            <Form onSubmit={this.handleSubmit} className=\"form\">\r\n                                <Row>\r\n                                    <Col xs={12} md={8} lg={6}>\r\n                                        <Form.Control placeholder=\"Reward Name\" />\r\n                                    </Col>\r\n                                    <Col xs={12} md={6} lg={3}>\r\n                                        <Form.Control type=\"number\" placeholder=\"Points Required\" />\r\n                                    </Col>\r\n                                    <Col xs={12} md={6} lg={3}>\r\n                                        <Form.Control type=\"file\" />\r\n                                    </Col>\r\n                                </Row>\r\n                                <Button variant=\"primary\" type=\"submit\">Add</Button>\r\n                            </Form>\r\n                        </div>\r\n                        </Accordion.Body>\r\n                    </Accordion.Item>\r\n                </Accordion>\r\n                <div id=\"viewRewards\">\r\n                    <Table responsive=\"sm\" className=\"table\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>Points</th>\r\n                            <th>Picture</th>\r\n                            <th>Edit?</th>\r\n                            <th>Delete?</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {data && data.map(item =>\r\n                            <tr key={item.rewardID}>\r\n                                <td>{item.rewardName}</td>\r\n                                <td>{item.ptsRequired}</td>\r\n                                <td><img src={item.url} style={{height:150,width:150}}></img></td>\r\n                                <td><button type=\"button\" variant=\"warning\">Edit</button></td>\r\n                                <td><button type=\"button\" variant=\"danger\" id={item.rewardID} onClick={this.handleDelete}>Delete</button></td>\r\n                            </tr>\r\n                        )}\r\n                        </tbody>\r\n                    </Table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}