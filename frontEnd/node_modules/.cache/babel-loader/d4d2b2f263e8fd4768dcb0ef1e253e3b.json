{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khadi\\\\OneDrive\\\\Documents\\\\GitHub\\\\ADES\\\\frontEnd\\\\src\\\\components\\\\BadgeAdmin.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport Button from 'react-bootstrap/Button';\nimport '../css/Table&Add.css';\nimport ModalPopup from './EditBadge';\nimport { signOut } from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class BadgeAdmin extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: [],\n      showModalPopup: false,\n      class: [],\n      name: '',\n      requirements: '',\n      pic_url: '',\n      badgeClassID: '',\n      badgeID: '',\n      uid: '',\n      id: 0\n    };\n\n    this.isShowPopup = (status, badgeID, name, requirements, className, pic_url) => {\n      this.setState({\n        showModalPopup: status\n      });\n      this.setState({\n        badgeID: badgeID\n      });\n      this.setState({\n        name: name\n      });\n      this.setState({\n        requirements: requirements\n      });\n      this.setState({\n        badgeClassID: className\n      });\n      this.setState({\n        pic_url: pic_url\n      });\n    };\n\n    this.handleName = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.handleRequirement = event => {\n      this.setState({\n        requirements: event.target.value\n      });\n    };\n\n    this.handleURL = event => {\n      this.setState({\n        pic_url: event.target.files[0]\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault(); //data extraction (combining data)\n      // file upload\n\n      const storage = getStorage();\n      const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\n      var file = this.state.pic_url; // Create file metadata including the content type\n\n      /** @type {any} */\n\n      const metadata = {\n        contentType: this.state.pic_url.type\n      };\n      uploadBytes(storageRef, file, metadata);\n      getDownloadURL(storageRef).then(downloadURL => {\n        console.log('File available at', downloadURL);\n        var bcID = document.getElementById(\"dropDown\");\n        var bID = bcID.value;\n        var badgeClassID = parseInt(bID);\n        console.log(badgeClassID + \"classBADGE\");\n        const badge = {\n          name: this.state.name,\n          requirements: this.state.requirements,\n          pic_url: downloadURL,\n          badgeClassID: badgeClassID\n        };\n        console.log(\"BADGEEEE\" + JSON.stringify(badge));\n        const config = {\n          headers: {\n            'content-type': 'application/json'\n          }\n        };\n        axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge', badge, config).then(res => {\n          console.log(res);\n          console.log(res.data);\n          window.location.reload();\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    auth.onAuthStateChanged(user => {\n      if (user) {\n        console.log(\"User is Signed IN \");\n        this.setState({\n          uid: user.uid\n        });\n        const config = {\n          headers: {\n            'content-type': 'application/json'\n          }\n        };\n        axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + this.state.uid, config).then(res => {\n          if (res.data.type === 1) {\n            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/studentDashboard');\n          } else if (res.data.type === 2) {// area to put your axios \n          } else {\n            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n          }\n        });\n      } else {\n        console.log(\"THERE IS NO USER\");\n        signOut(auth);\n        window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n      }\n    });\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badges`).then(res => {\n      console.log(res.data.length);\n      this.setState({\n        data: res.data\n      });\n    });\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badgeClass`).then(res => {\n      console.log(res.data.length);\n      this.setState({\n        class: res.data\n      });\n    });\n  }\n\n  render() {\n    const data = this.state.data;\n    const data2 = this.state.class;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"div\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"badgeAdmin\",\n          style: {\n            fontFamily: \"sans-serif \",\n            color: 'blue'\n          },\n          children: \"Badges Administration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"viewBadges\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"divForm\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              id: \"add\",\n              children: \"Add Badge\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.handleSubmit,\n              id: \"form\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Badge Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"name\",\n                  onChange: this.handleName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Badge Requirement:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"requirements\",\n                  onChange: this.handleRequirement\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Pic URL:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  name: \"pic_url\",\n                  onChange: this.handleURL\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Badge Class ID:\", /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"badgeClassID\",\n                  onChange: this.handleBadgeClassID,\n                  id: \"dropDown\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"1\",\n                    children: \"Air\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"2\",\n                    children: \"Water\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"3\",\n                    children: \"Fire\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"4\",\n                    children: \"Geo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                children: \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Badge Class\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                class: \"table\",\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Class Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Describtion \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 17\n                }, this), data2 && data2.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  id: \"tableRow\",\n                  class: \"spaceUnder\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.className\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.classDescription\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 19\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"View Badges\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n              class: \"table\",\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Badge Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Requirements\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"badgeClass\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Picture\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this), data && data.map(item2 => /*#__PURE__*/_jsxDEV(\"tr\", {\n                id: \"tableRow\",\n                class: \"spaceUnder\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item2.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item2.requirements\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item2.className\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item2.pic_url,\n                    style: {\n                      height: 200,\n                      width: 200\n                    },\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"button\",\n                    variant: \"warning\",\n                    onClick: () => this.isShowPopup(true, item2.badgeID, item2.name, item2.requirements, item2.className, item2.pic_url),\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this)]\n              }, item2.badgeID, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ModalPopup, {\n            showModalPopup: this.state.showModalPopup,\n            onPopupClose: this.isShowPopup,\n            badgeID: this.state.badgeID,\n            name: this.state.name,\n            requirements: this.state.requirements,\n            className: this.state.badgeClassID,\n            pic_url: this.state.pic_url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/BadgeAdmin.js"],"names":["React","axios","Link","getStorage","ref","uploadBytes","getDownloadURL","Button","ModalPopup","signOut","auth","BadgeAdmin","Component","state","data","showModalPopup","class","name","requirements","pic_url","badgeClassID","badgeID","uid","id","isShowPopup","status","className","setState","handleName","event","target","value","handleRequirement","handleURL","files","handleSubmit","preventDefault","storage","storageRef","file","metadata","contentType","type","then","downloadURL","console","log","bcID","document","getElementById","bID","parseInt","badge","JSON","stringify","config","headers","post","res","window","location","reload","componentDidMount","onAuthStateChanged","user","get","replace","length","render","data2","fontFamily","color","handleBadgeClassID","map","item","classDescription","item2","height","width"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport '../css/Table&Add.css';\r\nimport ModalPopup from './EditBadge';\r\nimport { signOut } from \"firebase/auth\";\r\nimport { auth } from '../firebase.js';\r\nexport default class BadgeAdmin extends React.Component {\r\n  state = {\r\n    data: [],\r\n    showModalPopup: false,\r\n    class: [],\r\n    name: '',\r\n    requirements: '',\r\n    pic_url: '',\r\n    badgeClassID: '',\r\n    badgeID:'',\r\n    uid: '',\r\n    id: 0\r\n  }\r\n\r\n  componentDidMount() {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n          console.log(\"User is Signed IN \");\r\n          this.setState({ uid: user.uid });\r\n          const config = {\r\n              headers: {\r\n                  'content-type': 'application/json'\r\n              }\r\n          }\r\n          \r\n          axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + this.state.uid, config)\r\n              .then(res => {\r\n                if (res.data.type === 1) {\r\n                  window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/studentDashboard');\r\n\r\n} else if (res.data.type === 2) {\r\n                    // area to put your axios \r\n               } else {\r\n                   window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n               }\r\n           })\r\n   } else {\r\n       console.log(\"THERE IS NO USER\");\r\n       signOut(auth);\r\n       window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\r\n   }\r\n});\r\n\r\n\r\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badges`)\r\n      .then(res => {\r\n        console.log(res.data.length);\r\n\r\n        this.setState({ data: res.data });\r\n      })\r\n\r\n    axios.get(`https://ades-ca1-project.herokuapp.com/api/badgeClass`)\r\n      .then(res => {\r\n        console.log(res.data.length);\r\n\r\n        this.setState({ class: res.data });\r\n      })\r\n  }\r\n\r\n  isShowPopup = (status, badgeID, name, requirements, className,pic_url) => {\r\n    this.setState({ showModalPopup : status });\r\n    this.setState({ badgeID : badgeID });\r\n    this.setState({ name : name});\r\n    this.setState({ requirements : requirements});\r\n    this.setState({ badgeClassID : className });\r\n    this.setState({ pic_url : pic_url });\r\n}\r\n  handleName = event => {\r\n    this.setState({ name: event.target.value });\r\n  }\r\n\r\n  handleRequirement = event => {\r\n    this.setState({ requirements: event.target.value });\r\n  }\r\n\r\n \r\n\r\n  handleURL = event => {\r\n    this.setState({ pic_url: event.target.files[0], });\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    //data extraction (combining data)\r\n    // file upload\r\n    const storage = getStorage();\r\n    const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\r\n    var file = this.state.pic_url;\r\n    // Create file metadata including the content type\r\n    /** @type {any} */\r\n    const metadata = {\r\n      contentType: this.state.pic_url.type,\r\n    };\r\n   \r\n    uploadBytes(storageRef, file, metadata);\r\n\r\n    getDownloadURL(storageRef).then((downloadURL) => {\r\n      console.log('File available at', downloadURL);\r\n\r\n      var bcID = document.getElementById(\"dropDown\");\r\n      var bID = bcID.value;\r\n      var badgeClassID = parseInt(bID);\r\n      console.log(badgeClassID + \"classBADGE\")\r\n      const badge = {\r\n        name: this.state.name,\r\n        requirements: this.state.requirements,\r\n        pic_url: downloadURL,\r\n        badgeClassID: badgeClassID\r\n      };\r\n      console.log(\"BADGEEEE\" + JSON.stringify(badge))\r\n\r\n      const config = {\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n      }\r\n      axios.post('https://ades-ca1-project.herokuapp.com/api/newBadge', badge, config)\r\n        .then(res => {\r\n          console.log(res);\r\n          console.log(res.data);\r\n          window.location.reload();\r\n        })\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const data = this.state.data;\r\n    const data2 = this.state.class;\r\n    return (\r\n\r\n      <div id=\"body\">\r\n        <div id=\"div\">\r\n          <h1 className=\"badgeAdmin\" style={{ fontFamily: \"sans-serif \", color: 'blue' }}>Badges Administration</h1>\r\n          <div className=\"viewBadges\">\r\n            <div id=\"divForm\">\r\n              <h2 id=\"add\">Add Badge</h2>\r\n              <form onSubmit={this.handleSubmit} id=\"form\" >\r\n                <label>\r\n                  Badge Name:\r\n                  <input type=\"text\" name=\"name\" onChange={this.handleName} />\r\n                </label>\r\n                <br/>\r\n                <label>\r\n                  Badge Requirement:\r\n                  <input type=\"text\" name=\"requirements\" onChange={this.handleRequirement} />\r\n                </label>\r\n                <br/>\r\n                <label>\r\n                  Pic URL:\r\n                  <input type=\"file\" name=\"pic_url\" onChange={this.handleURL} />\r\n                </label>\r\n                {/* Please remember to change and do JOIN table for it to not display as ID */}\r\n                <br/>\r\n                <label>\r\n                  Badge Class ID:\r\n                  <select name=\"badgeClassID\" onChange={this.handleBadgeClassID} id=\"dropDown\">\r\n                    <option value=\"1\">Air</option>\r\n                    <option value=\"2\">Water</option>\r\n                    <option value=\"3\">Fire</option>\r\n                    <option value=\"4\">Geo</option>\r\n                  </select>\r\n                  {/* <input type=\"text\" name=\"badgeClassID\" onChange={this.handleBadgeClassID} /> */}\r\n                </label>\r\n                <button  type=\"submit\">Add</button>\r\n              </form>\r\n            </div>\r\n\r\n            <div> <div>\r\n              <h2>Badge Class</h2>\r\n              <table class=\"table\">\r\n                <tr>\r\n                  <th>Class Name</th>\r\n                  <th>Describtion </th>\r\n\r\n                </tr>\r\n                {data2 && data2.map(item =>\r\n                  <tr id='tableRow' class=\"spaceUnder\">\r\n                    <td>{item.className}</td>\r\n                    <td>{item.classDescription}</td>\r\n\r\n                  </tr>\r\n                )}\r\n              </table>\r\n            </div></div>\r\n            <div>\r\n              <h2>View Badges</h2>\r\n              <table class=\"table\">\r\n                <tr>\r\n                  <th>Badge Name</th>\r\n                  <th>Requirements</th>\r\n                  <th>badgeClass</th>\r\n                  <th>Picture</th>\r\n                </tr>\r\n                {data && data.map(item2 =>\r\n                  <tr key={item2.badgeID} id='tableRow' class=\"spaceUnder\">\r\n                    <td>{item2.name}</td>\r\n                    <td>{item2.requirements}</td>\r\n                    <td>{item2.className}</td>\r\n                    <td><img src={item2.pic_url} style={{ height: 200, width: 200 }} alt=\"\"></img></td>\r\n                    <td><Button type=\"button\" variant=\"warning\" onClick={() => this.isShowPopup(true, item2.badgeID, item2.name, item2.requirements, item2.className,item2.pic_url)}>Edit</Button></td>\r\n                  </tr>\r\n                )}\r\n              </table>\r\n            </div>\r\n            <ModalPopup\r\n                    showModalPopup={this.state.showModalPopup}\r\n                    onPopupClose={this.isShowPopup}\r\n                    badgeID={this.state.badgeID}\r\n                    name={this.state.name}\r\n                    requirements={this.state.requirements}\r\n                    className={this.state.badgeClassID}\r\n                    pic_url={this.state.pic_url}\r\n                ></ModalPopup>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}