{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\ADES\\\\frontEnd\\\\src\\\\components\\\\StudentReward.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { store } from 'react-notifications-component';\nimport { Link } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class viewReward extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: [],\n      currentPts: 0,\n      rewardName: '',\n      rewardPoints: 0,\n      url: '',\n      studentID: 1\n    };\n\n    this.handleRedeem = event => {\n      // Get the data\n      const rewardID = event.target.getAttribute(\"data-index\");\n      const ptsRequired = event.target.getAttribute(\"data-points\");\n      const rewardName = event.target.getAttribute(\"data-name\");\n      console.log(\"rewardID = \" + rewardID);\n      console.log(\"rewardName = \" + rewardName);\n      console.log(\"points = \" + ptsRequired); // Store student's points\n\n      const currentPts = this.state.currentPts; // IF student have enough points to redeem\n\n      if (currentPts >= ptsRequired) {\n        // Do the calculation\n        this.setState({\n          currentPts: currentPts - ptsRequired\n        }); // Insert reward history\n\n        const IDs = {\n          studentID: this.state.studentID,\n          rewardID: rewardID\n        };\n        const config = {\n          headers: {\n            'content-type': 'application/json'\n          }\n        };\n        axios.post('https://ades-ca1-project.herokuapp.com/api/rewardHistory', IDs, config).then(res => {\n          console.log(res);\n          console.log(res.data);\n        }); // Update student's current points\n\n        const points = {\n          points: currentPts\n        };\n        axios.put('https://ades-ca1-project.herokuapp.com/api/point/' + this.state.studentID, points, config).then(res => {\n          console.log(res);\n          console.log(res.data);\n          this.notiRedeemSuccess(rewardName);\n          window.alert(\"Reward redeemed successfully\");\n        }); // ELSE student dont have enough points\n      } else {\n        this.notifRedeemFail();\n        window.alert(\"Insufficient points ! Work harder and earn more points !\");\n      }\n    };\n  }\n\n  componentDidMount() {\n    // Get all rewards data\n    axios.get('https://ades-ca1-project.herokuapp.com/api/rewards').then(res => {\n      this.setState({\n        data: res.data\n      });\n    }); // Get student's points data\n\n    axios.get('https://ades-ca1-project.herokuapp.com/api/points/' + this.state.studentID).then(res => {\n      this.setState({\n        currentPts: res.data[0].redeemedPts\n      });\n    });\n  }\n\n  notiRedeemSuccess(rewardName) {\n    store.addNotification({\n      title: \"Success\",\n      message: \"Congratulations! You've successfully redeemed \" + rewardName + \" !\",\n      type: \"success\",\n      insert: \"top\",\n      container: \"top-center\",\n      animationIn: [\"animated\", \"fadeIn\"],\n      animationOut: [\"animated\", \"fadeOut\"],\n      dismiss: {\n        duration: 2000\n      },\n      dismissable: {\n        click: true\n      }\n    });\n  }\n\n  notifRedeemFail() {\n    store.addNotification({\n      title: \"Error\",\n      message: \"You've insufficient points to redeem this reward. Work harder!\",\n      type: \"danger\",\n      insert: \"top\",\n      container: \"top-center\",\n      animationIn: [\"animated\", \"bounceIn\"],\n      animationOut: [\"animated\", \"bounceOut\"],\n      dismiss: {\n        duration: 2000\n      },\n      dismissable: {\n        click: true\n      }\n    });\n  }\n\n  render() {\n    const data = this.state.data;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Rewards\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"viewRewards\",\n        children: data && data.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.rewardName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.ptsRequired\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.url,\n              style: {\n                height: 200,\n                width: 200\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: this.handleRedeem,\n              \"data-index\": item.rewardID,\n              \"data-name\": item.rewardName,\n              \"data-points\": item.ptsRequired,\n              children: \"Redeem\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }, this)]\n        }, item.rewardID, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/ADES/frontEnd/src/components/StudentReward.js"],"names":["React","axios","store","Link","Button","viewReward","Component","state","data","currentPts","rewardName","rewardPoints","url","studentID","handleRedeem","event","rewardID","target","getAttribute","ptsRequired","console","log","setState","IDs","config","headers","post","then","res","points","put","notiRedeemSuccess","window","alert","notifRedeemFail","componentDidMount","get","redeemedPts","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","dismissable","click","render","map","item","height","width"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { store } from 'react-notifications-component';\r\nimport { Link } from 'react-router-dom' ;\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nexport default class viewReward extends React.Component {\r\n  state = {\r\n    data : [],\r\n    currentPts: 0,\r\n    rewardName: '',\r\n    rewardPoints: 0,\r\n    url: '',\r\n    studentID: 1,\r\n  }\r\n\r\n  componentDidMount(){\r\n    // Get all rewards data\r\n    axios.get('https://ades-ca1-project.herokuapp.com/api/rewards')\r\n    .then(res => {\r\n        this.setState({ data : res.data });\r\n    })\r\n    \r\n    // Get student's points data\r\n    axios.get('https://ades-ca1-project.herokuapp.com/api/points/' + this.state.studentID)\r\n    .then(res => {\r\n        this.setState({ currentPts : res.data[0].redeemedPts });\r\n    })\r\n}\r\n\r\n  notiRedeemSuccess(rewardName){\r\n    store.addNotification({\r\n      title:\"Success\",\r\n      message:\"Congratulations! You've successfully redeemed \" + rewardName + \" !\",\r\n      type:\"success\",\r\n      insert:\"top\",\r\n      container:\"top-center\",\r\n      animationIn:[\"animated\",\"fadeIn\"],\r\n      animationOut:[\"animated\",\"fadeOut\"],\r\n      dismiss: {duration:2000},\r\n      dismissable: {click:true}\r\n    });\r\n  }  \r\n\r\n  notifRedeemFail(){\r\n    store.addNotification({\r\n      title:\"Error\",\r\n      message:\"You've insufficient points to redeem this reward. Work harder!\",\r\n      type:\"danger\",\r\n      insert:\"top\",\r\n      container:\"top-center\",\r\n      animationIn:[\"animated\",\"bounceIn\"],\r\n      animationOut:[\"animated\",\"bounceOut\"],\r\n      dismiss: {duration:2000},\r\n      dismissable: {click:true}\r\n    });\r\n  }  \r\n\r\n  handleRedeem = event => {\r\n\r\n    // Get the data\r\n    const rewardID = event.target.getAttribute(\"data-index\");\r\n    const ptsRequired = event.target.getAttribute(\"data-points\");\r\n    const rewardName = event.target.getAttribute(\"data-name\");\r\n    console.log(\"rewardID = \" + rewardID);\r\n    console.log(\"rewardName = \" + rewardName);\r\n    console.log(\"points = \" + ptsRequired);\r\n\r\n    // Store student's points\r\n    const currentPts = this.state.currentPts;\r\n\r\n    // IF student have enough points to redeem\r\n    if(currentPts >= ptsRequired){\r\n\r\n      // Do the calculation\r\n      this.setState({currentPts : (currentPts - ptsRequired)});\r\n\r\n      // Insert reward history\r\n      const IDs = {\r\n        studentID : this.state.studentID,\r\n        rewardID : rewardID\r\n      }\r\n\r\n      const config = {\r\n        headers: {\r\n          'content-type':'application/json'\r\n        }\r\n      }\r\n\r\n      axios.post('https://ades-ca1-project.herokuapp.com/api/rewardHistory', IDs, config)\r\n      .then(res => {\r\n        console.log(res);\r\n        console.log(res.data);\r\n      })\r\n\r\n      // Update student's current points\r\n      const points = {\r\n        points : currentPts\r\n      }\r\n\r\n      axios.put('https://ades-ca1-project.herokuapp.com/api/point/' + this.state.studentID, points, config )\r\n      .then(res => {\r\n        console.log(res);\r\n        console.log(res.data);\r\n        this.notiRedeemSuccess(rewardName);\r\n        window.alert(\"Reward redeemed successfully\");\r\n      })\r\n\r\n    // ELSE student dont have enough points\r\n    }else{\r\n      this.notifRedeemFail();\r\n      window.alert(\"Insufficient points ! Work harder and earn more points !\");\r\n    }\r\n  \r\n  }\r\n\r\n  render() {\r\n      const data = this.state.data;\r\n    return (\r\n        <div>\r\n            <h1>Rewards</h1>\r\n            <div className=\"viewRewards\">\r\n            {data && data.map(item =>\r\n                        <tr key={item.rewardID}>\r\n                            <td>{item.rewardName}</td>\r\n                            <td>{item.ptsRequired}</td>\r\n                            <td><img src={item.url} style={{height: 200, width: 200}}></img></td>\r\n                            <td><Button onClick={this.handleRedeem} data-index={item.rewardID} data-name={item.rewardName} data-points={item.ptsRequired}>Redeem</Button></td>\r\n                        </tr>\r\n                    )}\r\n            </div>\r\n      </div>\r\n      \r\n    )\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}