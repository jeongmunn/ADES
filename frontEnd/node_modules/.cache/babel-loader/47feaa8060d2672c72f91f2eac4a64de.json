{"ast":null,"code":"import _classCallCheck from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import Button from'react-bootstrap/Button';import{Modal}from'react-bootstrap';import axios from'axios';import jQuery from'jquery';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var MazePopup=/*#__PURE__*/function(_Component){_inherits(MazePopup,_Component);var _super=_createSuper(MazePopup);function MazePopup(props){var _this;_classCallCheck(this,MazePopup);_this=_super.call(this,props);_this.isShowModal=function(status){_this.handleClosing();_this.setState({showModal:status});};_this.studentCurrentPoints=function(callback){axios.get('http://ades-ca1-project.herokuapp.com/api/points/'+_this.props.id).then(function(res){console.log(res.data[0].redeemedPts+\"res for redeemdedpoitns\");var currentPts=res.data[0].redeemedPts;_this.setState({currentPts:currentPts});var totalPts=res.data[0].totalPts;var mazeLvl=res.data[0].mazeLvl;var quizPts=_this.props.point;callback(currentPts,totalPts,mazeLvl,quizPts,_this.props.id);}).catch(function(error){console.log(error.response.data.error);});};_this.handleComplete=function(event){_this.setState({postComplete:false});axios.get('http://ades-ca1-project.herokuapp.com/api/points/'+_this.props.id).then(function(res){console.log(res.data[0].redeemedPts+\"res for redeemdedpoitns\");var currentPts=res.data[0].redeemedPts;_this.setState({currentPts:currentPts});var totalPts=res.data[0].totalPts;var mazeLvl=res.data[0].mazeLvl;var quizPts=_this.props.point;var currentPoints=currentPts+quizPts;_this.setState({currentPts:currentPoints});var totalPoints=totalPts+quizPts;_this.setState({totalPts:totalPoints});mazeLvl=parseInt(mazeLvl)+1;_this.setState({mazeLvl:mazeLvl});_this.setState({totalPts:totalPts},function(){_this.afterSetStateFinished();});}).catch(function(error){console.log(error.response.data.error);});// Store student's points\n// event.preventDefault();\n// this.studentCurrentPoints(function (currentPts, totalPts, mazeLvl, quizPts, studentID) {\n//     const currentPoints = (currentPts + quizPts);\n//     const totalPoints = (totalPts + quizPts);\n//     mazeLvl = (parseInt(mazeLvl) + 1);\n//     // Do the calculation\n// this.setState({ currentPts : currentPoints});\n// this.setState({ totalPts : totalPoints});\n// this.setState({ mazeLvl : mazeLvl});\n// Update student's table\n// const data = {\n//     currentPts: currentPoints,\n//     totalPts: totalPoints,\n//     mazeLvl: mazeLvl\n// }\n// const points = {\n//     ptsAwarded: quizPts,\n//     eventID: 2\n// }\n// console.log(JSON.stringify(data) + \"DATA SENT FOR PUT\")\n// const config = {\n//     headers: {\n//         'content-type': 'application/json'\n//     }\n// }\n// axios.put('http://ades-ca1-project.herokuapp.com/api/points/' + studentID, data, config)\n//     .then(res => {\n//         console.log(res);\n//         console.log(res.data);\n//         console.log(\"PUT SUCESSS\")\n//         // Insert points history\n//         axios.post('http://ades-ca1-project.herokuapp.com/api/ptsHistory/' + studentID, points, config)\n//             .then(res => {\n//                 console.log(res);\n//                 console.log(res.data);\n//                 window.alert(\"Points redeemed successfully\");\n//                 //updating the state \n//             }).catch(error => {\n//                 console.log(error.response.data.error)\n//              })\n//     }).catch(error => {\n//         console.log(error.response.data.error)\n//      })\n// })\n// if(this.state.currentPts!==0){\n//      this.handleClosing();\n// }\n};_this.afterSetStateFinished=function(){var data={currentPts:_this.state.currentPts,totalPts:_this.state.totalPts,mazeLvl:_this.state.mazeLvl};_this.setState({quizPts:_this.props.quizPts},function(){_this.postingFunction();});var points={ptsAwarded:_this.state.quizPts,eventID:2};console.log(JSON.stringify(data)+\"DATA SENT FOR PUT\");var config={headers:{'content-type':'application/json'}};axios.put('http://ades-ca1-project.herokuapp.com/api/points/'+_this.props.id,data,config).then(function(res){console.log(res);console.log(res.data);console.log(\"PUT SUCESSS\");// Insert points history\n}).catch(function(error){console.log(error.response.data.error);});};_this.postingFunction=function(){var points={ptsAwarded:_this.state.quizPts,eventID:2};var config={headers:{'content-type':'application/json'}};axios.post('http://ades-ca1-project.herokuapp.com/api/ptsHistory/'+_this.props.id,points,config).then(function(res){// console.log(res);\n// console.log(res.data);\nwindow.alert(\"Points redeemed successfully\");_this.handleClosing();//updating the state \n}).catch(function(error){console.log(error.response.data.error);});};_this.handleClosing=function(){_this.props.onPopupClose(false,_this.props.level);_this.props.onNewLevel(true);};_this.handleClose=function(){_this.props.onPopupClose(false,_this.props.level);};_this.state={showModal:false,newLevel:false,currentPts:0,totalPts:0,mazeLvl:0,quizPts:0};return _this;}// componentDidMount(){\n//     // Get student's points data'\n// axios.get('https://ades-ca1-project.herokuapp.com/api/points/' + this.props.id)\n// .then(res => {\n//     this.setState({ currentPts : res.data[0].redeemedPts });\n//     this.setState({ totalPts : res.data[0].totalPts});\n//     this.setState({ mazeLvl : res.data[0].mazeLvl});\n// })\n// }\n_createClass(MazePopup,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:this.props.showModalPopup,onHide:this.handleClose,id:this.props.level,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{id:\"sign-in-title\",children:[\"Level \",this.props.level]})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"Quiz\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Points : \",this.props.point,\" \"]}),/*#__PURE__*/_jsx(Button,{onClick:this.handleComplete,children:\"Complete\"})]})]})]})});}}]);return MazePopup;}(Component);export{MazePopup as default};","map":{"version":3,"sources":["C:/Users/khadi/OneDrive/Documents/GitHub/ADES/frontEnd/src/components/MazePopup.js"],"names":["React","Component","Fragment","Button","Modal","axios","jQuery","MazePopup","props","isShowModal","status","handleClosing","setState","showModal","studentCurrentPoints","callback","get","id","then","res","console","log","data","redeemedPts","currentPts","totalPts","mazeLvl","quizPts","point","catch","error","response","handleComplete","event","postComplete","currentPoints","totalPoints","parseInt","afterSetStateFinished","state","postingFunction","points","ptsAwarded","eventID","JSON","stringify","config","headers","put","post","window","alert","onPopupClose","level","onNewLevel","handleClose","newLevel","showModalPopup"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Modal } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport jQuery from 'jquery';\r\n\r\nexport default class MazePopup extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showModal: false,\r\n            newLevel: false,\r\n            currentPts: 0,\r\n            totalPts: 0,\r\n            mazeLvl: 0,\r\n            quizPts:0\r\n\r\n        };\r\n    }\r\n\r\n    // componentDidMount(){\r\n    //     // Get student's points data'\r\n\r\n    // axios.get('https://ades-ca1-project.herokuapp.com/api/points/' + this.props.id)\r\n    // .then(res => {\r\n    //     this.setState({ currentPts : res.data[0].redeemedPts });\r\n    //     this.setState({ totalPts : res.data[0].totalPts});\r\n    //     this.setState({ mazeLvl : res.data[0].mazeLvl});\r\n    // })\r\n    // }\r\n\r\n\r\n\r\n\r\n\r\n    isShowModal = (status) => {\r\n        this.handleClosing();\r\n        this.setState({ showModal: status });\r\n    }\r\n\r\n\r\n\r\n    //to get the students current Lvl\r\n    studentCurrentPoints = (callback) => {\r\n        axios.get('http://ades-ca1-project.herokuapp.com/api/points/' + this.props.id)\r\n            .then(res => {\r\n                console.log(res.data[0].redeemedPts + \"res for redeemdedpoitns\")\r\n                var currentPts = res.data[0].redeemedPts;\r\n                this.setState({currentPts:currentPts})\r\n                var totalPts = res.data[0].totalPts;\r\n                var mazeLvl = res.data[0].mazeLvl;\r\n                const quizPts = this.props.point;\r\n                callback(currentPts, totalPts, mazeLvl, quizPts, this.props.id);\r\n            }).catch(error => {\r\n                console.log(error.response.data.error)\r\n             })\r\n\r\n    }\r\n handleComplete = event => {\r\nthis.setState({postComplete: false});\r\n    axios.get('http://ades-ca1-project.herokuapp.com/api/points/' + this.props.id)\r\n    .then(res => {\r\n        console.log(res.data[0].redeemedPts + \"res for redeemdedpoitns\")\r\n        var currentPts = res.data[0].redeemedPts;\r\n        this.setState({currentPts:currentPts})\r\n        var totalPts = res.data[0].totalPts;\r\n        var mazeLvl = res.data[0].mazeLvl;\r\n        const quizPts = this.props.point;\r\n\r\n        const currentPoints = (currentPts + quizPts);\r\n        this.setState({currentPts: currentPoints})\r\n        \r\n        const totalPoints = (totalPts + quizPts);\r\nthis.setState({totalPts:totalPoints});\r\n        mazeLvl = (parseInt(mazeLvl) + 1);\r\n        this.setState({mazeLvl:mazeLvl})\r\n        this.setState({\r\n            totalPts: totalPts\r\n        }, () => {\r\n            this.afterSetStateFinished();\r\n        });\r\n    }).catch(error => {\r\n        console.log(error.response.data.error)\r\n     })\r\n\r\n\r\n\r\n\r\n        // Store student's points\r\n        // event.preventDefault();\r\n\r\n        // this.studentCurrentPoints(function (currentPts, totalPts, mazeLvl, quizPts, studentID) {\r\n\r\n        //     const currentPoints = (currentPts + quizPts);\r\n        //     const totalPoints = (totalPts + quizPts);\r\n\r\n        //     mazeLvl = (parseInt(mazeLvl) + 1);\r\n\r\n        //     // Do the calculation\r\n            // this.setState({ currentPts : currentPoints});\r\n            // this.setState({ totalPts : totalPoints});\r\n            // this.setState({ mazeLvl : mazeLvl});\r\n            // Update student's table\r\n            // const data = {\r\n            //     currentPts: currentPoints,\r\n            //     totalPts: totalPoints,\r\n            //     mazeLvl: mazeLvl\r\n            // }\r\n            // const points = {\r\n            //     ptsAwarded: quizPts,\r\n            //     eventID: 2\r\n            // }\r\n            // console.log(JSON.stringify(data) + \"DATA SENT FOR PUT\")\r\n            // const config = {\r\n            //     headers: {\r\n            //         'content-type': 'application/json'\r\n            //     }\r\n            // }\r\n\r\n            // axios.put('http://ades-ca1-project.herokuapp.com/api/points/' + studentID, data, config)\r\n            //     .then(res => {\r\n            //         console.log(res);\r\n            //         console.log(res.data);\r\n            //         console.log(\"PUT SUCESSS\")\r\n            //         // Insert points history\r\n            //         axios.post('http://ades-ca1-project.herokuapp.com/api/ptsHistory/' + studentID, points, config)\r\n            //             .then(res => {\r\n            //                 console.log(res);\r\n            //                 console.log(res.data);\r\n\r\n            //                 window.alert(\"Points redeemed successfully\");\r\n            //                 //updating the state \r\n\r\n\r\n            //             }).catch(error => {\r\n            //                 console.log(error.response.data.error)\r\n            //              })\r\n            //     }).catch(error => {\r\n            //         console.log(error.response.data.error)\r\n            //      })\r\n\r\n\r\n\r\n\r\n\r\n       // })\r\n        \r\n            // if(this.state.currentPts!==0){\r\n            //      this.handleClosing();\r\n                \r\n            // }\r\n            \r\n          \r\n\r\n       \r\n\r\n    }\r\n    afterSetStateFinished = () =>{\r\n        const data = {\r\n            currentPts: this.state.currentPts,\r\n            totalPts: this.state.totalPts,\r\n            mazeLvl: this.state.mazeLvl\r\n        }\r\n       \r\n        this.setState({\r\n            quizPts: this.props.quizPts\r\n        }, () => {\r\n            this.postingFunction();\r\n        });\r\n        const points = {\r\n            ptsAwarded: this.state.quizPts,\r\n            eventID: 2\r\n        }\r\n        console.log(JSON.stringify(data) + \"DATA SENT FOR PUT\")\r\n        const config = {\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n        }\r\n\r\n        axios.put('http://ades-ca1-project.herokuapp.com/api/points/' + this.props.id, data, config)\r\n            .then(res => {\r\n                console.log(res);\r\n                console.log(res.data);\r\n                console.log(\"PUT SUCESSS\")\r\n                // Insert points history\r\n            \r\n            }).catch(error => {\r\n                console.log(error.response.data.error)\r\n             });\r\n               \r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    postingFunction=()=>{\r\n        const points = {\r\n            ptsAwarded: this.state.quizPts,\r\n            eventID: 2\r\n        }\r\n        const config = {\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n        }\r\n          axios.post('http://ades-ca1-project.herokuapp.com/api/ptsHistory/' + this.props.id, points, config)\r\n                    .then(res => {\r\n                        // console.log(res);\r\n                        // console.log(res.data);\r\n\r\n                        window.alert(\"Points redeemed successfully\");\r\n                            this.handleClosing();\r\n                        //updating the state \r\n                        \r\n\r\n                    }).catch(error => {\r\n                        console.log(error.response.data.error)\r\n                     })\r\n    }\r\n\r\n    handleClosing = () => {\r\n        this.props.onPopupClose(false, this.props.level);\r\n        this.props.onNewLevel(true);\r\n    }\r\n    handleClose =()=>{\r\n        this.props.onPopupClose(false, this.props.level);\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Fragment>\r\n                <Modal show={this.props.showModalPopup} onHide={this.handleClose} id={this.props.level}\r\n                    size=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title id=\"sign-in-title\">\r\n                            Level {this.props.level}\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <hr />\r\n                        <div className=\"Quiz\">\r\n                            <div>Points : {this.props.point} </div>\r\n                            <Button onClick={this.handleComplete} >Complete</Button>\r\n                        </div>\r\n                    </Modal.Body>\r\n                </Modal >\r\n            </Fragment >\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}