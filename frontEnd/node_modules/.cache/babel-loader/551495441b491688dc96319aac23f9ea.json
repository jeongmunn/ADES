{"ast":null,"code":"import _classCallCheck from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jw/OneDrive/Documents/GitHub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{getStorage,ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import'../css/badgemazeEdit.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditBadge=/*#__PURE__*/function(_React$Component){_inherits(EditBadge,_React$Component);var _super=_createSuper(EditBadge);function EditBadge(){var _this;_classCallCheck(this,EditBadge);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],name:'',requirements:'',pic_url:'',badgeClassID:''};_this.handleName=function(event){_this.setState({name:event.target.value});};_this.handleRequirement=function(event){_this.setState({requirements:event.target.value});};_this.handleURL=function(event){_this.setState({pic_url:event.target.files[0]});};_this.handleBadgeClassID=function(event){_this.setState({badgeClassID:event.target.value});};_this.handleSubmit=function(event){event.preventDefault();// file upload\nvar storage=getStorage();var storageRef=ref(storage,'img/'+_this.state.pic_url.name);var file=_this.state.pic_url;// Create file metadata including the content type\n/** @type {any} */var metadata={contentType:_this.state.pic_url.type};uploadBytes(storageRef,file,metadata);getDownloadURL(storageRef).then(function(downloadURL){console.log('File available at',downloadURL);var bcID=document.getElementById(\"dropDown\");var bID=bcID.value;var badgeClassID=parseInt(bID);var badge={name:_this.state.name,requirements:_this.state.requirements,pic_url:downloadURL,badgeClassID:badgeClassID};console.log(\"BADGEEEE\"+JSON.stringify(badge));var config={headers:{'content-type':'application/json'}};var badgeID=window.location.href.split('/')[3].slice(13);var baseUrl=\"https://ades-ca1-project.herokuapp.com/api\";console.log(badgeID);axios.put(\"\".concat(baseUrl,\"/editBadge/\").concat(badgeID),badge,config).then(function(res){console.log(res);console.log(res.data);window.location.replace('https://ades-ca1-project.herokuapp.com/badgesAdmin');});});};return _this;}_createClass(EditBadge,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{id:\"bodyEdit\",children:/*#__PURE__*/_jsx(\"div\",{id:\"divEdit\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"editReward\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Badge\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,id:\"formEdit\",children:[/*#__PURE__*/_jsxs(\"label\",{class:\"label\",children:[\"Badge Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",onChange:this.handleName})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{class:\"label\",children:[\"Badge Requirement:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"requirements\",onChange:this.handleRequirement})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{class:\"label\",children:[\"Pic URL:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"pic_url\",onChange:this.handleURL})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Badge Class ID:\",/*#__PURE__*/_jsxs(\"select\",{name:\"badgeClassID\",onChange:this.handleBadgeClassID,id:\"dropDown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Air\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Water\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Fire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Geo\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add\"})]})]})})});}}]);return EditBadge;}(React.Component);export{EditBadge as default};","map":{"version":3,"sources":["C:/Users/jw/OneDrive/Documents/GitHub/ADES/frontend/src/components/EditBadge.js"],"names":["React","axios","getStorage","ref","uploadBytes","getDownloadURL","EditBadge","state","data","name","requirements","pic_url","badgeClassID","handleName","event","setState","target","value","handleRequirement","handleURL","files","handleBadgeClassID","handleSubmit","preventDefault","storage","storageRef","file","metadata","contentType","type","then","downloadURL","console","log","bcID","document","getElementById","bID","parseInt","badge","JSON","stringify","config","headers","badgeID","window","location","href","split","slice","baseUrl","put","res","replace","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport '../css/badgemazeEdit.css';\r\n\r\n\r\nexport default class EditBadge extends React.Component {\r\n\r\n    state = {\r\n        data: [],\r\n        name: '',\r\n        requirements: '',\r\n        pic_url: '',\r\n        badgeClassID: ''\r\n    }\r\n\r\n\r\n\r\n    handleName = event => {\r\n        this.setState({ name: event.target.value });\r\n    }\r\n\r\n    handleRequirement = event => {\r\n        this.setState({ requirements: event.target.value });\r\n    }\r\n\r\n    handleURL = event => {\r\n        this.setState({ pic_url: event.target.files[0], });\r\n    }\r\n\r\n    handleBadgeClassID = event => {\r\n        this.setState({ badgeClassID: event.target.value });\r\n    }\r\n\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        // file upload\r\n        const storage = getStorage();\r\n        const storageRef = ref(storage, 'img/' + this.state.pic_url.name);\r\n        var file = this.state.pic_url;\r\n        // Create file metadata including the content type\r\n        /** @type {any} */\r\n        const metadata = {\r\n            contentType: this.state.pic_url.type,\r\n        };\r\n        \r\n        uploadBytes(storageRef, file, metadata);\r\n\r\n        getDownloadURL(storageRef).then((downloadURL) => {\r\n            console.log('File available at', downloadURL);\r\n\r\n            var bcID = document.getElementById(\"dropDown\");\r\n            var bID = bcID.value;\r\n            var badgeClassID = parseInt(bID);\r\n\r\n            const badge = {\r\n                name: this.state.name,\r\n                requirements: this.state.requirements,\r\n                pic_url: downloadURL,\r\n                badgeClassID: badgeClassID\r\n            };\r\n\r\n            console.log(\"BADGEEEE\" + JSON.stringify(badge))\r\n\r\n            const config = {\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n            }\r\n\r\n            const badgeID = window.location.href.split('/')[3].slice(13);\r\n            const baseUrl = \"https://ades-ca1-project.herokuapp.com/api\";\r\n            console.log(badgeID);\r\n\r\n            axios.put(`${baseUrl}/editBadge/${badgeID}`, badge, config)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    console.log(res.data);\r\n                    window.location.replace('https://ades-ca1-project.herokuapp.com/badgesAdmin')\r\n                })\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"bodyEdit\">\r\n                <div id=\"divEdit\">\r\n                    <div className=\"editReward\">\r\n                        <h1>Edit Badge</h1>\r\n                        <form onSubmit={this.handleSubmit} id=\"formEdit\">\r\n                            <label class='label'>\r\n                                Badge Name:\r\n                                <input type=\"text\" name=\"name\" onChange={this.handleName} />\r\n                            </label>\r\n                            <br />\r\n                            <label class='label'>\r\n                                Badge Requirement:\r\n                                <input type=\"text\" name=\"requirements\" onChange={this.handleRequirement} />\r\n                            </label>\r\n                            <br />\r\n                            <label class='label'>\r\n                                Pic URL:\r\n                                <input type=\"file\" name=\"pic_url\" onChange={this.handleURL} />\r\n                            </label>\r\n                            <br />\r\n                            <label>\r\n                                Badge Class ID:\r\n                                <select name=\"badgeClassID\" onChange={this.handleBadgeClassID} id=\"dropDown\">\r\n                                    <option value=\"1\">Air</option>\r\n                                    <option value=\"2\">Water</option>\r\n                                    <option value=\"3\">Fire</option>\r\n                                    <option value=\"4\">Geo</option>\r\n                                </select>\r\n                                {/* <input type=\"text\" name=\"badgeClassID\" onChange={this.handleBadgeClassID} /> */}\r\n                            </label>\r\n                            <br />\r\n                            <button type=\"submit\">Add</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}