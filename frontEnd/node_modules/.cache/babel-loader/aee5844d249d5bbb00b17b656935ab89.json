{"ast":null,"code":"import _classCallCheck from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/isaactan17/Desktop/ADES/frontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import Card from'react-bootstrap/Card';import{signOut}from\"firebase/auth\";import{auth}from'../firebase.js';import'../css/pointsHistory.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ptsHistory=/*#__PURE__*/function(_React$Component){_inherits(ptsHistory,_React$Component);var _super=_createSuper(ptsHistory);function ptsHistory(){var _this;_classCallCheck(this,ptsHistory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],uid:'',id:0};return _this;}_createClass(ptsHistory,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Auth\nauth.onAuthStateChanged(function(user){// IF there's user\nif(user){console.log(\"User is Signed IN \");_this2.setState({uid:user.uid});var config={headers:{'content-type':'application/json'}};// Get the user type\naxios.get(\"https://ades-ca1-project.herokuapp.com/api/userType/\"+_this2.state.uid,config).then(function(res){// IF is student\nif(res.data.type===1){_this2.setState({id:res.data.studentID});// IF is teacher\n}else if(res.data.type===2){window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/teacherDashboard');// ELSE kick them out\n}else{window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});// ELSE kick them out\n}else{console.log(\"THERE IS NO USER\");signOut(auth);window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');}});// GET student's points history\naxios.get('https://ades-ca1-project.herokuapp.com/api/ptsHistory/'+this.state.id).then(function(res){_this2.setState({data:res.data});});}},{key:\"render\",value:function render(){var data=this.state.data;return/*#__PURE__*/_jsxs(\"div\",{className:\"PointsHistory\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Points History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"history\",children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(Card,{className:\"card\",border:\"primary\",body:true,children:[\"You've earned \",item.pointsAwarded,\" points from event \",item.eventName]});})})]});}}]);return ptsHistory;}(React.Component);export{ptsHistory as default};","map":{"version":3,"sources":["/Users/isaactan17/Desktop/ADES/frontEnd/src/components/StudentPointsHistory.js"],"names":["React","axios","Card","signOut","auth","ptsHistory","state","data","uid","id","onAuthStateChanged","user","console","log","setState","config","headers","get","then","res","type","studentID","window","location","replace","map","item","pointsAwarded","eventName","Component"],"mappings":"wmBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,IAAT,KAAqB,gBAArB,CACA,MAAO,0BAAP,C,2FAEqBC,CAAAA,U,uVACjBC,K,CAAQ,CACJC,IAAI,CAAE,EADF,CAEJC,GAAG,CAAE,EAFD,CAGJC,EAAE,CAAE,CAHA,C,uEAMR,4BAAoB,iBAChB;AACAL,IAAI,CAACM,kBAAL,CAAwB,SAACC,IAAD,CAAU,CAC9B;AACA,GAAIA,IAAJ,CAAU,CACNC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACA,MAAI,CAACC,QAAL,CAAc,CAAEN,GAAG,CAAEG,IAAI,CAACH,GAAZ,CAAd,EACA,GAAMO,CAAAA,MAAM,CAAG,CACXC,OAAO,CAAE,CACL,eAAgB,kBADX,CADE,CAAf,CAMA;AACAf,KAAK,CAACgB,GAAN,CAAU,uDAAyD,MAAI,CAACX,KAAL,CAAWE,GAA9E,CAAmFO,MAAnF,EACKG,IADL,CACU,SAAAC,GAAG,CAAI,CACT;AACA,GAAIA,GAAG,CAACZ,IAAJ,CAASa,IAAT,GAAkB,CAAtB,CAAyB,CACrB,MAAI,CAACN,QAAL,CAAc,CAAEL,EAAE,CAAEU,GAAG,CAACZ,IAAJ,CAASc,SAAf,CAAd,EACJ;AACC,CAHD,IAGO,IAAIF,GAAG,CAACZ,IAAJ,CAASa,IAAT,GAAkB,CAAtB,CAAyB,CAC5BE,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,kEAAxB,EACJ;AACC,CAHM,IAGA,CACHF,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,iDAAxB,EACH,CACJ,CAZL,EAaJ;AACC,CAxBD,IAwBO,CACHZ,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACAV,OAAO,CAACC,IAAD,CAAP,CACAkB,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,iDAAxB,EACH,CACJ,CA/BD,EAiCA;AACAvB,KAAK,CAACgB,GAAN,CAAU,yDAA2D,KAAKX,KAAL,CAAWG,EAAhF,EACKS,IADL,CACU,SAAAC,GAAG,CAAI,CACT,MAAI,CAACL,QAAL,CAAc,CAAEP,IAAI,CAAEY,GAAG,CAACZ,IAAZ,CAAd,EACH,CAHL,EAIH,C,sBAED,iBAAS,CAEL,GAAMA,CAAAA,IAAI,CAAG,KAAKD,KAAL,CAAWC,IAAxB,CAEA,mBACI,aAAK,SAAS,CAAC,eAAf,wBACI,sCADJ,cAEI,YAAK,SAAS,CAAC,SAAf,UACKA,IAAI,EAAIA,IAAI,CAACkB,GAAL,CAAS,SAAAC,IAAI,qBAClB,MAAC,IAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,MAAM,CAAC,SAA9B,CAAwC,IAAI,KAA5C,4BAA4DA,IAAI,CAACC,aAAjE,uBAAmGD,IAAI,CAACE,SAAxG,GADkB,EAAb,CADb,EAFJ,GADJ,CAUH,C,wBA/DmC5B,KAAK,CAAC6B,S,SAAzBxB,U","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Card from 'react-bootstrap/Card';\nimport { signOut } from \"firebase/auth\";\nimport { auth } from '../firebase.js';\nimport '../css/pointsHistory.css';\n\nexport default class ptsHistory extends React.Component {\n    state = {\n        data: [],\n        uid: '',\n        id: 0\n    }\n\n    componentDidMount() {\n        // Auth\n        auth.onAuthStateChanged((user) => {\n            // IF there's user\n            if (user) {\n                console.log(\"User is Signed IN \");\n                this.setState({ uid: user.uid });\n                const config = {\n                    headers: {\n                        'content-type': 'application/json'\n                    }\n                }\n\n                // Get the user type\n                axios.get(`https://ades-ca1-project.herokuapp.com/api/userType/` + this.state.uid, config)\n                    .then(res => {\n                        // IF is student\n                        if (res.data.type === 1) {\n                            this.setState({ id: res.data.studentID })\n                        // IF is teacher\n                        } else if (res.data.type === 2) {\n                            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment/teacherDashboard');\n                        // ELSE kick them out\n                        } else {\n                            window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n                        }\n                    })\n            // ELSE kick them out\n            } else {\n                console.log(\"THERE IS NO USER\");\n                signOut(auth);\n                window.location.replace('https://ades-ca1-project.herokuapp.com/quizment');\n            }\n        });\n\n        // GET student's points history\n        axios.get('https://ades-ca1-project.herokuapp.com/api/ptsHistory/' + this.state.id)\n            .then(res => {\n                this.setState({ data: res.data });\n            })\n    }\n\n    render() {\n\n        const data = this.state.data;\n\n        return (\n            <div className=\"PointsHistory\">\n                <h1>Points History</h1>\n                <div className=\"history\">\n                    {data && data.map(item =>\n                        <Card className=\"card\" border=\"primary\" body>You've earned {item.pointsAwarded} points from event {item.eventName}</Card>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}